{"version":3,"sources":["webpack:///webpack/bootstrap bb06176549a547210f39","webpack:///./src/index.js","webpack:///./~/mithril/mithril.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/Helpers/Helpers.js","webpack:///./src/Components/ChatApp/ChatApp.js","webpack:///./src/Components/ChatApp/ChatApp.styl?f16a","webpack:///./src/Components/ChatApp/ChatApp.styl","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./src/Components/Sidebar/Sidebar.js","webpack:///./src/Components/Sidebar/Sidebar.styl?7a96","webpack:///./src/Components/Sidebar/Sidebar.styl","webpack:///./src/Components/MessageRoom/MessageRoom.js","webpack:///./src/Components/MessageRoom/MessageRoom.styl?499a","webpack:///./src/Components/MessageRoom/MessageRoom.styl","webpack:///./src/Services/Reddit.js","webpack:///./src/Services/Subchat.js","webpack:///./src/Components/Message/Model.js","webpack:///./src/Components/Message/Message.js","webpack:///./src/Components/Message/Message.styl?eb61","webpack:///./src/Components/Message/Message.styl","webpack:///./src/Services/MessageParser.js","webpack:///./~/strftime/strftime.js","webpack:///./src/Services/Notifications.js","webpack:///./src/Components/Panel/Panel.js","webpack:///./src/Components/Panel/Panel.styl?80c8","webpack:///./src/Components/Panel/Panel.styl","webpack:///./src/Components/Panel/Panels/UserPanel.js","webpack:///./src/Components/MessageRoom/Views/GroupSettings.js","webpack:///./src/Components/OptionsMenu/OptionsMenu.js","webpack:///./src/Components/OptionsMenu/OptionsMenu.styl?72f3","webpack:///./src/Components/OptionsMenu/OptionsMenu.styl","webpack:///./src/Components/Topbar/Topbar.js","webpack:///./src/Components/Topbar/Topbar.styl?6142","webpack:///./src/Components/Topbar/Topbar.styl","webpack:///./src/Components/HomeView/HomeView.js","webpack:///./src/Components/HomeView/HomeView.styl?3bb4","webpack:///./src/Components/HomeView/HomeView.styl","webpack:///./src/Components/Settings/Settings.js","webpack:///./src/Components/Settings/Settings.styl?8adb","webpack:///./src/Components/Settings/Settings.styl","webpack:///./src/Services/Transport.js","webpack:///./~/sockjs-client/lib/entry.js","webpack:///./~/sockjs-client/lib/transport-list.js","webpack:///./~/sockjs-client/lib/transport/websocket.js","webpack:///./~/process/browser.js","webpack:///./~/sockjs-client/lib/utils/event.js","webpack:///./~/sockjs-client/lib/utils/random.js","webpack:///./~/sockjs-client/lib/utils/browser-crypto.js","webpack:///./~/sockjs-client/lib/utils/url.js","webpack:///./~/url-parse/index.js","webpack:///./~/requires-port/index.js","webpack:///./~/url-parse/lolcation.js","webpack:///./~/querystringify/index.js","webpack:///./~/debug/browser.js","webpack:///./~/debug/debug.js","webpack:///./~/ms/index.js","webpack:///./~/inherits/inherits_browser.js","webpack:///./~/sockjs-client/lib/event/emitter.js","webpack:///./~/sockjs-client/lib/event/eventtarget.js","webpack:///./~/sockjs-client/lib/transport/browser/websocket.js","webpack:///./~/sockjs-client/lib/transport/xhr-streaming.js","webpack:///./~/sockjs-client/lib/transport/lib/ajax-based.js","webpack:///./~/sockjs-client/lib/transport/lib/sender-receiver.js","webpack:///./~/sockjs-client/lib/transport/lib/buffered-sender.js","webpack:///./~/sockjs-client/lib/transport/lib/polling.js","webpack:///./~/sockjs-client/lib/transport/receiver/xhr.js","webpack:///./~/sockjs-client/lib/transport/sender/xhr-cors.js","webpack:///./~/sockjs-client/lib/transport/browser/abstract-xhr.js","webpack:///./~/sockjs-client/lib/transport/sender/xhr-local.js","webpack:///./~/sockjs-client/lib/utils/browser.js","webpack:///./~/sockjs-client/lib/transport/xdr-streaming.js","webpack:///./~/sockjs-client/lib/transport/sender/xdr.js","webpack:///./~/sockjs-client/lib/transport/eventsource.js","webpack:///./~/sockjs-client/lib/transport/receiver/eventsource.js","webpack:///./~/sockjs-client/lib/transport/browser/eventsource.js","webpack:///./~/sockjs-client/lib/transport/lib/iframe-wrap.js","webpack:///./~/sockjs-client/lib/transport/iframe.js","webpack:///./~/json3/lib/json3.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./~/sockjs-client/lib/version.js","webpack:///./~/sockjs-client/lib/utils/iframe.js","webpack:///./~/sockjs-client/lib/utils/object.js","webpack:///./~/sockjs-client/lib/transport/htmlfile.js","webpack:///./~/sockjs-client/lib/transport/receiver/htmlfile.js","webpack:///./~/sockjs-client/lib/transport/xhr-polling.js","webpack:///./~/sockjs-client/lib/transport/xdr-polling.js","webpack:///./~/sockjs-client/lib/transport/jsonp-polling.js","webpack:///./~/sockjs-client/lib/transport/receiver/jsonp.js","webpack:///./~/sockjs-client/lib/transport/sender/jsonp.js","webpack:///./~/sockjs-client/lib/main.js","webpack:///./~/sockjs-client/lib/shims.js","webpack:///./~/sockjs-client/lib/utils/escape.js","webpack:///./~/sockjs-client/lib/utils/transport.js","webpack:///./~/sockjs-client/lib/utils/log.js","webpack:///./~/sockjs-client/lib/event/event.js","webpack:///./~/sockjs-client/lib/location.js","webpack:///./~/sockjs-client/lib/event/close.js","webpack:///./~/sockjs-client/lib/event/trans-message.js","webpack:///./~/sockjs-client/lib/info-receiver.js","webpack:///./~/sockjs-client/lib/transport/sender/xhr-fake.js","webpack:///./~/sockjs-client/lib/info-iframe.js","webpack:///./~/sockjs-client/lib/info-iframe-receiver.js","webpack:///./~/sockjs-client/lib/info-ajax.js","webpack:///./~/sockjs-client/lib/iframe-bootstrap.js","webpack:///./~/sockjs-client/lib/facade.js","webpack:///./src/Services/ChannelManager.js","webpack:///./src/Services/ModeratorToolbox.js","webpack:///./src/Services/Storage.js","webpack:///./src/Services/Settings.js","webpack:///./src/Services/EventBus.js","webpack:///./src/Services/ExtensionSync.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;ACtCA;;KAAY;;AACZ;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,EAAC,SAAS,OAAT,GAAmB;;AAEnB,MAAI,OAAO,QAAP,CAAgB,IAAhB,CAAqB,OAArB,CAA6B,iBAA7B,IAAkD,CAAC,CAAD,IAAM,OAAO,QAAP,CAAgB,IAAhB,CAAqB,OAArB,CAA6B,kBAA7B,IAAmD,CAAC,CAAD,EAAI;AAClH,UADkH;GAAnH;;AAIA,MAAI,OAAO,SAAS,aAAT,CAAuB,MAAvB,CAAP,CANe;AAOnB,MAAI,qBAAqB,KAArB,CAPe;AAQnB,MAAI,YAAY,IAAZ;;;;AARe,MAYf,KAAK,YAAL,CAAkB,SAAlB,CAAJ,EAAkC;AACjC,QAAK,eAAL,CAAqB,SAArB,EADiC;AAEjC,wBAAqB,IAArB,CAFiC;GAAlC;;;AAZmB,GAmBnB,CAAE,QAAF,CAAW,OAAX,GAAqB,UAAS,GAAT,EAAc;AAClC,WAAQ,KAAR,CAAc,IAAI,KAAJ,CAAd,CADkC;GAAd,CAnBF;;AAwBnB,MAAI,YAAY,cAAZ,CAxBe;AAyBnB,MAAI,YAAY,IAAZ,CAzBe;;AA2BnB,YAAU,SAAV,EACE,IADF,CACO,UAAC,KAAD,EAAW;AAChB,eAAY,KAAZ,CADgB;GAAX,CADP,CAIE,IAJF,CAIO,MAJP,EA3BmB;;AAoCnB,WAAS,MAAT,GAAkB;AACjB,OAAI,OAAO,EAAE,OAAF,EAAW,QAAX,CAAoB,EAAE,OAAF,CAApB,CAAP,CADa;AAEjB,KAAE,KAAF,CAAQ,KAAK,CAAL,CAAR,EAAiB,QAAQ,SAAR,oBAA2B;AAC3C,SAAK,SAAL;AACA,WAAO,SAAP;AACA,mBAAe,kBAAf;IAHgB,CAAjB,EAFiB;GAAlB;;AAUA,WAAS,YAAT,GAAwB;AACvB,OAAI,YAAY,wBAAZ,CADmB;AAEvB,aAAU,EAAV,CAAa,KAAb,EAAoB,UAAS,UAAT,EAAqB;;IAArB,CAApB,CAFuB;;AAMvB,UAAO,SAAP,CANuB;GAAxB;;AAUA,WAAS,SAAT,CAAmB,GAAnB,EAAwB;AACvB,OAAI,WAAW,EAAE,QAAF,EAAX;;;;AADmB,OAKnB,YAAY,kBAAQ,GAAR,CAAY,UAAZ,CAAZ,CALmB;AAMvB,OAAI,QAAO,6DAAP,KAAqB,QAArB,EAA+B;AAClC,gBAAY;;AAEX,cAAS,IAAT;;;AAGA,mBAAc,EAAd;;;AAGA,qBAAgB,EAAhB;;;AAGA,sBAAiB,IAAjB;KAXD,CADkC;IAAnC;;AAgBA,OAAI,QAAQ,uBAAa,SAAb,CAAR,CAtBmB;AAuBvB,OAAI,qBAAqB,KAArB,CAvBmB;AAwBvB,SAAM,QAAN,GAAiB,UAAS,OAAT,EAAkB,SAAlB,EAA6B,SAA7B,EAAwC,MAAxC,EAAgD;;;;AAIhE,QAAI,CAAC,kBAAD,EAAqB;AACxB,YADwB;KAAzB;;;;AAJgE,QAU5D,YAAY,cAAZ,IAA8B,SAA9B,IAA2C,UAAU,UAAV,EAAsB,EAArE,MACO;AACN,uBAAQ,GAAR,CAAY,UAAZ,EAAwB,MAAxB,EADM;KADP;;AAKA,QAAI,OAAJ,CAAY,cAAZ,EAA4B,OAA5B,EAAqC,SAArC,EAAgD,SAAhD,EAA2D,MAA3D,EAfgE;IAAhD,CAxBM;;AA0CvB,OAAI,kBAAJ,EAAwB;AACvB,gBAAY,4BAAkB,KAAlB,EAAyB,GAAzB,EAA8B,IAA9B,CAAZ,CADuB;AAEvB,cAAU,IAAV,CAAe,YAAM;AACpB,0BAAqB,IAArB,CADoB;AAEpB,cAAS,OAAT,CAAiB,KAAjB,EAFoB;KAAN,CAAf,CAFuB;IAAxB,MAOO;AACN,yBAAqB,IAArB,CADM;AAEN,aAAS,OAAT,CAAiB,KAAjB,EAFM;IAPP;;AAYA,UAAO,SAAS,OAAT,CAtDgB;GAAxB;EAxDA,CAAD,G;;;;;;;mCCPA,kDAAC,6BAA6B;AAC9B;AACA;AACA;AACA;AACA;AACA,GAAE;AACF,kDAAsB,WAAW;AACjC,GAAE;AACF;AACA;AACA;AACA,EAAC,6CAA6C,gCAAgC;AAC9E;;AAEA;AACA;AACA;;AAEA,iBAAgB;AAChB,eAAc;;AAEd;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,eAAc,OAAO;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAY,IAAI;AAChB,aAAY,UAAU;AACtB,aAAY,YAAY;AACxB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAiB,qCAAqC;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI,IAAI;AACR,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,2BAA2B;AACxC;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oDAAmD,qBAAqB;AACxE,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAmC;AACnC;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qCAAoC;AACpC,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAoC,SAAS;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,uDAAsD;AACtD,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,mCAAkC,wBAAwB,IAAI;AAC9D;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA,iEAAgE,iBAAiB;AACjF;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yIAAwI;AACxI;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAmE;AACnE,yDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA,uBAAsB,IAAI;AAC1B;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAgC,QAAQ;AACxC;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,qBAAqB;AAC/C;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA,YAAW,sBAAsB;AACjC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAsC,WAAW;AACjD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAkB,sBAAsB;AACxC;AACA;;AAEA;AACA;;AAEA;AACA,iBAAgB;AAChB,uDAAsD;AACtD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ,oDAAmD;AACnD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAc;AACd;AACA;AACA;;AAEA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB,EAAE;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;;AAEA;AACA;;AAEA,4BAA2B;;AAE3B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,KAAI;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA4C;;AAE5C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB,0BAA0B;AAC/C,MAAK;AACL,uBAAsB,2BAA2B;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,gCAA+B;AAC/B,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP,OAAM;AACN;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAC;;;;;;;;AC5lED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;SCNgB;SAKA;SAmCA;SA2CA;SAKA;SAKA;;AA/FhB,KAAI,GAAJ;;AAEO,UAAS,cAAT,CAAwB,YAAxB,EAAsC;AAC5C,QAAM,YAAN,CAD4C;EAAtC;;AAKA,UAAS,WAAT,GAAuB;AAC7B,MAAI,cAAe,OAAO,IAAI,KAAJ,CAAU,SAAV,CAAP,CADU;AAE7B,MAAI,oBAAoB,OAAO,QAAP,CAAgB,QAAhB,GACvB,OAA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;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;;;;;;;ACvPA;;AAEA;;KAAY;;AACZ;;;;AACA;;;;AACA;;;;;;;;;;;AAMA,KAAI,UAAU,EAAV;;AAEJ,SAAQ,UAAR,GAAqB,UAAS,IAAT,EAAe;;;AACnC,OAAK,GAAL,GAAW,KAAK,GAAL,CADwB;AAEnC,OAAK,IAAL,GAAY,EAAE,IAAF,CAAO,CAAP,CAAZ,CAFmC;AAGnC,OAAK,mBAAL,GAA2B,KAA3B;;;AAHmC,MAMnC,CAAK,YAAL,GAAoB,IAApB;;;AANmC,MASnC,CAAK,uBAAL,GAA+B,EAAE,IAAF,CAAO,CAAP,CAA/B,CATmC;AAUnC,OAAK,kBAAL,GAA0B,EAAE,IAAF,CAAO,EAAP,CAA1B,CAVmC;;AAYnC,OAAK,YAAL,GAAoB,UAAC,YAAD,EAAkB;AACrC,SAAK,GAAL,CAAS,KAAT,CAAe,SAAf,CAAyB,YAAzB,EADqC;GAAlB,CAZe;;AAgBnC,OAAK,sBAAL,GAA8B,UAAC,KAAD,EAAW;AACxC,SAAK,oBAAL,CAA0B,KAA1B,EADwC;AAExC,SAAK,YAAL,GAAoB,QAAQ,SAAR,wBAA+B;AAClD,SAAK,MAAK,GAAL,CAAS,GAAT;IADc,CAApB,CAFwC;AAKxC,SAAK,YAAL,CAAkB,QAAlB,CAA2B,IAA3B,CAAgC,OAAhC,EAAyC,YAAM;AAC9C,UAAK,YAAL,GAAoB,IAApB,CAD8C;IAAN,CAAzC,CALwC;GAAX,CAhBK;;AA0BnC,OAAK,cAAL,GAAsB,UAAC,KAAD,EAAW;AAChC,SAAK,oBAAL,CAA0B,KAA1B,EADgC;AAEhC,SAAK,mBAAL,GAA2B,IAA3B,CAFgC;;AAIhC,OAAI,MAAK,GAAL,CAAS,UAAT,GAAsB,MAAtB,KAAiC,CAAjC,EAAoC;AACvC,UAAK,GAAL,CAAS,UAAT,CAAoB,OAApB,GADuC;IAAxC;;AAIA,SAAK,GAAL,CAAS,GAAT,CAAa,IAAb,CAAkB,uBAAlB,EAA2C,MAAK,eAAL,CAA3C,CARgC;GAAX,CA1Ba;;AAqCnC,OAAK,eAAL,GAAuB,YAAM;AAC5B,SAAK,mBAAL,GAA2B,KAA3B,CAD4B;GAAN,CArCY;;AAyCnC,OAAK,qBAAL,GAA6B,UAAC,KAAD,EAAW;AACvC,SAAK,oBAAL,CAA0B,KAA1B,EADuC;AAEvC,OAAI,WAAW,MAAK,kBAAL,EAAX,CAFmC;AAGvC,SAAK,kBAAL,CAAwB,EAAxB;;;AAHuC,OAMnC,CAAC,YAAU,EAAV,CAAD,CAAe,OAAf,CAAuB,WAAvB,EAAoC,EAApC,CAAJ,EAA6C;;AAE5C,QAAI,SAAS,WAAT,GAAuB,OAAvB,CAA+B,IAA/B,MAAyC,CAAzC,EAA4C;AAC/C,gBAAW,MAAM,QAAN,CADoC;KAAhD,MAEO,IAAI,SAAS,WAAT,GAAuB,OAAvB,CAA+B,KAA/B,MAA0C,CAA1C,EAA6C;AACvD,gBAAW,QAAQ,QAAR,CAD4C;KAAjD;;AAIP,QAAI,OAAO,MAAK,GAAL,CAAS,KAAT,CAAe,UAAf,CAA0B,QAA1B,CAAP,CARwC;AAS5C,UAAK,GAAL,CAAS,KAAT,CAAe,SAAf,CAAyB,KAAK,QAAL,CAAc,IAAd,EAAzB,EAT4C;AAU5C,UAAK,eAAL;;;AAV4C,KAa5C,CAAE,MAAM,MAAN,CAAF,CAAgB,IAAhB,CAAqB,OAArB,EAA8B,GAA9B,CAAkC,EAAlC,EAb4C;IAA7C;;;AANuC,UAuBhC,KAAP,CAvBuC;GAAX,CAzCM;;AAmEnC,OAAK,oBAAL,GAA4B,UAAC,KAAD,EAAW;AACtC,WAAQ,EAAE,KAAF,CAAQ,GAAR,CAAY,KAAZ,CAAR,CADsC;AAEtC,SAAM,eAAN,GAFsC;AAGtC,UAAO,KAAP,CAHsC;GAAX,CAnEO;EAAf;;AA0ErB,SAAQ,IAAR,GAAe,UAAS,UAAT,EAAqB;AACnC,MAAI,WAAW,EAAX,CAD+B;AAEnC,MAAI,eAAe,OAAO,MAAP,CAAc,IAAd,CAAf,CAF+B;AAGnC,MAAI,OAAO,EAAP;;;AAH+B,GAMnC,CAAE,IAAF,CAAO,WAAW,GAAX,CAAe,KAAf,CAAqB,KAArB,EAA4B,UAAS,OAAT,EAAkB;AACpD,OAAI,OAAO,QAAQ,QAAR,CADyC;AAEpD,OAAI,gBAAJ;;;AAFoD,OAKhD,CAAC,KAAK,eAAL,CAAqB,MAArB,EAA6B;AACjC,aAAS,IAAT,CAAc,OAAd,EADiC;IAAlC,MAEO;AACN,uBAAmB,KAAK,eAAL,CAAqB,MAArB,CAA4B,IAA5B,CADb;AAEN,iBAAa,gBAAb,IAAiC,aAAa,gBAAb,KAAkC,EAAlC,CAF3B;AAGN,iBAAa,gBAAb,EAA+B,IAA/B,CAAoC,OAApC,EAHM;IAFP;GALkC,CAAnC;;;AANmC,GAqBnC,CAAE,IAAF,CAAO,QAAP,EAAiB,UAAS,OAAT,EAAkB,GAAlB,EAAuB;AACvC,QAAK,IAAL,CAAU,QAAQ,mBAAR,CAA4B,UAA5B,EAAwC,OAAxC,CAAV,EADuC;AAEvC,KAAE,IAAF,CAAO,aAAa,QAAQ,QAAR,CAAiB,qBAAjB,EAAb,CAAP,EAA+D,UAAS,OAAT,EAAkB;AAChF,SAAK,IAAL,CAAU,QAAQ,mBAAR,CAA4B,UAA5B,EAAwC,OAAxC,EAAiD;AAC1D,iBAAY,IAAZ;KADS,CAAV,EADgF;IAAlB,CAA/D,CAFuC;GAAvB,CAAjB,CArBmC;;AA8BnC,SAAO,EAAE,KAAF,EAAS,EAAC,OAAO,CAAC,WAAW,mBAAX,GAAiC,YAAlC,GAAiD,yCAAjD,EAAjB,EAA8G,CACpH,EAAE,KAAF,EAAS,EAAC,OAAO,oBAAP,EAAV,EAAwC,CACvC,EAAE,MAAF,EAAU,EAAC,OAAO,2BAAP,EAAoC,UAAU,WAAW,qBAAX,EAAzD,EAA4F,CAC3F,EAAE,kJAAF,EAAsJ,CACrJ,EAAE,sPAAF,CADqJ,CAAtJ,CAD2F,EAI3F,EAAE,OAAF,EAAW;AACV,SAAM,MAAN;AACA,UAAO,iCAAP;AACA,gBAAa,aAAb;AACA,YAAS,WAAW,cAAX;AACT,YAAS,WAAW,oBAAX;AACT,YAAS,EAAE,QAAF,CAAW,OAAX,EAAoB,WAAW,kBAAX,CAA7B;GAND,CAJ2F,CAA5F,CADuC,EAcvC,WAAW,mBAAX,GAAiC,QAAQ,cAAR,CAAuB,UAAvB,CAAjC,GAAsE,IAAtE,EAEA,EAAE,8CAAF,EAAkD,EAAC,SAAS,WAAW,sBAAX,EAA5D,EAAgG,CAC/F,EAAE,kJAAF,EAAsJ,CACrJ,EAAE,yHAAF,CADqJ,CAAtJ,CAD+F,CAAhG,CAhBuC,EAqBvC,WAAW,YAAX,GAA0B,WAAW,YAAX,CAAwB,IAAxB,EAA1B,GAA2D,IAA3D,CArBD,CADoH,EAyBpH,EAAE,IAAF,EAAQ,EAAC,OAAO,WAAW,GAAX,CAAe,KAAf,CAAqB,KAArB,CAA2B,MAA3B,GAAoC,CAApC,GAAwC,sBAAxC,GAAiE,wDAAjE,EAAhB,EAA4I;;;;;;;;;;;;;;;;;;AAkB3I,aAAW,GAAX,CAAe,KAAf,CAAqB,KAArB,CAA2B,MAA3B,GAAoC,CAApC,GAAwC,IAAxC,GAA+C,EAAE,GAAF,EAAO,wCAAP,CAA/C,CAlBD,CAzBoH,CAA9G,CAAP,CA9BmC;EAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8Gf,SAAQ,mBAAR,GAA8B,UAAS,UAAT,EAAqB,OAArB,EAA8B,IAA9B,EAAoC;AACjE,MAAI,YAAJ,CADiE;AAEjE,MAAI,SAAJ,CAFiE;AAGjE,MAAI,eAAe,EAAf,CAH6D;;AAKjE,SAAO,QAAQ,EAAR,CAL0D;;AAOjE,MAAI,QAAQ,QAAR,CAAiB,cAAjB,GAAkC,CAAlC,EAAqC;AACxC,kBAAe,EAAE,MAAF,EAAU;AACxB,WAAO,iCAAP;AACA,WAAO,iBAAP;IAFc,EAGZ,QAAQ,QAAR,CAAiB,cAAjB,CAHH,CADwC;GAAzC;;AAOA,iBAAe,2BAAf,CAdiE;AAejE,MAAI,WAAW,GAAX,CAAe,KAAf,CAAqB,MAArB,OAAkC,OAAlC,EAA2C;AAC9C,mBAAgB,oCAAhB,CAD8C;GAA/C;AAGA,MAAI,KAAK,UAAL,EAAiB;AACpB,mBAAgB,yCAAhB,CADoB;GAArB;;AAIA,MAAI,iBAAiB,QAAQ,QAAR,CAAiB,SAAjB,EAAjB,CAtB6D;AAuBjE,mBAAiB,mBAAmB,CAAnB,GAChB,iBAAiB,cAAjB,GACA,iBAAiB,cAAjB,CAzBgE;;AA2BjE,cAAY,EAAE,IAAF,EAAQ;AACnB,UAAO,YAAP;AACA,YAAS,mBAAW;AAAE,eAAW,GAAX,CAAe,KAAf,CAAqB,SAArB,CAA+B,QAAQ,QAAR,CAAiB,IAAjB,EAA/B,EAAF;IAAX;GAFE,EAGT,CACF,EAAE,KAAF,EAAS,EAAC,OAAO,gCAAP,EAAV,EAAoD,CACnD,EAAE,MAAF,EAAU,EAAC,OAAO,gCAAP,EAAX,EAAqD,QAAQ,QAAR,CAAiB,YAAjB,EAArD,CADmD,EAEnD,EAAE,MAAF,EAAU,EAAC,OAAO,oCAAP,EAAX,EAAyD,cAAzD,CAFmD,CAApD,CADE,EAKF,YALE,EAMF,EAAE,2LAAF,EAA+L;AAC9L,YAAS,QAAQ,QAAR,CAAiB,KAAjB;GADV,EAEG,CACF,EAAE,iHAAF,CADE,CAFH,CANE,CAHS,CAAZ,CA3BiE;;AA2CjE,SAAO,SAAP,CA3CiE;EAApC;;AA8C9B,SAAQ,cAAR,GAAyB,UAAS,UAAT,EAAqB;AAC7C,MAAI,uBAAuB,CAAvB,CADyC;AAE7C,MAAI,iBAAiB,WAAW,kBAAX,GAAgC,WAAhC,EAAjB,CAFyC;;AAI7C,MAAI,iBAAiB,EAAE,GAAF,CAAM,WAAW,GAAX,CAAe,UAAf,EAAN,EAAmC,UAAS,GAAT,EAAc;AACrE,0BADqE;;AAGrE,OAAI,cAAc,IAAI,IAAJ,CAAS,WAAT,EAAd,CAHiE;AAIrE,OAAI,YAAY,OAAZ,CAAoB,eAAe,OAAf,CAAuB,KAAvB,EAA8B,EAA9B,CAApB,IAAyD,CAAC,CAAD,EAAI;AAChE,WAAO,IAAI,IAAJ,CADyD;IAAjE;GAJuD,CAApD,CAJyC;AAY7C,MAAI,iBAAO,gBAAP,EAAJ,EAA+B;AAC9B,kBAAe,OAAf,CAAuB,QAAQ,iBAAO,gBAAP,EAAR,CAAvB,CAD8B;GAA/B;AAGA,mBAAiB,EAAE,OAAF,CAAU,cAAV,CAAjB,CAf6C;;AAiB7C,mBAAiB,EAAE,GAAF,CAAM,cAAN,EAAsB,UAAS,QAAT,EAAmB;AACzD,UAAO,EAAE,IAAF,EAAQ;AACd,WAAO,uCAAP;AACA,aAAS,iBAAS,KAAT,EAAgB;AACxB,gBAAW,oBAAX,CAAgC,KAAhC,EADwB;AAExB,SAAI,OAAO,WAAW,GAAX,CAAe,KAAf,CAAqB,UAArB,CAAgC,QAAhC,CAAP,CAFoB;AAGxB,gBAAW,GAAX,CAAe,KAAf,CAAqB,SAArB,CAA+B,KAAK,QAAL,CAAc,IAAd,EAA/B,EAHwB;AAIxB,gBAAW,eAAX,GAJwB;KAAhB;IAFH,EAQJ,QARI,CAAP,CADyD;GAAnB,CAAvC,CAjB6C;;AA6B7C,MAAI,CAAC,oBAAD,EAAuB;AAC1B,kBAAe,IAAf,CAAoB,EAAE,KAAF,EAAS,EAAC,OAAO,0CAAP,EAAV,EAA8D,CACjF,EAAE,oJAAF,EAAwJ,CACvJ,EAAE,yFAAF,CADuJ,CAAxJ,CADiF,CAA9D,CAApB,EAD0B;GAA3B;;AAQA,SAAO,EAAE,KAAF,EAAS,EAAC,OAAO,yBAAP,EAAV,EAA6C,CACnD,EAAE,IAAF,EAAQ;AACP,UAAO,kCAAP;AACA,aAAU,EAAE,QAAF,CAAW,WAAX,EAAwB,WAAW,uBAAX,CAAlC;AACA,WAAQ,gBAAS,EAAT,EAAa,mBAAb,EAAkC;AACzC,QAAI,mBAAJ,EAAyB;AACxB,YADwB;KAAzB;;AADyC,MAKzC,CAAG,SAAH,GAAe,WAAW,uBAAX,EAAf,CALyC;IAAlC;GAHT,EAUG,cAVH,CADmD,CAA7C,CAAP,CArC6C;EAArB;;mBAoDV,Q;;;;;;;ACvSf;;AAEA;AACA;AACA;AACA;AACA,gDAAsF;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,iCAAgC,UAAU,EAAE;AAC5C,E;;;;;;ACpBA;AACA;;;AAGA;AACA,wCAAuC,iBAAiB,uBAAuB,WAAW,YAAY,iBAAiB,8BAA8B,GAAG,uBAAuB,uBAAuB,iBAAiB,YAAY,aAAa,WAAW,8BAA8B,gBAAgB,gBAAgB,GAAG,8BAA8B,6BAA6B,uBAAuB,iBAAiB,GAAG,kCAAkC,gCAAgC,uBAAuB,cAAc,eAAe,yBAAyB,GAAG,oCAAoC,iBAAiB,mBAAmB,GAAG,oCAAoC,mBAAmB,gBAAgB,uBAAuB,uBAAuB,wBAAwB,cAAc,iCAAiC,6CAA6C,uBAAuB,GAAG,+DAA+D,iCAAiC,GAAG,sDAAsD,iCAAiC,GAAG,0DAA0D,iCAAiC,GAAG,iDAAiD,iCAAiC,GAAG,0CAA0C,eAAe,4BAA4B,GAAG,qEAAqE,4BAA4B,GAAG,4DAA4D,4BAA4B,GAAG,gEAAgE,4BAA4B,GAAG,uDAAuD,4BAA4B,GAAG,oCAAoC,uBAAuB,WAAW,aAAa,cAAc,gBAAgB,6BAA6B,oBAAoB,iBAAiB,GAAG,wCAAwC,gCAAgC,iBAAiB,0BAA0B,GAAG,gCAAgC,uBAAuB,gBAAgB,aAAa,sBAAsB,gCAAgC,oBAAoB,0BAA0B,GAAG,gEAAgE,2BAA2B,GAAG,4DAA4D,eAAe,yBAAyB,GAAG,oEAAoE,2BAA2B,eAAe,qBAAqB,GAAG,yBAAyB,uBAAuB,cAAc,cAAc,YAAY,aAAa,qBAAqB,GAAG,wCAAwC,uBAAuB,mBAAmB,iCAAiC,GAAG,8BAA8B,uBAAuB,oBAAoB,uBAAuB,GAAG,mCAAmC,mBAAmB,mBAAmB,gBAAgB,qBAAqB,GAAG,uCAAuC,mCAAmC,iCAAiC,mBAAmB,GAAG,oCAAoC,uBAAuB,gBAAgB,aAAa,sBAAsB,gCAAgC,oBAAoB,kBAAkB,iBAAiB,4CAA4C,uBAAuB,GAAG,oCAAoC,0BAA0B,iCAAiC,mCAAmC,iBAAiB,mBAAmB,4CAA4C,wBAAwB,mBAAmB,qBAAqB,uBAAuB,gBAAgB,aAAa,qBAAqB,uBAAuB,GAAG,oCAAoC,8BAA8B,GAAG,qEAAqE,mBAAmB,GAAG,qEAAqE,kBAAkB,GAAG,2CAA2C,iCAAiC,uBAAuB,GAAG,2EAA2E,mBAAmB,GAAG,+EAA+E,kBAAkB,GAAG,sCAAsC,8BAA8B,GAAG,4CAA4C,8BAA8B,GAAG,4BAA4B,iBAAiB,mBAAmB,uBAAuB,iBAAiB,2BAA2B,uBAAuB,2GAA2G,oBAAoB,sBAAsB,eAAe,aAAa,gBAAgB,GAAG,qCAAqC,sBAAsB,2CAA2C,qBAAqB,uBAAuB,qBAAqB,sBAAsB,GAAG,6CAA6C,uBAAuB,qBAAqB,gBAAgB,oBAAoB,GAAG,oDAAoD,gBAAgB,mBAAmB,sBAAsB,GAAG,iDAAiD,iDAAiD,iDAAiD,4CAA4C,4CAA4C,uBAAuB,WAAW,cAAc,YAAY,aAAa,iBAAiB,GAAG,wDAAwD,6BAA6B,yBAAyB,qFAAqF,qFAAqF,0BAA0B,GAAG,0CAA0C,oBAAoB,4BAA4B,mBAAmB,uBAAuB,mBAAmB,GAAG,gDAAgD,uCAAuC,GAAG,6BAA6B,UAAU,wCAAwC,wCAAwC,KAAK,GAAG,qBAAqB,UAAU,wCAAwC,wCAAwC,KAAK,GAAG,2BAA2B,QAAQ,+BAA+B,2BAA2B,KAAK,SAAS,gCAAgC,+BAA+B,KAAK,UAAU,gCAAgC,gCAAgC,KAAK,GAAG,mBAAmB,QAAQ,+BAA+B,2BAA2B,KAAK,SAAS,gCAAgC,+BAA+B,KAAK,UAAU,gCAAgC,gCAAgC,KAAK,GAAG,4BAA4B,cAAc,sBAAsB,KAAK,SAAS,sBAAsB,KAAK,SAAS,sBAAsB,KAAK,cAAc,sBAAsB,KAAK,GAAG,oBAAoB,cAAc,sBAAsB,KAAK,SAAS,sBAAsB,KAAK,SAAS,sBAAsB,KAAK,cAAc,sBAAsB,KAAK,GAAG;;AAE1kO;;;;;;;;;;;;;ACPA;;AAEA;;KAAY;;AAEZ;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;KAAY;;AAEZ;;;;AACA;;;;AAEA;;;;;;;;AAEA,KAAI,kBAAkB,CAAlB;AACJ,KAAI,qBAAqB,CAArB;AACJ,KAAI,yBAAyB,CAAzB;;;;;;AAMJ,KAAI,cAAc,EAAd;;AAEJ,aAAY,UAAZ,GAAyB,UAAS,IAAT,EAAe;;;AACvC,OAAK,IAAL,GAAY,EAAE,IAAF,CAAO,KAAK,IAAL,CAAnB,CADuC;AAEvC,OAAK,KAAL,GAAa,EAAE,IAAF,CAAO,KAAK,KAAL,CAApB,CAFuC;AAGvC,OAAK,eAAL,GAAuB,EAAE,IAAF,CAAO,EAAP,CAAvB,CAHuC;AAIvC,OAAK,SAAL,GAAiB,EAAE,IAAF,CAAO,CAAP,CAAjB,CAJuC;AAKvC,OAAK,eAAL,GAAuB,EAAE,IAAF,CAAO,EAAP,CAAvB,CALuC;AAMvC,OAAK,GAAL,GAAW,KAAK,GAAL,CAN4B;AAOvC,OAAK,YAAL,GAAoB,KAAK,YAAL,CAPmB;AAQvC,OAAK,OAAL,GAAe,kBAAQ,QAAR,EAAf,CARuC;AASvC,OAAK,cAAL,GAAsB,4BAAkB,IAAlB,EAAwB,KAAK,eAAL,CAA9C,CATuC;;AAWvC,OAAK,MAAL,GAAc,KAAK,MAAL,IAAe;AAC5B,kBAAe,KAAf;AACA,aAAU,KAAV;AACA,cAAW,KAAX;GAHa;;;AAXyB,MAkBvC,CAAK,eAAL,GAAuB,KAAK,eAAL,IAAwB,EAAxB,CAlBgB;;AAoBvC,OAAK,SAAL,GAAiB,KAAjB,CApBuC;AAqBvC,OAAK,QAAL,GAAgB,EAAE,IAAF,CAAO;;GAAP,CAAhB;;;AArBuC,MA0BvC,CAAK,cAAL,GAAsB,CAAtB;;;AA1BuC,MA6BvC,CAAK,gBAAL,GAAwB,KAAxB;;;AA7BuC,MAgCvC,CAAK,SAAL,GAAiB,KAAK,SAAL,IAAkB,CAAlB;;;AAhCsB,MAmCvC,CAAK,aAAL,GAAqB,CAArB;;;AAnCuC,MAsCvC,CAAK,gBAAL,GAAwB,EAAE,IAAF,CAAO,CAAP,CAAxB,CAtCuC;AAuCvC,OAAK,iBAAL,GAAyB,IAAzB;;;AAvCuC,MA0CvC,CAAK,UAAL,GAAkB,IAAlB,CA1CuC;;AA4CvC,OAAK,qBAAL,GAA6B,YAAM;AAClC,UAAO,MAAK,IAAL,GAAY,WAAZ,GAA0B,OAA1B,CAAkC,KAAlC,EAAyC,aAAzC,CAAP,CADkC;GAAN,CA5CU;;AAgDvC,OAAK,YAAL,GAAoB,YAAM;AACzB,UAAO,MAAK,KAAL,MAAgB,MAAK,IAAL,EAAhB,CADkB;GAAN,CAhDmB;;AAoDvC,OAAK,aAAL,GAAqB,YAAM;AAC1B,SAAK,cAAL,GAAsB,CAAtB,CAD0B;AAE1B,SAAK,gBAAL,GAAwB,KAAxB,CAF0B;;AAI1B,OAAI,eAAe,EAAE,IAAF,CAAO,MAAK,QAAL,EAAP,CAAf,CAJsB;AAK1B,OAAI,YAAJ,EAAkB;AACjB,UAAK,SAAL,GAAiB,aAAa,IAAb,CAAkB,OAAlB,CADA;IAAlB;GALoB;;;;;;;AApDkB,MAmEvC,CAAK,sBAAL,GAA8B,YAAY;AACzC,OAAI,UAAU,CAAV,CADqC;AAEzC,OAAI,SAAS,KAAK,KAAL,CAAW,KAAK,MAAL,KAAgB,YAAhB,CAAX,CAAyC,QAAzC,CAAkD,EAAlD,CAAT,CAFqC;AAGzC,UAAO,YAAW;AACjB,QAAI,KAAK,SAAL,CADa;AAEjB,WAAO,SAAS,QAAQ,QAAR,CAAiB,EAAjB,CAAT,CAFU;IAAX,CAHkC;GAAX,EAA/B,CAnEuC;;AA4EvC,OAAK,GAAL,CAAS,EAAT,CAAY,gBAAZ,EAA8B,UAAC,WAAD,EAAc,WAAd,EAA8B;AAC3D,OAAI,qBAAJ,EAA0B;AACzB,UAAK,aAAL,GADyB;AAEzB,UAAK,iBAAL,GAAyB,IAAzB,CAFyB;IAA1B;GAD6B,CAA9B,CA5EuC;;AAmFvC,OAAK,GAAL,CAAS,EAAT,CAAY,YAAZ,EAA0B,UAAC,OAAD,EAAa;AACtC,OAAI,WAAW,MAAK,SAAL,EAAgB;AAC9B,UAAK,aAAL,GAD8B;IAA/B;GADyB,CAA1B,CAnFuC;;AAyFvC,OAAK,GAAL,CAAS,EAAT,CAAY,YAAZ,EAA0B,UAAC,WAAD,EAAiB;AAC1C,OAAI,YAAY,MAAZ,KAAuB,MAAK,qBAAL,EAAvB,EAAqD;AACxD,WADwD;IAAzD;;AAIA,OAAI,WAAW,MAAK,QAAL,EAAX,CALsC;;AAO1C,OAAI,cAAc,oBAAiB,WAAjB,CAAd,CAPsC;AAQ1C,eAAY,OAAZ,GAAsB,MAAK,cAAL,CAAoB,QAApB,CAA6B,WAA7B,CAAtB;;;;AAR0C,OAYtC,gBAAJ,CAZ0C;AAa1C,OAAI,YAAY,OAAZ,EAAqB;AACxB,uBAAmB,EAAE,IAAF,CAAO,QAAP,EAAiB,UAAS,OAAT,EAAkB;AACrD,YAAO,QAAQ,IAAR,CAAa,OAAb,KAAyB,YAAY,OAAZ,CADqB;KAAlB,CAApC,CADwB;IAAzB;;;AAb0C,OAoBtC,gBAAJ,EAAsB;AACrB,qBAAiB,IAAjB,CAAsB,OAAtB,CAA8B,WAA9B,EADqB;IAAtB,MAEO,IAAI,YAAY,OAAZ,GAAsB,MAAK,aAAL,EAAoB;;AAEpD,UAAK,UAAL,CAAgB,WAAhB,EAFoD;;AAIpD,QAAI,MAAK,eAAL,GAAuB,OAAvB,CAA+B,YAAY,MAAZ,CAAmB,WAAnB,EAA/B,MAAsE,CAAC,CAAD,EAAI;AAC7E,WAAK,eAAL,GAAuB,IAAvB,CAA4B,YAAY,MAAZ,CAAmB,WAAnB,EAA5B,EAD6E;KAA9E;IAJM;;AASP,KAAE,MAAF,GA/B0C;;AAiC1C,OAAI,eAAe,MAAK,OAAL,CAAa,QAAb,EAAf,CAjCsC;AAkC1C,OAAI,iBAAiB,aAAa,WAAb,OAA+B,YAAY,MAAZ,CAAmB,WAAnB,EAA/B,CAlCqB;AAmC1C,OAAI,YAAY,QAAQ,WAAR,MAAyB,MAAK,SAAL;;;;AAnCC,OAuCtC,CAAC,cAAD,IAAmB,CAAC,SAAD,IAAc,YAAY,OAAZ,GAAsB,MAAK,SAAL,EAAgB;AAC1E,UAAK,cAAL,GAD0E;;AAG1E,QAAI,YAAY,OAAZ,CAAoB,WAApB,GAAkC,OAAlC,CAA0C,aAAa,WAAb,EAA1C,IAAwE,CAAC,CAAD,EAAI;AAC/E,WAAK,gBAAL,GAAwB,IAAxB;;;AAD+E,SAI3E,CAAC,QAAQ,WAAR,EAAD,EAAwB;AAC3B,YAAK,MAAL,CAAY,yBAAZ,EAAuC,YAAY,MAAZ,GAAqB,IAArB,GAA4B,YAAY,OAAZ,CAAnE,CAD2B;MAA5B;KAJD;IAHD;;;;AAvC0C,OAsDtC,aAAa,YAAY,OAAZ,GAAsB,MAAK,SAAL,EAAgB;AACtD,UAAK,SAAL,GAAiB,YAAY,OAAZ,CADqC;IAAvD;;AAIA,SAAK,aAAL,GAAqB,EAAE,IAAF,CAAO,QAAP,EAAiB,IAAjB,CAAsB,OAAtB,CA1DqB;GAAjB,CAA1B,CAzFuC;;AAsJvC,OAAK,GAAL,CAAS,EAAT,CAAY,SAAZ,EAAuB,UAAC,MAAD,EAAY;AAClC,OAAI,YAAY,MAAK,qBAAL,GAA6B,WAA7B,EAAZ,CAD8B;AAElC,OAAI,CAAC,OAAO,SAAP,CAAD,EAAoB;AACvB,WADuB;IAAxB;;AAIA,SAAK,SAAL,CAAe,OAAO,SAAP,EAAkB,SAAlB,CAAf,CANkC;GAAZ,CAAvB,CAtJuC;;AA+JvC,OAAK,GAAL,CAAS,EAAT,CAAY,qBAAZ,EAAmC,UAAC,OAAD,EAAa;AAC/C,OAAI,QAAQ,MAAR,KAAmB,MAAK,qBAAL,EAAnB,EAAiD;AACpD,WADoD;IAArD;AAGA,OAAI,QAAQ,MAAR,KAAmB,sBAAnB,EAA2C;AAC9C,UAAK,MAAL,CAAY,aAAZ,GAA4B,IAA5B,CAD8C;AAE9C,UAAK,eAAL,CAAqB,UAArB,GAAkC,QAAQ,WAAR,CAFY;IAA/C;AAIA,OAAI,QAAQ,MAAR,KAAmB,kBAAnB,EAAuC;AAC1C,UAAK,MAAL,CAAY,SAAZ,GAAwB,IAAxB,CAD0C;IAA3C;GARkC,CAAnC,CA/JuC;;AA4KvC,OAAK,GAAL,CAAS,EAAT,CAAY,sBAAZ,EAAoC,UAAC,OAAD,EAAa;AAChD,OAAI,YAAY,KAAZ,CAD4C;;AAGhD,OAAI,QAAQ,MAAR,KAAmB,MAAK,qBAAL,EAAnB,EAAiD;AACpD,WADoD;IAArD;;AAIA,OAAI,QAAQ,KAAR,EAAe;AAClB,UAAK,KAAL,CAAW,QAAQ,KAAR,CAAX,CADkB;AAElB,gBAAY,IAAZ,CAFkB;IAAnB;AAIA,OAAI,QAAQ,MAAR,EAAgB;AACnB,UAAK,eAAL,CAAqB,MAArB,GAA8B,QAAQ,MAAR,CADX;AAEnB,gBAAY,IAAZ,CAFmB;IAApB;;AAKA,OAAI,SAAJ,EAAe;AACd,MAAE,MAAF,GADc;IAAf;GAhBmC,CAApC;;;AA5KuC,MAkMvC,CAAK,GAAL,CAAS,EAAT,CAAY,qBAAZ,EAAmC,UAAC,KAAD,EAAW;AAC7C,OAAI,MAAM,YAAN,KAAuB,MAAK,qBAAL,EAAvB,EAAqD;AACxD,WADwD;IAAzD;;AAIA,OAAI,UAAU,oBAAiB;AAC9B,YAAQ,GAAR;AACA,aAAS,qFAAT;IAFa,CAAV,CALyC;;AAU7C,WAAQ,OAAR,GAAkB,MAAK,cAAL,CAAoB,QAApB,CAA6B,OAA7B,CAAlB,CAV6C;AAW7C,SAAK,UAAL,CAAgB,OAAhB,EAX6C;AAY7C,KAAE,MAAF,GAZ6C;GAAX,CAAnC,CAlMuC;;AAiNvC,OAAK,MAAL,GAAc,UAAC,KAAD,EAAQ,IAAR,EAAiB;AAC9B,OAAI,eAAe,cAAc,MAAd,CAAqB,KAArB,EAA4B,IAA5B,CAAf,CAD0B;AAE9B,OAAI,CAAC,YAAD,EAAe;AAClB,WADkB;IAAnB;;AAIA,gBAAa,OAAb,GAAuB,YAAM;;AAE5B,QAAI,UAAW,aAAa,KAAb,IAAsB,aAAa,MAAb,IAAuB,YAAU,EAAV,CAFhC;AAG5B,YAAQ,IAAR,CAAa,YAAb,EAH4B;;AAK5B,UAAK,YAAL,CAAkB,SAAlB,CAA4B,MAAK,IAAL,EAA5B,EAL4B;AAM5B,WAAO,KAAP,GAN4B;IAAN,CANO;GAAjB,CAjNyB;AAgOvC,OAAK,YAAL,GAAoB,UAAC,KAAD,EAAW;AAC9B,WAAQ,EAAE,KAAF,CAAQ,GAAR,CAAY,KAAZ,CAAR,CAD8B;AAE9B,SAAM,cAAN,GAF8B;;AAI9B,OAAI,YAAJ,CAJ8B;AAK9B,OAAI,UAAU,MAAK,eAAL,EAAV,CAL0B;AAM9B,OAAI,CAAC,OAAD,EAAU;AACb,WADa;IAAd;;;AAN8B,OAW1B,QAAQ,WAAR,GAAsB,OAAtB,CAA8B,MAA9B,MAA0C,CAA1C,EAA6C;AAChD,mBAAe,QAAf,CADgD;AAEhD,cAAU,QAAQ,SAAR,CAAkB,CAAlB,CAAV,CAFgD;IAAjD;;AAKA,SAAK,WAAL,CAAiB,OAAjB,EAA0B,YAA1B,EAhB8B;AAiB9B,SAAK,eAAL,CAAqB,EAArB;;;;AAjB8B,IAqB9B,CAAE,MAAM,aAAN,CAAF,CAAuB,IAAvB,CAA4B,oBAA5B,EAAkD,GAAlD,CAAsD,EAAtD,EArB8B;;AAuB9B,KAAE,MAAF,GAvB8B;GAAX,CAhOmB;;AA0PvC,OAAK,WAAL,GAAmB,UAAC,eAAD,EAAkB,YAAlB,EAAmC;AACrD,OAAI,UAAU,oBAAiB;AAC9B,YAAQ,MAAK,OAAL,CAAa,QAAb,EAAR;AACA,aAAS,eAAT;AACA,aAAS,MAAK,sBAAL,EAAT;AACA,aAAS,IAAK,IAAJ,EAAD,CAAa,OAAb,EAAT;AACA,UAAM,YAAN;IALa,CAAV,CADiD;;AASrD,WAAQ,OAAR,GAAkB,MAAK,cAAL,CAAoB,QAApB,CAA6B,OAA7B,CAAlB,CATqD;AAUrD,SAAK,UAAL,CAAgB,OAAhB,EAVqD;AAWvD,OAAI,gBAAgB,OAAhB,CAAwB,MAAxB,IAAkC,CAAC,CAAD,EAAI;AACzC,YAAQ,KAAR,GAAgB,4CAAhB,CADyC;AAEzC,YAAQ,KAAR,GAAgB,KAAhB,CAFyC;IAA1C;AAIE,UAAO,EAAE,OAAF,CAAU;AAChB,YAAQ,MAAR;AACA,SAAK,MAAK,OAAL,CAAa,MAAb,CAAoB,OAApB,CAAL;AACA,UAAM;AACL,aAAQ,MAAK,qBAAL,EAAR;AACA,cAAS,eAAT;AACA,cAAS,QAAQ,OAAR;AACT,WAAM,YAAN;KAJD;IAHM,EASJ,IATI,CASC,UAAS,YAAT,EAAuB;AAC9B,QAAI,aAAa,MAAb,KAAwB,IAAxB,EAA8B;;;AAGjC,SAAI,UAAU;AACb,uBAAiB,8CAAjB;AACA,qBAAe,kDAAf;MAFG,CAH6B;;AAQjC,aAAQ,KAAR,GAAgB,QAAQ,aAAa,KAAb,CAAR,IAA+B,4CAA/B,CARiB;AASjC,SAAI,QAAQ,aAAa,KAAb,CAAZ,EAAiC;AAChC,cAAQ,KAAR,GAAgB,IAAhB,CADgC;MAAjC,MAEO;AACN,cAAQ,KAAR,GAAgB,KAAhB,CADM;MAFP;KATD;IADO,CATD,CAyBJ,KAzBI,CAyBE,UAAS,GAAT,EAAc;;;AAGtB,YAAQ,KAAR,GAAgB,4CAAhB,CAHsB;AAItB,YAAQ,KAAR,GAAgB,KAAhB,CAJsB;IAAd,CAzBT,CAfqD;GAAnC,CA1PoB;;AA0SvC,OAAK,QAAL,GAAgB,YAAM;AACrB,SAAK,UAAL,GAAkB,IAAlB,CADqB;GAAN,CA1SuB;;AA8SvC,OAAK,iBAAL,GAAyB,YAAM;AAC9B,SAAK,UAAL,GAAkB,QAAQ,SAAR,0BAAiC;AAClD,SAAK,MAAK,GAAL;AACL,eAFkD;AAGlD,kBAAc,MAAK,YAAL;IAHG,CAAlB,CAD8B;GAAN,CA9Sc;;AAsTvC,OAAK,aAAL,GAAqB,UAAC,KAAD,EAAQ,QAAR,EAAkB,IAAlB,EAA2B;AAC/C,SAAK,GAAL,CAAS,OAAT,CAAiB,YAAjB,EAA+B,KAA/B,EAAsC,QAAQ,SAAR,sBAA6B;AAClE,SAAK,MAAK,GAAL;AACL,cAAU,QAAV;AACA,YAAQ,KAAK,MAAL;AACR,eAJkE;AAKlE,kBAAc,MAAK,YAAL;IALuB,CAAtC,EAD+C;GAA3B;;;;;;;;;;;;;;;;;;AAtTkB,MAgVvC,CAAK,KAAL,GAAa,YAAM;AAClB,SAAK,YAAL,CAAkB,SAAlB,CAA4B,MAAK,IAAL,EAA5B,EADkB;GAAN,CAhV0B;;AAoVvC,OAAK,SAAL,GAAiB,YAAM;AACtB,SAAK,GAAL,CAAS,OAAT,CAAiB,mBAAjB,EADsB;GAAN,CApVsB;;AAwVvC,OAAK,UAAL,GAAkB,UAAC,aAAD,EAAmB;AACpC,OAAI,eAAe,GAAf,CADgC;;AAGpC,OAAI,YAAY,QAAQ,SAAR,oBAA2B;AAC1C,aAAS,aAAT;AACA,uBAF0C;IAA3B,CAAZ,CAHgC;;AAQpC,OAAI,UAAU;AACb,UAAM,aAAN;AACA,UAAM,UAAU,IAAV;IAFH,CARgC;;AAapC,OAAI,WAAW,MAAK,QAAL,EAAX,CAbgC;AAcpC,YAAS,IAAT,CAAc,OAAd;;;AAdoC,OAiBhC,SAAS,MAAT,GAAkB,YAAlB,EAAgC;AACnC,UAAK,QAAL,CAAc,SAAS,KAAT,CAAe,SAAS,MAAT,GAAkB,YAAlB,CAA7B,EADmC;IAApC;;AAIA,UAAO,OAAP,CArBoC;GAAnB,CAxVqB;;AAgXvC,OAAK,aAAL,GAAqB,YAAM;AAC1B,SAAK,GAAL,CAAS,OAAT,CAAiB,uBAAjB,EAD0B;GAAN,CAhXkB;;AAoXvC,OAAK,uBAAL,GAA+B,KAA/B,CApXuC;;AAsXvC,OAAK,kBAAL,GAA0B,UAAC,KAAD,EAAW;AACpC,WAAQ,EAAE,KAAF,CAAQ,GAAR,CAAY,KAAZ,CAAR,CADoC;AAEpC,SAAM,eAAN,GAFoC;;AAIpC,SAAK,uBAAL,GAA+B,IAA/B,CAJoC;;AAMpC,QAAK,GAAL,CAAS,IAAT,CAAc,uBAAd,EAAuC,YAAM;AAC5C,UAAK,mBAAL,GAD4C;IAAN,CAAvC,CANoC;GAAX,CAtXa;;AAiYvC,OAAK,mBAAL,GAA2B,YAAM;AAChC,SAAK,uBAAL,GAA+B,KAA/B,CADgC;GAAN,CAjYY;;AAqYvC,OAAK,cAAL,GAAsB,UAAC,KAAD,EAAW;AAChC,WAAQ,EAAE,KAAF,CAAQ,GAAR,CAAY,KAAZ,CAAR,CADgC;AAEhC,SAAM,eAAN,GAFgC;;AAIhC,OAAI,CAAC,MAAK,MAAL,CAAY,aAAZ,EAA2B;AAC/B,WAD+B;IAAhC;AAGA,OAAI,CAAC,MAAK,eAAL,CAAqB,UAArB,EAAiC;AACrC,WADqC;IAAtC;;AAIA,OAAI,UAAU,MAAK,YAAL,CAAkB,UAAlB,CAA6B,MAAK,eAAL,CAAqB,UAArB,CAAvC,CAX4B;AAYhC,SAAK,YAAL,CAAkB,SAAlB,CAA4B,QAAQ,QAAR,CAAiB,IAAjB,EAA5B,EAZgC;GAAX,CArYiB;EAAf;;AAqZzB,aAAY,IAAZ,GAAmB,UAAS,UAAT,EAAqB;AACvC,MAAI,SAAS,YAAY,UAAZ,CAAuB,UAAvB,CAAT,CADmC;;AAGvC,MAAI,eAAe,EAAf,CAHmC;;AAKvC,eAAa,IAAb,CAAkB,mBAAS;AAC1B,QAAK,WAAW,GAAX;GADY,CAAlB,EALuC;;AASvC,MAAG,CAAC,WAAW,UAAX,EAAuB;AAC1B,gBAAa,IAAb,CAAkB,YAAY,QAAZ,CAAqB,UAArB,CAAlB,EAD0B;GAA3B,MAEO;AACN,gBAAa,IAAb,CAAkB,WAAW,UAAX,CAAsB,IAAtB,EAAlB,EADM;GAFP;;AAMA,SAAO,EAAE,KAAF,EAAS,EAAC,OAAO,gBAAP,EAAV,EAAoC,CAC1C,MAD0C,EAE1C,YAF0C,CAApC,CAAP,CAfuC;EAArB;;AAqBnB,aAAY,QAAZ,GAAuB,UAAS,UAAT,EAAqB;;AAE3C,MAAI,eAAe,QAAQ,UAAR,KAAuB,QAAvB,GAAkC,OAAlC,CAFwB;AAG3C,MAAI,eAAe,EAAf,CAHuC;AAI3C,MAAI,eAAe,IAAf,CAJuC;AAK3C,MAAI,UAAU,KAAK,EAAL,GAAU,IAAV,CAL6B;;AAO3C,IAAE,IAAF,CAAO,WAAW,QAAX,EAAP,EAA8B,UAAS,OAAT,EAAkB,GAAlB,EAAuB,IAAvB,EAA6B;AAC1D,OAAI,iBAAiB,QAAjB,EAA2B;;;AAG9B,QAAI,CAAC,YAAD,IAAiB,QAAQ,IAAR,CAAa,OAAb,GAAuB,aAAa,IAAb,CAAkB,OAAlB,GAA4B,OAAnD,EAA4D;AAChF,kBAAa,IAAb,CAAkB,EAAE,KAAF,EAAS,EAAC,OAAO,wCAAP,EAAV,EAA4D,CAC7E,EAAE,KAAF,CAAQ,QAAQ,IAAR,CAAa,OAAb,CAAqB,aAArB,CADqE,CAA5D,CAAlB,EADgF;KAAjF;IAHD;;AAUA,gBAAa,IAAb,CAAkB,QAAQ,IAAR,CAAa;AAC9B,WAAO,YAAP;AACA,YAAQ,IAAR;AACA,iBAAa,GAAb;IAHiB,CAAlB,EAX0D;;AAiB1D,kBAAe,OAAf,CAjB0D;GAA7B,CAA9B,CAP2C;;AA2B3C,MAAI,aAAa,MAAb,KAAwB,CAAxB,EAA2B;AAC9B,gBAAa,IAAb,CAAkB,EAAE,KAAF,EAAS,EAAC,OAAO,6BAAP,EAAV,EAAiD,iCAAjD,CAAlB,EAD8B;GAA/B;;AAIA,SAAO,CACN,EAAE,IAAF,EAAQ;AACP,UAAO,wBAAP;AACA,aAAU,oBAAW;AACpB,QAAI,OAAO,KAAK,qBAAL,EAAP;;;AADgB,QAIhB,KAAK,SAAL,GAAiB,KAAK,MAAL,GAAc,KAAK,YAAL,GAAoB,EAApB,EAAwB;AAC1D,gBAAW,iBAAX,GAA+B,IAA/B,CAD0D;KAA3D,MAEO;AACN,gBAAW,iBAAX,GAA+B,KAA/B,CADM;KAFP;;AAMA,eAAW,gBAAX,CAA4B,KAAK,SAAL,CAA5B;;;AAVoB,KAapB,CAAE,MAAF,CAAS,QAAT,CAAkB,MAAlB,EAboB;IAAX;AAeV,WAAQ,gBAAS,EAAT,EAAa,mBAAb,EAAkC;AACzC,QAAI,WAAW,iBAAX,EAA8B;AACjC,QAAG,SAAH,GAAe,GAAG,YAAH,CADkB;KAAlC;;;AADyC,QAMrC,CAAC,mBAAD,IAAwB,CAAC,WAAW,iBAAX,EAA8B;AAC1D,QAAG,SAAH,GAAe,WAAW,gBAAX,EAAf,CAD0D;KAA3D;IANO;GAjBT,EA2BG,YA3BH,CADM,EA6BN,EAAE,MAAF,EAAU,EAAC,OAAO,wBAAP,EAAiC,UAAU,WAAW,YAAX,CAAwB,IAAxB,CAA6B,UAA7B,CAAV,EAA5C,EAAiG;;;;;;;AAOhG,IAAE,OAAF,EAAW;AACV,SAAM,MAAN;AACA,gBAAa,gBAAb;AACA,cAAW,MAAX;AACA,YAAS,EAAE,QAAF,CAAW,OAAX,EAAoB,WAAW,eAAX,CAA7B;GAJD,CAPgG,EAahG,EAAE,uBAAF,EAA2B,CAC1B,EAAE,kJAAF,EAAsJ,CACrJ,EAAE,iDAAF,CADqJ,CAAtJ,CAD0B,CAA3B;;;;;;;;;AAbgG,GAAjG,CA7BM,CAAP,CA/B2C;EAArB;;AA0FvB,aAAY,UAAZ,GAAyB,UAAS,UAAT,EAAqB;AAC7C,MAAI,OAAO,EAAP,CADyC;AAE7C,MAAI,QAAQ,EAAR,CAFyC;AAG7C,MAAI,cAAJ,CAH6C;;AAK7C,MAAI,WAAW,MAAX,CAAkB,SAAlB,EAA6B;AAChC,QAAK,IAAL,CACC,EAAE,IAAF,EAAQ;AACP,WAAO,WAAW,UAAX,GAAwB,2EAAxB,GAAsG,kCAAtG;AACP,aAAS,WAAW,iBAAX;IAFV,EAGG,CACF,EAAE,kJAAF,EAAsJ,CACrJ,EAAE,6SAAF,CADqJ,CAAtJ,CADE,CAHH,CADD,EADgC;GAAjC;;AAaA,MAAG,KAAK,MAAL,GAAc,CAAd,EAAiB;AACnB,QAAK,OAAL,CACC,EAAE,IAAF,EAAQ;AACP,WAAO,CAAC,WAAW,UAAX,GAAwB,2EAAzB,GAAuG,kCAAvG;AACP,aAAS,WAAW,QAAX;IAFV,EAGG,CACF,EAAE,kJAAF,EAAsJ,CACrJ,EAAE,+HAAF,CADqJ,CAAtJ,CADE,CAHH,CADD,EADmB;GAApB;;AAaA,MAAG,WAAW,MAAX,CAAkB,aAAlB,EAAiC;AACnC,QAAK,IAAL,CACC,EAAE,IAAF,EAAQ;AACP,WAAO,kCAAP;AACA,aAAS,WAAW,cAAX;AACT,WAAO,sBAAP;IAHD,EAIG,CACF,EAAE,kJAAF,EAAsJ,CACrJ,EAAE,sIAAF,CADqJ,CAAtJ,CADE,CAJH,CADD,EADmC;GAApC;;AAcA,UAAQ,WAAW,YAAX,EAAR,CA7C6C;AA8C7C,MAAI,WAAW,eAAX,CAA2B,MAA3B,EAAmC;AACtC,oBAAiB,WAAW,YAAX,CAAwB,OAAxB,CAAgC,WAAW,eAAX,CAA2B,MAA3B,CAAkC,IAAlC,CAAjD,CADsC;AAEtC,OAAI,cAAJ,EAAoB;AACnB,YAAQ,eAAe,QAAf,CAAwB,YAAxB,KAAyC,KAAzC,GAAiD,KAAjD,CADW;IAApB;GAFD;;AAOA,SAAO,EAAE,KAAF,EAAS,EAAC,OAAO,wBAAP,EAAV,EAA4C,CAClD,EAAE,KAAF,EAAS,EAAC,OAAO,iCAAP,EAA0C,OAAO,gBAAP,EAAyB,SAAS,WAAW,aAAX,EAAtF,EAAiH,CAChH,EAAE,kJAAF,EAAsJ,CACrJ,EAAE,yDAAF,CADqJ,CAAtJ,CADgH,CAAjH,CADkD,EAMlD,EAAE,KAAF,EAAS,EAAC,OAAO,6BAAP,EAAsC,SAAS,QAAQ,UAAR,KAAuB,WAAW,SAAX,GAAuB,IAA9C,EAAzD,EAA8G,CAC7G,EAAE,IAAF,EAAQ,KAAR,CAD6G,CAA9G,CANkD,EASlD,EAAE,IAAF,EAAQ,EAAC,OAAO,6BAAP,EAAT,EAAgD,IAAhD,CATkD,CAA5C,CAAP,CArD6C;EAArB;;mBAkEV,Y;;;;;;;AChmBf;;AAEA;AACA;AACA;AACA;AACA,gDAAsF;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,iCAAgC,UAAU,EAAE;AAC5C,E;;;;;;ACpBA;AACA;;;AAGA;AACA,4CAA2C,uBAAuB,WAAW,YAAY,iBAAiB,gBAAgB,GAAG,2BAA2B,uBAAuB,WAAW,aAAa,YAAY,iBAAiB,2BAA2B,qBAAqB,gBAAgB,GAAG,oCAAoC,uBAAuB,eAAe,aAAa,sBAAsB,oBAAoB,wCAAwC,gCAAgC,GAAG,wCAAwC,2BAA2B,0BAA0B,2BAA2B,GAAG,gCAAgC,uBAAuB,eAAe,aAAa,qBAAqB,wCAAwC,gCAAgC,oBAAoB,GAAG,mCAAmC,mCAAmC,mBAAmB,mBAAmB,qBAAqB,GAAG,gCAAgC,uBAAuB,aAAa,sBAAsB,aAAa,GAAG,qCAAqC,0BAA0B,oBAAoB,uBAAuB,GAAG,yCAAyC,2BAA2B,0BAA0B,2BAA2B,GAAG,iDAAiD,2BAA2B,GAAG,gCAAgC,uBAAuB,qBAAqB,4BAA4B,GAAG,mCAAmC,uBAAuB,uBAAuB,cAAc,cAAc,YAAY,aAAa,GAAG,2CAA2C,wBAAwB,uBAAuB,GAAG,iDAAiD,uBAAuB,WAAW,YAAY,4BAA4B,mCAAmC,yCAAyC,iCAAiC,GAAG,kDAAkD,cAAc,kCAAkC,mBAAmB,uBAAuB,aAAa,gBAAgB,GAAG,sDAAsD,2BAA2B,mBAAmB,GAAG,iDAAiD,cAAc,8CAA8C,2BAA2B,mBAAmB,mBAAmB,gBAAgB,uBAAuB,gDAAgD,wCAAwC,GAAG,uDAAuD,eAAe,0BAA0B,GAAG,+DAA+D,mBAAmB,GAAG,oEAAoE,kBAAkB,GAAG,4EAA4E,4BAA4B,GAAG,mEAAmE,4BAA4B,GAAG,uEAAuE,4BAA4B,GAAG,8DAA8D,4BAA4B,GAAG,2BAA2B,uBAAuB,YAAY,aAAa,iBAAiB,cAAc,qBAAqB,GAAG,2CAA2C,uBAAuB,qBAAqB,sBAAsB,uBAAuB,gBAAgB,4BAA4B,GAAG,2BAA2B,uCAAuC,2CAA2C,uBAAuB,YAAY,aAAa,cAAc,iBAAiB,GAAG,kCAAkC,cAAc,kCAAkC,mBAAmB,uBAAuB,gBAAgB,aAAa,cAAc,sBAAsB,eAAe,qBAAqB,iBAAiB,GAAG,sCAAsC,2BAA2B,mBAAmB,GAAG,iCAAiC,uBAAuB,aAAa,sBAAsB,eAAe,iCAAiC,cAAc,uCAAuC,2BAA2B,iBAAiB,mBAAmB,mBAAmB,uBAAuB,GAAG,uCAAuC,eAAe,GAAG,oDAAoD,kBAAkB,GAAG,4DAA4D,4BAA4B,GAAG,mDAAmD,4BAA4B,GAAG,uDAAuD,4BAA4B,GAAG,8CAA8C,4BAA4B,GAAG;;AAEzrJ;;;;;;;;;;;;;;;;ACHA,KAAI,SAAS,EAAT;;AAEJ,QAAO,UAAP,GAAoB,YAAW;AAC9B,SAAO,EAAE,WAAF,EAAe,IAAf,CAAoB,OAApB,MAAiC,gBAAjC,CADuB;EAAX;;AAIpB,QAAO,QAAP,GAAkB,YAAY;AAC7B,MAAI,WAAW,EAAE,WAAF,EAAe,IAAf,EAAX,CADyB;AAE7B,SAAO,YAAW;AACjB,UAAO,QAAP,CADiB;GAAX,CAFsB;EAAX,EAAnB;;AAOA,QAAO,gBAAP,GAA0B,YAAW;AACpC,SAAO,EAAE,qBAAF,EAAyB,IAAzB,EAAP,CADoC;EAAX;;AAI1B,QAAO,UAAP,GAAoB,YAAW;AAC9B,MAAI,aAAa,EAAE,IAAF,CAAO,EAAP,CAAb,CAD0B;;AAG9B,IAAE,OAAF,CAAU,uBAAV,EAAmC,UAAC,QAAD,EAAc;AAChD,OAAI,iBAAiB,EAAjB,CAD4C;AAEhD,OAAI,CAAC,QAAD,IAAa,CAAC,SAAS,IAAT,EAAe;AAChC,WADgC;IAAjC;;AAIA,KAAE,IAAF,CAAO,SAAS,IAAT,CAAc,QAAd,EAAwB,UAAC,GAAD,EAAM,IAAN,EAAe;AAC7C,mBAAe,IAAf,CAAoB;AACnB,WAAM,QAAQ,KAAK,IAAL,CAAU,YAAV;AACd,iBAAY,KAAK,IAAL,CAAU,YAAV;KAFb,EAD6C;IAAf,CAA/B,CANgD;;AAahD,oBAAiB,EAAE,MAAF,CAAS,cAAT,EAAyB,UAAC,GAAD,EAAS;AAClD,WAAO,IAAI,IAAJ,CAAS,WAAT,EAAP,CADkD;IAAT,CAA1C,CAbgD;;AAiBhD,cAAW,cAAX,EAjBgD;AAkBhD,KAAE,MAAF,GAlBgD;GAAd,CAAnC,CAoBG,IApBH,CAoBQ,YAAW,EAAX,CApBR,CAH8B;;AA0B9B,SAAO,UAAP,CA1B8B;EAAX;;AA6BpB,QAAO,iBAAP,GAA2B,UAAS,GAAT,EAAc,GAAd,EAAmB;;AAE7C,MAAI,eAAe,EAAE,kCAAF,EAAsC,OAAtC,CAA8C,kBAA9C,CAAf,CAFyC;AAG7C,MAAI,OAAO,EAAE,kCAAF,CAAP,CAHyC;AAI7C,MAAI,QAAQ,EAAE,uHAAF,CAAR,CAJyC;;AAM7C,OAAK,YAAL,CAAkB,YAAlB,EAN6C;AAO7C,QAAM,YAAN,CAAmB,IAAnB,EAP6C;;AAS7C,QAAM,EAAN,CAAS,OAAT,EAAkB,UAAC,KAAD,EAAW;AAC5B,SAAM,cAAN,GAD4B;AAE5B,OAAI,MAAJ;;AAF4B,IAI5B,CAAE,MAAF,GAJ4B;GAAX,CAAlB,CAT6C;;AAgB7C,MAAI,cAAc,CAAd,CAhByC;AAiB7C,WAAS,aAAT,CAAuB,KAAvB,EAA8B;AAC7B,OAAI,QAAQ,WAAR,EAAqB;AACxB,kBAAc,KAAd,CADwB;AAExB,oBAFwB;IAAzB;GADD;AAMA,WAAS,WAAT,GAAuB;AACtB,iBAAc,CAAd,CADsB;AAEtB,mBAFsB;GAAvB;AAIA,WAAS,aAAT,GAAyB;AACxB,OAAI,gBAAgB,CAAhB,EAAmB;AACtB,UAAM,GAAN,CAAU;AACT,oBAAe,QAAf;AACA,cAAS,EAAT;KAFD,EADsB;IAAvB,MAKO,IAAI,gBAAgB,CAAhB,EAAmB;AAC7B,UAAM,GAAN,CAAU;AACT,oBAAe,MAAf;AACA,cAAS,EAAT;KAFD,EAD6B;IAAvB,MAKA,IAAI,gBAAgB,CAAhB,EAAmB;AAC7B,UAAM,GAAN,CAAU;AACT,oBAAe,MAAf;AACA,cAAS,WAAT;KAFD,EAD6B;IAAvB;GAXR;;AAmBA,MAAI,EAAJ,CAAO,YAAP,EAAqB,UAAC,OAAD,EAAa;AACjC,OAAI,OAAO,QAAP,CAAgB,QAAhB,IAA4B,OAAO,QAAP,CAAgB,QAAhB,EAA5B,IAA0D,IAAI,KAAJ,CAAU,SAAV,CAA1D,EAAgF;AACnF,WADmF;IAApF;;AAIA,iBAAc,CAAd,EALiC;AAMjC,OAAI,QAAQ,OAAR,CAAgB,WAAhB,GAA8B,OAA9B,CAAsC,OAAO,QAAP,GAAkB,WAAlB,EAAtC,IAAyE,CAAC,CAAD,EAAI;AAChF,kBAAc,CAAd,EADgF;IAAjF;GANoB,CAArB,CA9C6C;;AAyD7C,MAAI,EAAJ,CAAO,YAAP,EAAqB,UAAC,OAAD,EAAa;AACjC,OAAI,OAAJ,EAAa;AACZ,kBADY;IAAb;GADoB,CAArB,CAzD6C;;AA+D7C,MAAI,EAAJ,CAAO,gBAAP,EAAyB,UAAC,OAAD,EAAa;;AAErC,iBAFqC;GAAb,CAAzB,CA/D6C;EAAnB;;AAqE3B,QAAO,aAAP,GAAuB,UAAS,GAAT,EAAc;AACpC,MAAI,WAAW,EAAE,sCAAF,CAAX,CADgC;AAEpC,WAAS,EAAT,CAAY,OAAZ,EAAqB,UAAS,KAAT,EAAgB;AACpC,OAAI,MAAM,EAAE,IAAF,EAAQ,IAAR,CAAa,MAAb,CAAN,CADgC;AAEpC,OAAI,OAAO,CAAC,IAAI,KAAJ,CAAU,IAAV,CAAD,EAAkB;AAC5B,WAD4B;IAA7B;;AAIA,OAAI,UAAU,IAAI,KAAJ,CAAU,GAAV,EAAe,CAAf,EAAkB,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAV,CANgC;AAOpC,OAAI,OAAJ,CAAY,uBAAZ,EAAqC,KAArC,EAA4C,OAA5C,EAPoC;GAAhB,CAArB,CAFoC;EAAd;;mBAaR,O;;;;;;;;;;;;;;;;;;AC7Hf,UAAS,OAAT,CAAiB,KAAjB,EAAwB;AACvB,OAAK,KAAL,GAAa,KAAb,CADuB;AAEvB,OAAK,GAAL,GAAW,MAAM,KAAN,KAAgB,EAAhB,CAFY;AAGvB,OAAK,QAAL,GAAgB,EAAE,IAAF,CAAO,MAAM,UAAN,KAAqB,EAArB,CAAvB,CAHuB;AAIvB,OAAK,OAAL,GAAe,+BAAf,CAJuB;AAKvB,OAAK,UAAL,GAAkB,EAAE,IAAF,CAAO,EAAP,CAAlB,CALuB;EAAxB;;;;;;AAaA,SAAQ,QAAR,GAAmB,YAAY;AAC9B,MAAI,WAAW,IAAX,CAD0B;;AAG9B,SAAO,UAAS,KAAT,EAAgB;AACtB,cAAW,YAAY,IAAI,OAAJ,CAAY,KAAZ,CAAZ,CADW;AAEtB,UAAO,QAAP,CAFsB;GAAhB,CAHuB;EAAX,EAApB;;;AAWA,SAAQ,SAAR,CAAkB,MAAlB,GAA2B,UAAS,GAAT,EAAc;AACxC,OAAK,GAAL,GAAW,GAAX,CADwC;AAExC,OAAK,KAAL,CAAW,GAAX,CAAe,KAAf,EAAsB,GAAtB,EAFwC;EAAd;;AAK3B,SAAQ,SAAR,CAAkB,WAAlB,GAAgC,UAAS,QAAT,EAAmB;AAClD,OAAK,QAAL,CAAc,QAAd,EADkD;AAElD,OAAK,KAAL,CAAW,GAAX,CAAe,UAAf,EAA2B,QAA3B,EAFkD;EAAnB;;;;;;;;AAYhC,SAAQ,SAAR,CAAkB,MAAlB,GAA2B,UAAS,IAAT,EAAe,KAAf,EAAsB;AAChD,MAAI,OAAO,SAAS,EAAT,CADqC;AAEhD,MAAI,qBAAqB,EAArB,CAF4C;;AAIhD,OAAK,GAAL,GAAW,KAAK,GAAL,IAAY,EAAZ,CAJqC;;AAMhD,OAAK,IAAI,IAAJ,IAAY,IAAjB,EAAuB;AACtB,OAAI,CAAC,KAAK,cAAL,CAAoB,IAApB,CAAD,EAA4B;AAC/B,aAD+B;IAAhC;;AAIA,sBAAmB,IAAnB,CAAwB,OAAO,GAAP,GAAa,mBAAmB,KAAK,IAAL,CAAnB,CAAb,CAAxB,CALsB;GAAvB;;AAQA,SAAO,KAAK,OAAL,GAAe,IAAf,GAAsB,GAAtB,GAA4B,mBAAmB,IAAnB,CAAwB,GAAxB,CAA5B,CAdyC;EAAtB;;AAiB3B,SAAQ,SAAR,CAAkB,IAAlB,GAAyB,YAAW;;;AACnC,MAAI,WAAW,EAAE,QAAF,EAAX,CAD+B;;AAGnC,IAAE,OAAF,CAAU,EAAC,QAAQ,KAAR,EAAe,KAAK,KAAK,MAAL,CAAY,OAAZ,CAAL,EAA1B,EACC,IADD,CACM,UAAC,IAAD,EAAU;AACf,OAAI,iBAAiB,KAAjB,CADW;;AAGf,OAAI,QAAQ,KAAK,GAAL,EAAU;AACrB,UAAK,MAAL,CAAY,KAAK,GAAL,CAAZ,CADqB;IAAtB;;AAIA,OAAI,CAAC,KAAK,QAAL,EAAe;AACnB,UAAK,WAAL,CAAiB,EAAjB,EADmB;AAEnB,aAAS,OAAT,CAAiB,EAAjB,EAFmB;IAApB,MAIO;;;AAGN,qBAAiB,CAAC,MAAK,QAAL,EAAD;;;AAHX,SAMN,CAAK,WAAL,CAAiB,KAAK,QAAL,CAAjB,CANM;;AAQN,aAAS,OAAT,CAAiB;AAChB,qBAAgB,cAAhB;AACA,eAAU,KAAK,QAAL;AACV,mBAAc,KAAK,YAAL,IAAqB,EAArB;AACd,eAAU,KAAK,QAAL;KAJX,EARM;IAJP;GAPK,CADN,CAHmC;;AAgCnC,SAAO,SAAS,OAAT,CAhC4B;EAAX;;;;;AAuCzB,SAAQ,SAAR,CAAkB,aAAlB,GAAkC,UAAS,aAAT,EAAwB;AACzD,MAAI,eAAe,GAAG,MAAH,CAAU,aAAV,CAAf,CADqD;AAEzD,MAAI,MAAM,KAAK,MAAL,CAAY,kBAAZ,EAAgC;AACzC,WAAQ,aAAa,IAAb,CAAkB,GAAlB,CAAR;GADS,CAAN,CAFqD;;AAMzD,SAAO,EAAE,OAAF,CAAU,EAAC,QAAQ,KAAR,EAAe,KAAK,GAAL,EAA1B,EACN,IADM,CACD,UAAC,IAAD,EAAU;AACf,UAAO,IAAP,CADe;GAAV,CADN,CANyD;EAAxB;;;;;AAgBlC,SAAQ,SAAR,CAAkB,cAAlB,GAAmC,UAAS,YAAT,EAAuB,UAAvB,EAAmC;AACrE,MAAI,QAAQ,GAAG,MAAH,CAAU,UAAV,CAAR,CADiE;AAErE,MAAI,aAAa;AAChB,UAAO,MAAM,IAAN,CAAW,GAAX,CAAP;AACA,YAAS,YAAT;GAFG,CAFiE;;AAOrE,MAAI,MAAM,KAAK,MAAL,CAAY,eAAZ,EAA6B,UAA7B,CAAN,CAPiE;;AASrE,SAAO,EAAE,OAAF,CAAU,EAAC,QAAQ,KAAR,EAAe,KAAK,GAAL,EAA1B,EACN,IADM,CACD,UAAC,IAAD,EAAU;AACf,UAAO,IAAP,CADe;GAAV,CADN,CATqE;EAAnC;;;;;AAmBnC,SAAQ,SAAR,CAAkB,eAAlB,GAAoC,UAAS,YAAT,EAAuB,aAAvB,EAAsC,KAAtC,EAA6C;AAChF,MAAI,eAAe,GAAG,MAAH,CAAU,aAAV,CAAf,CAD4E;AAEhF,MAAI,OAAO,SAAS,EAAT,CAFqE;AAGhF,MAAI,aAAa;AAChB,WAAQ,aAAa,IAAb,CAAkB,GAAlB,CAAR;AACA,YAAS,YAAT;GAFG,CAH4E;;AAQhF,MAAI,KAAK,KAAL,EAAY;AACf,cAAW,KAAX,GAAmB,KAAK,KAAL,CADJ;GAAhB;;AAIA,MAAI,MAAM,KAAK,MAAL,CAAY,kBAAZ,EAAgC,UAAhC,CAAN,CAZ4E;;AAchF,SAAO,EAAE,OAAF,CAAU,EAAC,QAAQ,KAAR,EAAe,KAAK,GAAL,EAA1B,EACN,IADM,CACD,UAAC,IAAD,EAAU;AACf,UAAO,IAAP,CADe;GAAV,CADN,CAdgF;EAA7C;;AAoBpC,SAAQ,SAAR,CAAkB,aAAlB,GAAkC,UAAS,YAAT,EAAuB,OAAvB,EAAgC;AACjE,UAAQ,OAAR,GAAkB,YAAlB,CADiE;AAEjE,MAAI,MAAM,KAAK,MAAL,CAAY,kBAAZ,EAAgC,OAAhC,CAAN,CAF6D;;AAIjE,SAAO,EAAE,OAAF,CAAU,EAAC,QAAQ,KAAR,EAAe,KAAK,GAAL,EAA1B,EACN,IADM,CACD,UAAC,IAAD,EAAU;AACf,UAAO,IAAP,CADe;GAAV,CADN,CAJiE;EAAhC;;AAUlC,SAAQ,SAAR,CAAkB,cAAlB,GAAmC,UAAS,mBAAT,EAA8B;AAChE,MAAI,aAAa,KAAK,UAAL,CAD+C;AAEhE,MAAI,MAAM,KAAK,MAAL,CAAY,aAAZ,EAA2B,sBAAsB,EAAC,SAAQ,CAAR,EAAvB,GAAoC,SAApC,CAAjC,CAF4D;;AAIhE,SAAO,EAAE,OAAF,CAAU,GAAV,EAAe,UAAC,QAAD,EAAc;AACnC,OAAI,iBAAiB,EAAjB,CAD+B;AAEnC,OAAI,CAAC,QAAD,EAAW;AACd,WADc;IAAf;;AAIA,KAAE,IAAF,CAAO,QAAP,EAAiB,UAAC,IAAD,EAAU;AAC1B,mBAAe,IAAf,CAAoB;AACnB,WAAM,QAAQ,KAAK,SAAL;AACd,iBAAY,KAAK,SAAL;KAFb,EAD0B;IAAV,CAAjB,CANmC;;AAanC,oBAAiB,EAAE,MAAF,CAAS,cAAT,EAAyB,UAAC,GAAD,EAAS;AAClD,WAAO,IAAI,IAAJ,CAAS,WAAT,EAAP,CADkD;IAAT,CAA1C,CAbmC;;AAiBnC,cAAW,cAAX;;;AAjBmC,IAoBnC,CAAE,MAAF,GApBmC;GAAd,CAAf,CAsBJ,IAtBI,CAsBC,YAAW,EAAX,CAtBR,CAJgE;EAA9B;;;;;;;AAoCnC,SAAQ,SAAR,CAAkB,IAAlB,GAAyB,YAAW;;;AACnC,MAAI,WAAW,EAAE,QAAF,EAAX,CAD+B;;AAGnC,IAAE,gBAAF,GAHmC;;AAKnC,WAAS,WAAT,CAAqB,MAArB,EAA6B;AAC5B,KAAE,cAAF,GAD4B;AAE5B,YAAS,OAAT,CAAiB,MAAjB,EAF4B;GAA7B;AAIA,WAAS,UAAT,CAAoB,GAApB,EAAyB;AACxB,KAAE,cAAF,GADwB;AAExB,YAAS,MAAT,CAAgB,GAAhB,EAFwB;GAAzB;;AAKA,IAAE,OAAF,CAAU,EAAC,QAAQ,KAAR,EAAe,KAAK,KAAK,MAAL,CAAY,OAAZ,CAAL,EAA1B,EACC,IADD,CACM,UAAC,IAAD,EAAU;;;;AAIf,OAAI,QAAQ,KAAK,GAAL,EAAU;AACrB,WAAK,MAAL,CAAY,KAAK,GAAL,CAAZ,CADqB;IAAtB;;AAIA,OAAI,CAAC,IAAD,IAAS,KAAK,MAAL,KAAgB,KAAhB,EAAuB;AACnC,eAAW,KAAK,KAAL,IAAc,eAAd,CAAX,CADmC;AAEnC,WAFmC;IAApC;;;AARe,OAcX,KAAK,QAAL,EAAe;AAClB,WAAO,QAAP,GAAkB,KAAK,QAAL,GAAgB,cAAhB,GAAiC,mBAAmB,OAAO,QAAP,CAAgB,IAAhB,CAApD,CADA;AAElB,WAFkB;IAAnB;;AAKA,OAAI,KAAK,QAAL,EAAe;AAClB,WAAK,WAAL,CAAiB,KAAK,QAAL,CAAjB,CADkB;AAElB,gBAAY,EAAC,UAAU,OAAK,QAAL,EAAV,EAAb,EAFkB;IAAnB;GAnBK,CADN,CAdmC;;AAwCnC,SAAO,SAAS,OAAT,CAxC4B;EAAX;;;;;AA+CzB,SAAQ,SAAR,CAAkB,MAAlB,GAA2B,YAAW;;;AACrC,SAAO,EAAE,OAAF,CAAU,EAAC,QAAQ,KAAR,EAAe,KAAK,KAAK,MAAL,CAAY,SAAZ,CAAL,EAA1B,EACN,IADM,CACD,UAAC,IAAD,EAAU;AACf,UAAK,WAAL,CAAiB,EAAjB,EADe;GAAV,CADN,CADqC;EAAX;;;;;;;AAa3B,UAAS,kBAAT,CAA4B,OAA5B,EAAqC;AACpC,MAAI,SAAS;AACZ,SAAM,IAAN;AACA,SAAM,EAAN;GAFG,CADgC;;AAMpC,MAAI,YAAY,QAAQ,OAAR,CAAgB,GAAhB,CAAZ,CANgC;AAOpC,MAAI,cAAc,CAAC,CAAD,EAAI;AACrB,UAAO,MAAP,CADqB;GAAtB;;AAIA,SAAO,IAAP,GAAc,QAAQ,SAAR,CAAkB,CAAlB,EAAqB,SAArB,CAAd,CAXoC;AAYpC,MAAI;AACH,UAAO,IAAP,GAAc,KAAK,KAAL,CAAW,QAAQ,SAAR,CAAkB,YAAY,CAAZ,CAA7B,CAAd,CADG;GAAJ,CAEE,OAAO,GAAP,EAAY,EAAZ;;AAGF,SAAO,MAAP,CAjBoC;EAArC;;mBAoBe,Q;;;;;;;;;;;;;;;;;KC7RM;AACpB,WADoB,YACpB,CAAY,OAAZ,EAAqB;yBADD,cACC;;AACpB,QAAK,OAAL,CAAa,OAAb,EADoB;GAArB;;eADoB;;2BAKZ,KAAK;AACZ,SAAK,EAAL,GAAU,IAAI,EAAJ,CADE;AAEZ,SAAK,OAAL,GAAe,IAAI,OAAJ,CAFH;AAGZ,SAAK,MAAL,GAAc,IAAI,MAAJ,CAHF;AAIZ,SAAK,OAAL,GAAe,IAAI,OAAJ,CAJH;AAKZ,SAAK,OAAL,GAAe,IAAI,OAAJ,CALH;AAMZ,SAAK,OAAL,GAAe,IAAI,OAAJ,CANH;AAOZ,SAAK,MAAL,GAAc,IAAI,MAAJ,CAPF;AAQZ,SAAK,IAAL,GAAY,IAAI,IAAJ,CARA;AASZ,SAAK,YAAL,GAAoB,IAAI,YAAJ,CATR;;;;SALO;;;;;;;;;;;;;;;ACArB;;AAEA;;KAAY;;;;AAEZ,KAAI,UAAU,EAAV;;AAEJ,SAAQ,UAAR,GAAqB,UAAS,IAAT,EAAe;AACnC,OAAK,QAAL,GAAgB,YAAM;AACrB,OAAI,YAAY,YAAZ,CADiB;AAErB,OAAI,KAAK,OAAL,CAAa,MAAb,KAAwB,KAAK,YAAL,CAAkB,OAAlB,CAA0B,QAA1B,EAAxB,EAA8D;AACjE,iBAAa,kBAAb,CADiE;IAAlE;AAGA,OAAI,CAAC,KAAK,OAAL,CAAa,EAAb,EAAiB;AACrB,iBAAa,sBAAb,CADqB;IAAtB;AAGA,OAAI,KAAK,OAAL,CAAa,YAAb,EAA2B;AAC9B,iBAAa,wBAAb,CAD8B;IAA/B;AAGA,OAAI,KAAK,OAAL,CAAa,IAAb,KAAsB,QAAtB,EAAgC;AACnC,iBAAa,qBAAb,CADmC;IAApC;AAGA,UAAO,SAAP,CAdqB;GAAN,CADmB;;AAkBnC,OAAK,aAAL,GAAqB,UAAC,KAAD,EAAW;AAC/B,WAAQ,EAAE,KAAF,CAAQ,GAAR,CAAY,KAAZ,CAAR,CAD+B;AAE/B,SAAM,eAAN,GAF+B;AAG/B,QAAK,YAAL,CAAkB,aAAlB,CAAgC,KAAhC,EAAuC,KAAK,OAAL,CAAa,MAAb,EAAqB;AAC3D,YAAQ,KAAK,OAAL,CAAa,MAAb;IADT,EAH+B;GAAX,CAlBc;EAAf;;AA2BrB,SAAQ,IAAR,GAAe,UAAS,UAAT,EAAqB,IAArB,EAA2B,GAA3B,EAAgC;AAC9C,MAAI,OAAO,IAAP,CAD0C;;AAG9C,MAAI,IAAI,KAAJ,KAAc,QAAd,EAAwB;AAC3B,UAAO,QAAQ,UAAR,CAAmB,UAAnB,EAA+B,IAA/B,EAAqC,GAArC,CAAP,CAD2B;GAA5B,MAEO;AACN,UAAO,QAAQ,SAAR,CAAkB,UAAlB,EAA8B,IAA9B,EAAoC,GAApC,CAAP,CADM;GAFP;;AAMA,SAAO,IAAP,CAT8C;EAAhC;;AAYf,SAAQ,UAAR,GAAqB,UAAS,UAAT,EAAqB,IAArB,EAA2B,GAA3B,EAAgC;AACpD,SAAO,EAAE,IAAF,EAAQ,EAAC,OAAO,WAAW,QAAX,KAAwB,qBAAxB,EAAhB,EAAgE;;AAEtE,IAAE,KAAF,EAAS;AACR,UAAO,KAAK,OAAL,CAAa,IAAb,KAAsB,QAAtB,GAAiC,WAAW,QAAQ,UAAR,CAAmB,KAAK,OAAL,CAAa,MAAb,CAA9B,GAAqD,GAArD,GAA2D,EAA5F;AACP,UAAO,qBAAP;GAFD,EAGG,CACF,EAAE,GAAF,EAAO;AACN,UAAO,4BAAP;AACA,UAAO,WAAW,QAAQ,UAAR,CAAmB,KAAK,OAAL,CAAa,MAAb,CAA9B,GAAqD,GAArD;AACP,YAAS,WAAW,aAAX;GAHV,EAIG,EAAE,KAAF,CAAQ,KAAK,OAAL,CAAa,OAAb,CAAqB,MAArB,CAJX,CADE,EAMF,GANE,EAOF,EAAE,KAAF,CAAQ,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAPN,CAHH,CAFsE,CAAhE,CAAP,CADoD;EAAhC;;AAkBrB,SAAQ,SAAR,GAAoB,UAAS,UAAT,EAAqB,IAArB,EAA2B,GAA3B,EAAgC;AACnD,MAAI,QAAQ,IAAR,CAD+C;;AAGnD,MAAI,KAAK,OAAL,CAAa,KAAb,EAAoB;AACvB,WAAQ,GAAR,CAAY,cAAZ,EADuB;AAEvB,WAAQ,EAAE,KAAF,EAAS,EAAC,OAAO,mBAAP,EAAV,EAAuC,KAAK,OAAL,CAAa,KAAb,CAA/C,CAFuB;GAAxB;;AAKA,SAAO,EAAE,IAAF,EAAQ,EAAC,OAAO,WAAW,QAAX,KAAwB,oBAAxB,EAAhB,EAA+D,CACrE,EAAE,GAAF,EAAO;AACN,UAAO,oBAAP;AACA,UAAO,WAAW,QAAQ,UAAR,CAAmB,KAAK,OAAL,CAAa,MAAb,CAA9B,GAAqD,GAArD;AACP,YAAS,WAAW,aAAX;GAHV,EAIG,EAAE,KAAF,CAAQ,KAAK,OAAL,CAAa,OAAb,CAAqB,MAArB,CAJX,CADqE,EAMrE,EAAE,KAAF,EAAS,EAAC,OAAO,uBAAP,EAAV,EAA2C,EAAE,KAAF,CAAQ,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAAnD,CANqE,EAOrE,EAAE,KAAF,EAAS;AACR,UAAO,KAAK,OAAL,CAAa,IAAb,KAAsB,QAAtB,GAAiC,WAAW,QAAQ,UAAR,CAAmB,KAAK,OAAL,CAAa,MAAb,CAA9B,GAAqD,GAArD,GAA2D,EAA5F;AACP,UAAO,qBAAP;GAFD,EAGG,CACF,EAAE,KAAF,CAAQ,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CADN,CAHH,CAPqE,EAarE,KAbqE,CAA/D,CAAP,CARmD;EAAhC;;mBAyBL,Q;;;;;;;ACxFf;;AAEA;AACA;AACA;AACA;AACA,gDAAsF;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,iCAAgC,UAAU,EAAE;AAC5C,E;;;;;;ACpBA;AACA;;;AAGA;AACA,wCAAuC,sBAAsB,2BAA2B,8BAA8B,0BAA0B,uBAAuB,GAAG,wBAAwB,iBAAiB,GAAG,0BAA0B,8BAA8B,GAAG,4CAA4C,uBAAuB,GAAG,0DAA0D,kBAAkB,GAAG,6BAA6B,8BAA8B,GAAG,8CAA8C,4BAA4B,uBAAuB,mBAAmB,eAAe,gBAAgB,GAAG,4CAA4C,mBAAmB,GAAG,sDAAsD,uBAAuB,GAAG,mDAAmD,qBAAqB,oBAAoB,mBAAmB,GAAG,yDAAyD,iBAAiB,GAAG,0CAA0C,wBAAwB,gBAAgB,iBAAiB,8BAA8B,GAAG,6CAA6C,4BAA4B,mCAAmC,qBAAqB,oBAAoB,GAAG,2CAA2C,mBAAmB,mBAAmB,GAAG,qDAAqD,uBAAuB,GAAG,yCAAyC,qBAAqB,oBAAoB,mBAAmB,GAAG,+CAA+C,iBAAiB,GAAG,yCAAyC,wBAAwB,gBAAgB,iBAAiB,8BAA8B,GAAG;;AAExrD;;;;;;;;;;;;;;;ACPA;;;;AACA;;KAAY;;;;;;;;;;;;KAKN;AAEL,WAFK,aAEL,GAA8C;OAAlC,gEAAU,oBAAwB;OAAlB,kEAAY,oBAAM;;yBAFzC,eAEyC;;;AAE7C,QAAK,OAAL,GAAe,OAAO,MAAP,CAAc,OAAd,CAAf;;;AAF6C,OAK7C,CAAK,SAAL,GAAiB,SAAjB,CAL6C;GAA9C;;eAFK;;4BAUI,SAAS;;;AACjB,QAAI,cAAc;AACjB,aAAQ,KAAK,WAAL,CAAiB,EAAE,MAAF,CAAS,QAAQ,MAAR,CAA1B,EAA2C,QAAQ,MAAR,CAAnD;AACA,cAAS,QAAQ,OAAR;AACT,cAAS,QAAQ,OAAR,GAAkB,KAAK,cAAL,CAAoB,QAAQ,OAAR,CAAtC,GAAyD,EAAzD;AACT,oBAAe,QAAQ,OAAR,GAAkB,KAAK,mBAAL,CAAyB,QAAQ,OAAR,CAA3C,GAA8D,EAA9D;KAJZ,CADa;;AAQjB,QAAI,QAAQ,YAAY,OAAZ,CAAoB,KAApB,CAA0B,GAA1B,CAAR;;;;AARa,SAYjB,GAAQ,MAAM,GAAN,CAAU,UAAC,IAAD,EAAU;AAC3B,SAAI,MAAJ,CAD2B;;AAG3B,cAAS,MAAK,SAAL,CAAe,IAAf,CAAT,CAH2B;AAI3B,SAAI,OAAO,MAAP,KAAkB,QAAlB,EAA4B,OAAO,MAAP,CAAhC;;AAEA,cAAS,MAAK,YAAL,CAAkB,IAAlB,CAAT,CAN2B;AAO3B,SAAI,OAAO,MAAP,KAAkB,QAAlB,EAA4B,OAAO,MAAP,CAAhC;;AAEA,cAAS,MAAK,kBAAL,CAAwB,IAAxB,CAAT,CAT2B;AAU3B,SAAI,OAAO,MAAP,KAAkB,QAAlB,EAA4B,OAAO,MAAP,CAAhC;;AAEA,SAAI,OAAO,MAAK,SAAL,KAAmB,UAA1B,EAAsC;AACzC,eAAS,MAAK,cAAL,CAAoB,IAApB,CAAT,CADyC;AAEzC,UAAI,OAAO,MAAP,KAAkB,QAAlB,EAA4B,OAAO,MAAP,CAAhC;MAFD;;AAKA,YAAO,EAAE,MAAF,CAAS,IAAT,CAAP,CAjB2B;KAAV,CAAlB,CAZiB;;AAgCjB,gBAAY,OAAZ,GAAsB,MAAM,IAAN,CAAW,GAAX,CAAtB,CAhCiB;;AAkCjB,WAAO,WAAP,CAlCiB;;;;6BAqCR,MAAM;AACf,QAAI,cAAc,KAAd;QACH,UADD,CADe;;AAIf,iBAAa,KAAK,OAAL,CAAa,wMAAb,EAAuN,UAAU,GAAV,EAAe;AAClP,SAAI,OAAO,GAAP;SACH,aAAa,EAAb;;;AAFiP,SAK9O,IAAI,KAAJ,CAAU,eAAV,CAAJ,EAAgC;AAC/B,aAAO,GAAP,CAD+B;MAAhC;;AAIA,mBAAc,IAAd;;;AATkP,SAY9O,IAAI,KAAJ,CAAU,SAAV,CAAJ,EAA0B;AACzB,YAAM,YAAY,GAAZ,CADmB;MAA1B;;;AAZkP,SAiB9O,KAAK,MAAL,GAAc,GAAd,EAAmB;AACtB,aAAO,KAAK,MAAL,CAAY,CAAZ,EAAe,GAAf,IAAsB,KAAtB,CADe;MAAvB;;;AAjBkP,YAsB3O,8DAA8D,IAAI,OAAJ,CAAY,IAAZ,EAAkB,KAAlB,CAA9D,GAAyF,IAAzF,GAAgG,EAAE,MAAF,CAAS,IAAT,CAAhG,GAAiH,MAAjH,GAA0H,UAA1H,CAtB2O;KAAf,CAApO,CAJe;;AA6Bf,WAAO,cAAc,UAAd,GAA2B,KAA3B,CA7BQ;;;;gCAgCH,MAAM;AAClB,QAAI,KAAK,OAAL,CAAa,KAAK,WAAL,EAAb,CAAJ,EAAsC;AACrC,YAAO,KAAK,OAAL,CAAa,KAAK,WAAL,EAAb,CAAP,CADqC;KAAtC;;;;sCAKkB,MAAM;AACxB,QAAI,mBAAmB,KAAnB,CADoB;AAExB,QAAI,MAAM,IAAN;;AAFoB,OAIxB,GAAM,IAAI,OAAJ,CAAY,gCAAZ,EAA8C,UAAC,KAAD,EAAQ,MAAR,EAAgB,MAAhB,EAA2B;AAC9E,wBAAmB,IAAnB,CAD8E;AAE9E,YAAO,qCAAqC,MAArC,GAA8C,IAA9C,GAAqD,MAArD,GAA8D,MAA9D,CAFuE;KAA3B,CAApD;;;AAJwB,OAUxB,GAAM,IAAI,OAAJ,CAAY,gCAAZ,EAA8C,UAAC,KAAD,EAAQ,MAAR,EAAgB,MAAhB,EAA2B;AAC9E,wBAAmB,IAAnB,CAD8E;AAE9E,YAAO,qCAAqC,MAArC,GAA8C,IAA9C,GAAqD,MAArD,GAA8D,MAA9D,CAFuE;KAA3B,CAApD,CAVwB;;AAexB,WAAO,mBACN,GADM,GAEN,KAFM,CAfiB;;;;kCAoBV,MAAM;AACpB,QAAI,YAAY,KAAK,SAAL,EAAZ,CADgB;AAEpB,QAAI,CAAC,SAAD,IAAc,CAAC,UAAU,MAAV,EAAkB;AACpC,YADoC;KAArC;;AAIA,QAAI,QAAQ,KAAK,KAAL,CAAW,mCAAX,CAAR,CANgB;AAOpB,QAAI,CAAC,KAAD,EAAQ;AACX,YADW;KAAZ;;;AAPoB,QAYhB,UAAU,OAAV,CAAkB,MAAM,CAAN,EAAS,WAAT,EAAlB,MAA8C,CAAC,CAAD,EAAI;AACrD,YADqD;KAAtD;;AAIA,QAAI,SAAS,QAAQ,UAAR,CAAmB,MAAM,CAAN,CAAnB,CAAT,CAhBgB;AAiBpB,QAAI,MAAM,8DAA8D,MAA9D,GAAuE,KAAvE,GAA+E,EAAE,MAAF,CAAS,MAAM,CAAN,CAAT,CAA/E,GAAoG,SAApG;;;AAjBU,QAoBhB,MAAM,CAAN,CAAJ,EAAc;AACb,YAAO,EAAE,MAAF,CAAS,MAAM,CAAN,CAAT,CAAP,CADa;KAAd;;AAIA,WAAO,GAAP,CAxBoB;;;;kCA2BN,WAAW;AACzB,WAAO,wBAAS,UAAT,EAAqB,IAAI,IAAJ,CAAS,SAAT,CAArB,CAAP,CADyB;;;;uCAIN,WAAW;AAC9B,WAAO,wBAAS,OAAT,EAAkB,IAAI,IAAJ,CAAS,SAAT,CAAlB,CAAP,CAD8B;;;;+BAInB,QAAQ,QAAQ;AAC3B,QAAG,UAAU,KAAV,EAAiB;AACnB,eAAU,GAAV,CADmB;KAApB;;AAIA,WAAO,MAAP,CAL2B;;;;SA5IvB;;;mBAsJS,c;;;;;;AC5Jf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,iCAAiC,EAAE;AACpE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2HAA0H;AAC1H;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oIAAmI;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mJAAkJ,kEAAkE;AACpN;AACA;AACA,0HAAyH;AACzH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,yIAAwI;AACxI;AACA;AACA,kHAAiH;AACjH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA2B,YAAY;;AAEvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAkC;;AAElC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAkC;;AAElC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,EAAC;;;;;;;;;;;;SClnBe;SAoBA;SASA;AA/BhB,KAAI,qCAAqC,KAArC;;AAEG,UAAS,iBAAT,GAA6B;AACnC,MAAI,kCAAJ,EAAwC;AACvC,UAAO,YAAP,CADuC;GAAxC;;AAIA,MAAI,EAAE,kBAAkB,MAAlB,CAAF,EAA6B;AAChC,UAAO,eAAP,CADgC;GAAjC;;AAIA,MAAI,aAAa,UAAb,KAA4B,SAA5B,EAAuC;AAC1C,UAAO,IAAP,CAD0C;GAA3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,CAAzB,EAA4B;AAC7C,YAD6C;KAA9C;;AAIA,MAAE,IAAF,CAAO,KAAK,KAAL,EAAY,UAAC,IAAD,EAAU;AAC5B,WAAK,IAAL,CAAU,IAAV,CAAe,IAAf,EAD4B;KAAV,CAAnB,CALa;;AASb,SAAK,KAAL,GAAa,EAAb,CATa;;;;SArHT;;;mBAmIS,U;;;;;;;AC1If;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;;;;;;;ACTA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjBA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACjGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA2B;AAC3B;AACA;AACA;AACA,6BAA4B,UAAU;;;;;;;AC1FtC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;ACxEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,YAAY;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC5BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,oBAAmB,YAAY;AAC/B;AACA;AACA;AACA;AACA;;;;;;;;AChBA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;AC9CA;;AAEA;AACA;AACA;AACA;AACA,mDAAkD;;AAElD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB,eAAc,QAAQ;AACtB,eAAc,OAAO;AACrB;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,gBAAgB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,cAAc;AACzB,YAAW,iBAAiB;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAQ,yBAAyB;AACjC;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,MAAM;AACjB,YAAW,iBAAiB;AAC5B;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,SAAS;AACpB,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC5QA;;AAEA;AACA;AACA;AACA;AACA,YAAW,cAAc;AACzB,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;ACrCA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA,eAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,cAAc;AACzB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0DAAyD;AACzD,IAAG;AACH,uCAAsC;AACtC;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;ACpDA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;AC3DA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;;;;;;;ACtKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,kBAAiB,SAAS;AAC1B,6BAA4B;AAC5B;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA,0CAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA,0CAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACpMA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,cAAc;AACzB,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtBA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,QAAQ;AAC1B;AACA;AACA,kBAAiB,sBAAsB;AACvC;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;ACxDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;;AAEA;;;;;;;AC7DA;;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sCAAqC;;AAErC;AACA;AACA;AACA;;AAEA;;;;;;;;ACxCA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;;AChDA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC5CA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACtFA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACxDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAoB,EAAE;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACrEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;;;;;ACdA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA;;AAEA;;;;;;;;AChMA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;;AAEA;;;;;;;AChBA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;;;;;;;AC1BA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sCAAqC;;AAErC;;;;;;;AC/BA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;ACtGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;AC1BA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;;;;;;;AC9DA;;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,2CAA0C;AAC1C;AACA;AACA;;AAEA;AACA;AACA,0FAAyF;;AAEzF;;AAEA;AACA;;;;;;;;AChCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;mCC5IA;AACA,EAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,QAAO;AACP,mCAAkC,iDAAiD;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,oDAAoD;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA0B;AAC1B;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA,0CAAyC,8BAA8B;AACvE;AACA,UAAS;AACT;AACA;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,gBAAgB;AAChC;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAgE,6BAA6B;AAC7F,wEAAuE,iCAAiC;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA,qEAAoE;AACpE;AACA,wCAAuC,UAAU;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,sEAAqE;AACrE,6DAA4D;AAC5D;AACA;AACA,kDAAiD,MAAM;AACvD;AACA;AACA;AACA,gBAAe;AACf,yDAAwD,0EAA0E,OAAO,0BAA0B,SAAS;AAC5K;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,iEAAgE,gBAAgB;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAiE,2BAA2B;AAC5F;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,+BAA8B,OAAO;AACrC,2CAA0C;AAC1C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,KAAK;AACpD;AACA;AACA;AACA;AACA;AACA,+CAA8C;AAC9C;AACA;AACA;AACA,2CAA0C,gBAAgB;AAC1D;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD,kBAAkB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,6FAA6F;AACrH,oEAAmE;AACnE;AACA;AACA;AACA;AACA,2BAA0B,mGAAmG;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,mGAAmG;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,qBAAqB;AAClC;AACA;AACA,sBAAqB;AACrB;AACA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC;AACnC;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,UAAU;AACnD;AACA;AACA,cAAa;AACb;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAAwF;AACxF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,EAAC;;;;;;;;ACr4BD;;;;;;;;ACAA;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,iEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC1LA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;ACxBA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;;;;;;;;ACtFA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAmC;;AAEnC;;;;;;;AChCA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,oCAAmC;;AAEnC;;;;;;;ACtBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;ACjCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,eAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,2BAA0B,qDAAqD,mBAAmB,WAAW;AAC7G;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACtLA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iDAAgD,WAAW;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA,oBAAmB;AACnB;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;AC5XA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAgC,SAAS;AACzC;AACA,MAAK,YAAY;AACjB;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,gDAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,EAAC;AACD;AACA,gDAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAkB;AAClB;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,wBAAuB,iBAAiB;AACxC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAsF,sCAAsC,EAAE;;AAE9H;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sDAAqD;AACrD,sEAAqE;AACrE;AACA;AACA,yDAAwD;AACxD,+EAA8E;AAC9E;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAAyB,mBAAmB;;;AAG5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,gCAAgC;AAC9E,UAAS;;AAET;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAkC;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA8D;;AAE9D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,0BAA0B;AACrE;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,mDAAkD,WAAW;AAC7D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACxdD;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;;;;;;;AChDA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;;;;;;;ACjDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,IAAG,oCAAoC;AACvC,EAAC;;AAED;;;;;;;;ACjBA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACrBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACTA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;AChBA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACdA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;ACxFA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iCAAgC;AAChC,IAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACvBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACpEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AChCA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;AChDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;;;;;;ACrGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap bb06176549a547210f39\n **/","import * as Helpers from './Helpers/Helpers.js';\nimport ChatApp from './Components/ChatApp/ChatApp.js';\nimport Storage from './Services/Storage.js';\nimport Settings from './Services/Settings.js';\nimport EventBus from './Services/EventBus.js';\nimport ExtensionSync from './Services/ExtensionSync.js';\n\n(function loadApp() {\n\t// Don't run on reddit API pages such as the oauth login page\n\tif (window.location.href.indexOf('reddit.com/api/') > -1 || window.location.href.indexOf('reddit.com/login') > -1) {\n\t\treturn;\n\t}\n\n\tvar body = document.querySelector('body');\n\tvar extension_detected = false;\n\tvar extension = null;\n\n\t// The extension adds an __ocext to the body, remove it as it's only needed\n\t// for us to detect the precense of the extension.\n\tif (body.getAttribute('__ocext')) {\n\t\tbody.removeAttribute('__ocext');\n\t\textension_detected = true;\n\t}\n\n\n\t// Lets not swallow all errors. This causes headaches\n\tm.deferred.onerror = function(err) {\n\t\tconsole.error(err.stack);\n\t};\n\n\n\tvar event_bus = initEventBus();\n\tvar app_state = null;\n\n\tinitState(event_bus)\n\t\t.then((state) => {\n\t\t\tapp_state = state;\n\t\t})\n\t\t.then(initUi);\n\n\n\n\n\tfunction initUi() {\n\t\tvar $app = $('<div>').appendTo($('#chat'));\n\t\tm.mount($app[0], Helpers.subModule(ChatApp, {\n\t\t\tbus: event_bus,\n\t\t\tstate: app_state,\n\t\t\thas_extension: extension_detected\n\t\t}));\n\t}\n\n\n\tfunction initEventBus() {\n\t\tvar event_bus = new EventBus();\n\t\tevent_bus.on('all', function(event_name) {\n\t\t\t//console.log('[event bus] ' + event_name);\n\t\t});\n\n\t\treturn event_bus;\n\t}\n\n\n\tfunction initState(bus) {\n\t\tvar deferred = m.deferred();\n\n\t\t// Keep application state in one place so that page refreshing keeps\n\t\t// the most important things consistent (minimised, active channel, etc)\n\t\tvar state_obj = Storage.get('oc-state');\n\t\tif (typeof state_obj !== 'object') {\n\t\t\tstate_obj = {\n\t\t\t\t// is_open = render the whole app. false = minimised\n\t\t\t\tis_open: true,\n\n\t\t\t\t// Current subscribed channels\n\t\t\t\tchannel_list: [],\n\n\t\t\t\t// Active channel name\n\t\t\t\tactive_channel: '',\n\n\t\t\t\t// state of the sidebar\n\t\t\t\tis_sidebar_open: true\n\t\t\t};\n\t\t}\n\n\t\tvar state = new Settings(state_obj);\n\t\tvar state_fully_loaded = false;\n\t\tstate.onChange = function(changed, new_value, old_value, values) {\n\t\t\t//console.log('state.onChange()', changed, new_value, old_value);\n\t\t\t// We only want to deal with state changes once it has been fully loaded as\n\t\t\t// the extension may modify/sync it's state first\n\t\t\tif (!state_fully_loaded) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If we're syncing state from the extension, don't save it to storage yet.\n\t\t\t// It will be stored when the page is closed or refreshed\n\t\t\tif (changed === 'channel_list' && extension && extension.is_syncing) {\n\t\t\t} else {\n\t\t\t\tStorage.set('oc-state', values);\n\t\t\t}\n\n\t\t\tbus.trigger('state.change', changed, new_value, old_value, values);\n\t\t};\n\n\t\tif (extension_detected) {\n\t\t\textension = new ExtensionSync(state, bus, body);\n\t\t\textension.init(() => {\n\t\t\t\tstate_fully_loaded = true;\n\t\t\t\tdeferred.resolve(state);\n\t\t\t});\n\n\t\t} else {\n\t\t\tstate_fully_loaded = true;\n\t\t\tdeferred.resolve(state);\n\t\t}\n\n\t\treturn deferred.promise;\n\t}\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/",";(function (global, factory) { // eslint-disable-line\r\n\t\"use strict\"\r\n\t/* eslint-disable no-undef */\r\n\tvar m = factory(global)\r\n\tif (typeof module === \"object\" && module != null && module.exports) {\r\n\t\tmodule.exports = m\r\n\t} else if (typeof define === \"function\" && define.amd) {\r\n\t\tdefine(function () { return m })\r\n\t} else {\r\n\t\tglobal.m = m\r\n\t}\r\n\t/* eslint-enable no-undef */\r\n})(typeof window !== \"undefined\" ? window : {}, function (global, undefined) { // eslint-disable-line\r\n\t\"use strict\"\r\n\r\n\tm.version = function () {\r\n\t\treturn \"v0.2.3\"\r\n\t}\r\n\r\n\tvar hasOwn = {}.hasOwnProperty\r\n\tvar type = {}.toString\r\n\r\n\tfunction isFunction(object) {\r\n\t\treturn typeof object === \"function\"\r\n\t}\r\n\r\n\tfunction isObject(object) {\r\n\t\treturn type.call(object) === \"[object Object]\"\r\n\t}\r\n\r\n\tfunction isString(object) {\r\n\t\treturn type.call(object) === \"[object String]\"\r\n\t}\r\n\r\n\tvar isArray = Array.isArray || function (object) {\r\n\t\treturn type.call(object) === \"[object Array]\"\r\n\t}\r\n\r\n\tfunction noop() {}\r\n\r\n\tvar voidElements = {\r\n\t\tAREA: 1,\r\n\t\tBASE: 1,\r\n\t\tBR: 1,\r\n\t\tCOL: 1,\r\n\t\tCOMMAND: 1,\r\n\t\tEMBED: 1,\r\n\t\tHR: 1,\r\n\t\tIMG: 1,\r\n\t\tINPUT: 1,\r\n\t\tKEYGEN: 1,\r\n\t\tLINK: 1,\r\n\t\tMETA: 1,\r\n\t\tPARAM: 1,\r\n\t\tSOURCE: 1,\r\n\t\tTRACK: 1,\r\n\t\tWBR: 1\r\n\t}\r\n\r\n\t// caching commonly used variables\r\n\tvar $document, $location, $requestAnimationFrame, $cancelAnimationFrame\r\n\r\n\t// self invoking function needed because of the way mocks work\r\n\tfunction initialize(mock) {\r\n\t\t$document = mock.document\r\n\t\t$location = mock.location\r\n\t\t$cancelAnimationFrame = mock.cancelAnimationFrame || mock.clearTimeout\r\n\t\t$requestAnimationFrame = mock.requestAnimationFrame || mock.setTimeout\r\n\t}\r\n\r\n\t// testing API\r\n\tm.deps = function (mock) {\r\n\t\tinitialize(global = mock || window)\r\n\t\treturn global\r\n\t}\r\n\r\n\tm.deps(global)\r\n\r\n\t/**\r\n\t * @typedef {String} Tag\r\n\t * A string that looks like -> div.classname#id[param=one][param2=two]\r\n\t * Which describes a DOM node\r\n\t */\r\n\r\n\tfunction parseTagAttrs(cell, tag) {\r\n\t\tvar classes = []\r\n\t\tvar parser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[.+?\\])/g\r\n\t\tvar match\r\n\r\n\t\twhile ((match = parser.exec(tag))) {\r\n\t\t\tif (match[1] === \"\" && match[2]) {\r\n\t\t\t\tcell.tag = match[2]\r\n\t\t\t} else if (match[1] === \"#\") {\r\n\t\t\t\tcell.attrs.id = match[2]\r\n\t\t\t} else if (match[1] === \".\") {\r\n\t\t\t\tclasses.push(match[2])\r\n\t\t\t} else if (match[3][0] === \"[\") {\r\n\t\t\t\tvar pair = /\\[(.+?)(?:=(\"|'|)(.*?)\\2)?\\]/.exec(match[3])\r\n\t\t\t\tcell.attrs[pair[1]] = pair[3] || (pair[2] ? \"\" : true)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn classes\r\n\t}\r\n\r\n\tfunction getVirtualChildren(args, hasAttrs) {\r\n\t\tvar children = hasAttrs ? args.slice(1) : args\r\n\r\n\t\tif (children.length === 1 && isArray(children[0])) {\r\n\t\t\treturn children[0]\r\n\t\t} else {\r\n\t\t\treturn children\r\n\t\t}\r\n\t}\r\n\r\n\tfunction assignAttrs(target, attrs, classes) {\r\n\t\tvar classAttr = \"class\" in attrs ? \"class\" : \"className\"\r\n\r\n\t\tfor (var attrName in attrs) {\r\n\t\t\tif (hasOwn.call(attrs, attrName)) {\r\n\t\t\t\tif (attrName === classAttr &&\r\n\t\t\t\t\t\tattrs[attrName] != null &&\r\n\t\t\t\t\t\tattrs[attrName] !== \"\") {\r\n\t\t\t\t\tclasses.push(attrs[attrName])\r\n\t\t\t\t\t// create key in correct iteration order\r\n\t\t\t\t\ttarget[attrName] = \"\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[attrName] = attrs[attrName]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (classes.length) target[classAttr] = classes.join(\" \")\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @param {Tag} The DOM node tag\r\n\t * @param {Object=[]} optional key-value pairs to be mapped to DOM attrs\r\n\t * @param {...mNode=[]} Zero or more Mithril child nodes. Can be an array,\r\n\t *                      or splat (optional)\r\n\t */\r\n\tfunction m(tag, pairs) {\r\n\t\tvar args = [].slice.call(arguments, 1)\r\n\r\n\t\tif (isObject(tag)) return parameterize(tag, args)\r\n\r\n\t\tif (!isString(tag)) {\r\n\t\t\tthrow new Error(\"selector in m(selector, attrs, children) should \" +\r\n\t\t\t\t\"be a string\")\r\n\t\t}\r\n\r\n\t\tvar hasAttrs = pairs != null && isObject(pairs) &&\r\n\t\t\t!(\"tag\" in pairs || \"view\" in pairs || \"subtree\" in pairs)\r\n\r\n\t\tvar attrs = hasAttrs ? pairs : {}\r\n\t\tvar cell = {\r\n\t\t\ttag: \"div\",\r\n\t\t\tattrs: {},\r\n\t\t\tchildren: getVirtualChildren(args, hasAttrs)\r\n\t\t}\r\n\r\n\t\tassignAttrs(cell.attrs, attrs, parseTagAttrs(cell, tag))\r\n\t\treturn cell\r\n\t}\r\n\r\n\tfunction forEach(list, f) {\r\n\t\tfor (var i = 0; i < list.length && !f(list[i], i++);) {\r\n\t\t\t// function called in condition\r\n\t\t}\r\n\t}\r\n\r\n\tfunction forKeys(list, f) {\r\n\t\tforEach(list, function (attrs, i) {\r\n\t\t\treturn (attrs = attrs && attrs.attrs) &&\r\n\t\t\t\tattrs.key != null &&\r\n\t\t\t\tf(attrs, i)\r\n\t\t})\r\n\t}\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction dataToString(data) {\r\n\t\t// data.toString() might throw or return null if data is the return\r\n\t\t// value of Console.log in some versions of Firefox (behavior depends on\r\n\t\t// version)\r\n\t\ttry {\r\n\t\t\tif (data != null && data.toString() != null) return data\r\n\t\t} catch (e) {\r\n\t\t\t// silently ignore errors\r\n\t\t}\r\n\t\treturn \"\"\r\n\t}\r\n\r\n\t// This function was causing deopts in Chrome.\r\n\tfunction injectTextNode(parentElement, first, index, data) {\r\n\t\ttry {\r\n\t\t\tinsertNode(parentElement, first, index)\r\n\t\t\tfirst.nodeValue = data\r\n\t\t} catch (e) {\r\n\t\t\t// IE erroneously throws error when appending an empty text node\r\n\t\t\t// after a null\r\n\t\t}\r\n\t}\r\n\r\n\tfunction flatten(list) {\r\n\t\t// recursively flatten array\r\n\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\tif (isArray(list[i])) {\r\n\t\t\t\tlist = list.concat.apply([], list)\r\n\t\t\t\t// check current index again and flatten until there are no more\r\n\t\t\t\t// nested arrays at that index\r\n\t\t\t\ti--\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn list\r\n\t}\r\n\r\n\tfunction insertNode(parentElement, node, index) {\r\n\t\tparentElement.insertBefore(node,\r\n\t\t\tparentElement.childNodes[index] || null)\r\n\t}\r\n\r\n\tvar DELETION = 1\r\n\tvar INSERTION = 2\r\n\tvar MOVE = 3\r\n\r\n\tfunction handleKeysDiffer(data, existing, cached, parentElement) {\r\n\t\tforKeys(data, function (key, i) {\r\n\t\t\texisting[key = key.key] = existing[key] ? {\r\n\t\t\t\taction: MOVE,\r\n\t\t\t\tindex: i,\r\n\t\t\t\tfrom: existing[key].index,\r\n\t\t\t\telement: cached.nodes[existing[key].index] ||\r\n\t\t\t\t\t$document.createElement(\"div\")\r\n\t\t\t} : {action: INSERTION, index: i}\r\n\t\t})\r\n\r\n\t\tvar actions = []\r\n\t\tfor (var prop in existing) if (hasOwn.call(existing, prop)) {\r\n\t\t\tactions.push(existing[prop])\r\n\t\t}\r\n\r\n\t\tvar changes = actions.sort(sortChanges)\r\n\t\tvar newCached = new Array(cached.length)\r\n\r\n\t\tnewCached.nodes = cached.nodes.slice()\r\n\r\n\t\tforEach(changes, function (change) {\r\n\t\t\tvar index = change.index\r\n\t\t\tif (change.action === DELETION) {\r\n\t\t\t\tclear(cached[index].nodes, cached[index])\r\n\t\t\t\tnewCached.splice(index, 1)\r\n\t\t\t}\r\n\t\t\tif (change.action === INSERTION) {\r\n\t\t\t\tvar dummy = $document.createElement(\"div\")\r\n\t\t\t\tdummy.key = data[index].attrs.key\r\n\t\t\t\tinsertNode(parentElement, dummy, index)\r\n\t\t\t\tnewCached.splice(index, 0, {\r\n\t\t\t\t\tattrs: {key: data[index].attrs.key},\r\n\t\t\t\t\tnodes: [dummy]\r\n\t\t\t\t})\r\n\t\t\t\tnewCached.nodes[index] = dummy\r\n\t\t\t}\r\n\r\n\t\t\tif (change.action === MOVE) {\r\n\t\t\t\tvar changeElement = change.element\r\n\t\t\t\tvar maybeChanged = parentElement.childNodes[index]\r\n\t\t\t\tif (maybeChanged !== changeElement && changeElement !== null) {\r\n\t\t\t\t\tparentElement.insertBefore(changeElement,\r\n\t\t\t\t\t\tmaybeChanged || null)\r\n\t\t\t\t}\r\n\t\t\t\tnewCached[index] = cached[change.from]\r\n\t\t\t\tnewCached.nodes[index] = changeElement\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn newCached\r\n\t}\r\n\r\n\tfunction diffKeys(data, cached, existing, parentElement) {\r\n\t\tvar keysDiffer = data.length !== cached.length\r\n\r\n\t\tif (!keysDiffer) {\r\n\t\t\tforKeys(data, function (attrs, i) {\r\n\t\t\t\tvar cachedCell = cached[i]\r\n\t\t\t\treturn keysDiffer = cachedCell &&\r\n\t\t\t\t\tcachedCell.attrs &&\r\n\t\t\t\t\tcachedCell.attrs.key !== attrs.key\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (keysDiffer) {\r\n\t\t\treturn handleKeysDiffer(data, existing, cached, parentElement)\r\n\t\t} else {\r\n\t\t\treturn cached\r\n\t\t}\r\n\t}\r\n\r\n\tfunction diffArray(data, cached, nodes) {\r\n\t\t// diff the array itself\r\n\r\n\t\t// update the list of DOM nodes by collecting the nodes from each item\r\n\t\tforEach(data, function (_, i) {\r\n\t\t\tif (cached[i] != null) nodes.push.apply(nodes, cached[i].nodes)\r\n\t\t})\r\n\t\t// remove items from the end of the array if the new array is shorter\r\n\t\t// than the old one. if errors ever happen here, the issue is most\r\n\t\t// likely a bug in the construction of the `cached` data structure\r\n\t\t// somewhere earlier in the program\r\n\t\tforEach(cached.nodes, function (node, i) {\r\n\t\t\tif (node.parentNode != null && nodes.indexOf(node) < 0) {\r\n\t\t\t\tclear([node], [cached[i]])\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif (data.length < cached.length) cached.length = data.length\r\n\t\tcached.nodes = nodes\r\n\t}\r\n\r\n\tfunction buildArrayKeys(data) {\r\n\t\tvar guid = 0\r\n\t\tforKeys(data, function () {\r\n\t\t\tforEach(data, function (attrs) {\r\n\t\t\t\tif ((attrs = attrs && attrs.attrs) && attrs.key == null) {\r\n\t\t\t\t\tattrs.key = \"__mithril__\" + guid++\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn 1\r\n\t\t})\r\n\t}\r\n\r\n\tfunction isDifferentEnough(data, cached, dataAttrKeys) {\r\n\t\tif (data.tag !== cached.tag) return true\r\n\r\n\t\tif (dataAttrKeys.sort().join() !==\r\n\t\t\t\tObject.keys(cached.attrs).sort().join()) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (data.attrs.id !== cached.attrs.id) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (data.attrs.key !== cached.attrs.key) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tif (m.redraw.strategy() === \"all\") {\r\n\t\t\treturn !cached.configContext || cached.configContext.retain !== true\r\n\t\t}\r\n\r\n\t\tif (m.redraw.strategy() === \"diff\") {\r\n\t\t\treturn cached.configContext && cached.configContext.retain === false\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tfunction maybeRecreateObject(data, cached, dataAttrKeys) {\r\n\t\t// if an element is different enough from the one in cache, recreate it\r\n\t\tif (isDifferentEnough(data, cached, dataAttrKeys)) {\r\n\t\t\tif (cached.nodes.length) clear(cached.nodes)\r\n\r\n\t\t\tif (cached.configContext &&\r\n\t\t\t\t\tisFunction(cached.configContext.onunload)) {\r\n\t\t\t\tcached.configContext.onunload()\r\n\t\t\t}\r\n\r\n\t\t\tif (cached.controllers) {\r\n\t\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\t\tif (controller.onunload) controller.onunload({preventDefault: noop});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getObjectNamespace(data, namespace) {\r\n\t\tif (data.attrs.xmlns) return data.attrs.xmlns\r\n\t\tif (data.tag === \"svg\") return \"http://www.w3.org/2000/svg\"\r\n\t\tif (data.tag === \"math\") return \"http://www.w3.org/1998/Math/MathML\"\r\n\t\treturn namespace\r\n\t}\r\n\r\n\tvar pendingRequests = 0\r\n\tm.startComputation = function () { pendingRequests++ }\r\n\tm.endComputation = function () {\r\n\t\tif (pendingRequests > 1) {\r\n\t\t\tpendingRequests--\r\n\t\t} else {\r\n\t\t\tpendingRequests = 0\r\n\t\t\tm.redraw()\r\n\t\t}\r\n\t}\r\n\r\n\tfunction unloadCachedControllers(cached, views, controllers) {\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views\r\n\t\t\tcached.controllers = controllers\r\n\t\t\tforEach(controllers, function (controller) {\r\n\t\t\t\tif (controller.onunload && controller.onunload.$old) {\r\n\t\t\t\t\tcontroller.onunload = controller.onunload.$old\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pendingRequests && controller.onunload) {\r\n\t\t\t\t\tvar onunload = controller.onunload\r\n\t\t\t\t\tcontroller.onunload = noop\r\n\t\t\t\t\tcontroller.onunload.$old = onunload\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction scheduleConfigsToBeCalled(configs, data, node, isNew, cached) {\r\n\t\t// schedule configs to be called. They are called after `build` finishes\r\n\t\t// running\r\n\t\tif (isFunction(data.attrs.config)) {\r\n\t\t\tvar context = cached.configContext = cached.configContext || {}\r\n\r\n\t\t\t// bind\r\n\t\t\tconfigs.push(function () {\r\n\t\t\t\treturn data.attrs.config.call(data, node, !isNew, context,\r\n\t\t\t\t\tcached)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildUpdatedNode(\r\n\t\tcached,\r\n\t\tdata,\r\n\t\teditable,\r\n\t\thasKeys,\r\n\t\tnamespace,\r\n\t\tviews,\r\n\t\tconfigs,\r\n\t\tcontrollers\r\n\t) {\r\n\t\tvar node = cached.nodes[0]\r\n\r\n\t\tif (hasKeys) {\r\n\t\t\tsetAttributes(node, data.tag, data.attrs, cached.attrs, namespace)\r\n\t\t}\r\n\r\n\t\tcached.children = build(\r\n\t\t\tnode,\r\n\t\t\tdata.tag,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tdata.children,\r\n\t\t\tcached.children,\r\n\t\t\tfalse,\r\n\t\t\t0,\r\n\t\t\tdata.attrs.contenteditable ? node : editable,\r\n\t\t\tnamespace,\r\n\t\t\tconfigs\r\n\t\t)\r\n\r\n\t\tcached.nodes.intact = true\r\n\r\n\t\tif (controllers.length) {\r\n\t\t\tcached.views = views\r\n\t\t\tcached.controllers = controllers\r\n\t\t}\r\n\r\n\t\treturn node\r\n\t}\r\n\r\n\tfunction handleNonexistentNodes(data, parentElement, index) {\r\n\t\tvar nodes\r\n\t\tif (data.$trusted) {\r\n\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t} else {\r\n\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\tif (!(parentElement.nodeName in voidElements)) {\r\n\t\t\t\tinsertNode(parentElement, nodes[0], index)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar cached\r\n\r\n\t\tif (typeof data === \"string\" ||\r\n\t\t\t\ttypeof data === \"number\" ||\r\n\t\t\t\ttypeof data === \"boolean\") {\r\n\t\t\tcached = new data.constructor(data)\r\n\t\t} else {\r\n\t\t\tcached = data\r\n\t\t}\r\n\r\n\t\tcached.nodes = nodes\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction reattachNodes(\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tparentElement,\r\n\t\teditable,\r\n\t\tindex,\r\n\t\tparentTag\r\n\t) {\r\n\t\tvar nodes = cached.nodes\r\n\t\tif (!editable || editable !== $document.activeElement) {\r\n\t\t\tif (data.$trusted) {\r\n\t\t\t\tclear(nodes, cached)\r\n\t\t\t\tnodes = injectHTML(parentElement, index, data)\r\n\t\t\t} else if (parentTag === \"textarea\") {\r\n\t\t\t\t// <textarea> uses `value` instead of `nodeValue`.\r\n\t\t\t\tparentElement.value = data\r\n\t\t\t} else if (editable) {\r\n\t\t\t\t// contenteditable nodes use `innerHTML` instead of `nodeValue`.\r\n\t\t\t\teditable.innerHTML = data\r\n\t\t\t} else {\r\n\t\t\t\t// was a trusted string\r\n\t\t\t\tif (nodes[0].nodeType === 1 || nodes.length > 1 ||\r\n\t\t\t\t\t\t(nodes[0].nodeValue.trim &&\r\n\t\t\t\t\t\t\t!nodes[0].nodeValue.trim())) {\r\n\t\t\t\t\tclear(cached.nodes, cached)\r\n\t\t\t\t\tnodes = [$document.createTextNode(data)]\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinjectTextNode(parentElement, nodes[0], index, data)\r\n\t\t\t}\r\n\t\t}\r\n\t\tcached = new data.constructor(data)\r\n\t\tcached.nodes = nodes\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction handleTextNode(\r\n\t\tcached,\r\n\t\tdata,\r\n\t\tindex,\r\n\t\tparentElement,\r\n\t\tshouldReattach,\r\n\t\teditable,\r\n\t\tparentTag\r\n\t) {\r\n\t\tif (!cached.nodes.length) {\r\n\t\t\treturn handleNonexistentNodes(data, parentElement, index)\r\n\t\t} else if (cached.valueOf() !== data.valueOf() || shouldReattach) {\r\n\t\t\treturn reattachNodes(data, cached, parentElement, editable, index,\r\n\t\t\t\tparentTag)\r\n\t\t} else {\r\n\t\t\treturn (cached.nodes.intact = true, cached)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getSubArrayCount(item) {\r\n\t\tif (item.$trusted) {\r\n\t\t\t// fix offset of next element if item was a trusted string w/ more\r\n\t\t\t// than one html element\r\n\t\t\t// the first clause in the regexp matches elements\r\n\t\t\t// the second clause (after the pipe) matches text nodes\r\n\t\t\tvar match = item.match(/<[^\\/]|\\>\\s*[^<]/g)\r\n\t\t\tif (match != null) return match.length\r\n\t\t} else if (isArray(item)) {\r\n\t\t\treturn item.length\r\n\t\t}\r\n\t\treturn 1\r\n\t}\r\n\r\n\tfunction buildArray(\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tparentElement,\r\n\t\tindex,\r\n\t\tparentTag,\r\n\t\tshouldReattach,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tdata = flatten(data)\r\n\t\tvar nodes = []\r\n\t\tvar intact = cached.length === data.length\r\n\t\tvar subArrayCount = 0\r\n\r\n\t\t// keys algorithm: sort elements without recreating them if keys are\r\n\t\t// present\r\n\t\t//\r\n\t\t// 1) create a map of all existing keys, and mark all for deletion\r\n\t\t// 2) add new keys to map and mark them for addition\r\n\t\t// 3) if key exists in new list, change action from deletion to a move\r\n\t\t// 4) for each key, handle its corresponding action as marked in\r\n\t\t//    previous steps\r\n\r\n\t\tvar existing = {}\r\n\t\tvar shouldMaintainIdentities = false\r\n\r\n\t\tforKeys(cached, function (attrs, i) {\r\n\t\t\tshouldMaintainIdentities = true\r\n\t\t\texisting[cached[i].attrs.key] = {action: DELETION, index: i}\r\n\t\t})\r\n\r\n\t\tbuildArrayKeys(data)\r\n\t\tif (shouldMaintainIdentities) {\r\n\t\t\tcached = diffKeys(data, cached, existing, parentElement)\r\n\t\t}\r\n\t\t// end key algorithm\r\n\r\n\t\tvar cacheCount = 0\r\n\t\t// faster explicitly written\r\n\t\tfor (var i = 0, len = data.length; i < len; i++) {\r\n\t\t\t// diff each item in the array\r\n\t\t\tvar item = build(\r\n\t\t\t\tparentElement,\r\n\t\t\t\tparentTag,\r\n\t\t\t\tcached,\r\n\t\t\t\tindex,\r\n\t\t\t\tdata[i],\r\n\t\t\t\tcached[cacheCount],\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\tindex + subArrayCount || subArrayCount,\r\n\t\t\t\teditable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\r\n\t\t\tif (item !== undefined) {\r\n\t\t\t\tintact = intact && item.nodes.intact\r\n\t\t\t\tsubArrayCount += getSubArrayCount(item)\r\n\t\t\t\tcached[cacheCount++] = item\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!intact) diffArray(data, cached, nodes)\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction makeCache(data, cached, index, parentIndex, parentCache) {\r\n\t\tif (cached != null) {\r\n\t\t\tif (type.call(cached) === type.call(data)) return cached\r\n\r\n\t\t\tif (parentCache && parentCache.nodes) {\r\n\t\t\t\tvar offset = index - parentIndex\r\n\t\t\t\tvar end = offset + (isArray(data) ? data : cached.nodes).length\r\n\t\t\t\tclear(\r\n\t\t\t\t\tparentCache.nodes.slice(offset, end),\r\n\t\t\t\t\tparentCache.slice(offset, end))\r\n\t\t\t} else if (cached.nodes) {\r\n\t\t\t\tclear(cached.nodes, cached)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcached = new data.constructor()\r\n\t\t// if constructor creates a virtual dom element, use a blank object as\r\n\t\t// the base cached node instead of copying the virtual el (#277)\r\n\t\tif (cached.tag) cached = {}\r\n\t\tcached.nodes = []\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction constructNode(data, namespace) {\r\n\t\tif (data.attrs.is) {\r\n\t\t\tif (namespace == null) {\r\n\t\t\t\treturn $document.createElement(data.tag, data.attrs.is)\r\n\t\t\t} else {\r\n\t\t\t\treturn $document.createElementNS(namespace, data.tag,\r\n\t\t\t\t\tdata.attrs.is)\r\n\t\t\t}\r\n\t\t} else if (namespace == null) {\r\n\t\t\treturn $document.createElement(data.tag)\r\n\t\t} else {\r\n\t\t\treturn $document.createElementNS(namespace, data.tag)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction constructAttrs(data, node, namespace, hasKeys) {\r\n\t\tif (hasKeys) {\r\n\t\t\treturn setAttributes(node, data.tag, data.attrs, {}, namespace)\r\n\t\t} else {\r\n\t\t\treturn data.attrs\r\n\t\t}\r\n\t}\r\n\r\n\tfunction constructChildren(\r\n\t\tdata,\r\n\t\tnode,\r\n\t\tcached,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tif (data.children != null && data.children.length > 0) {\r\n\t\t\treturn build(\r\n\t\t\t\tnode,\r\n\t\t\t\tdata.tag,\r\n\t\t\t\tundefined,\r\n\t\t\t\tundefined,\r\n\t\t\t\tdata.children,\r\n\t\t\t\tcached.children,\r\n\t\t\t\ttrue,\r\n\t\t\t\t0,\r\n\t\t\t\tdata.attrs.contenteditable ? node : editable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else {\r\n\t\t\treturn data.children\r\n\t\t}\r\n\t}\r\n\r\n\tfunction reconstructCached(\r\n\t\tdata,\r\n\t\tattrs,\r\n\t\tchildren,\r\n\t\tnode,\r\n\t\tnamespace,\r\n\t\tviews,\r\n\t\tcontrollers\r\n\t) {\r\n\t\tvar cached = {\r\n\t\t\ttag: data.tag,\r\n\t\t\tattrs: attrs,\r\n\t\t\tchildren: children,\r\n\t\t\tnodes: [node]\r\n\t\t}\r\n\r\n\t\tunloadCachedControllers(cached, views, controllers)\r\n\r\n\t\tif (cached.children && !cached.children.nodes) {\r\n\t\t\tcached.children.nodes = []\r\n\t\t}\r\n\r\n\t\t// edge case: setting value on <select> doesn't work before children\r\n\t\t// exist, so set it again after children have been created\r\n\t\tif (data.tag === \"select\" && \"value\" in data.attrs) {\r\n\t\t\tsetAttributes(node, data.tag, {value: data.attrs.value}, {},\r\n\t\t\t\tnamespace)\r\n\t\t}\r\n\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction getController(views, view, cachedControllers, controller) {\r\n\t\tvar controllerIndex\r\n\r\n\t\tif (m.redraw.strategy() === \"diff\" && views) {\r\n\t\t\tcontrollerIndex = views.indexOf(view)\r\n\t\t} else {\r\n\t\t\tcontrollerIndex = -1\r\n\t\t}\r\n\r\n\t\tif (controllerIndex > -1) {\r\n\t\t\treturn cachedControllers[controllerIndex]\r\n\t\t} else if (isFunction(controller)) {\r\n\t\t\treturn new controller()\r\n\t\t} else {\r\n\t\t\treturn {}\r\n\t\t}\r\n\t}\r\n\r\n\tvar unloaders = []\r\n\r\n\tfunction updateLists(views, controllers, view, controller) {\r\n\t\tif (controller.onunload != null && unloaders.map(function(u) {return u.handler}).indexOf(controller.onunload) < 0) {\r\n\t\t\tunloaders.push({\r\n\t\t\t\tcontroller: controller,\r\n\t\t\t\thandler: controller.onunload\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tviews.push(view)\r\n\t\tcontrollers.push(controller)\r\n\t}\r\n\r\n\tvar forcing = false\r\n\tfunction checkView(data, view, cached, cachedControllers, controllers, views) {\r\n\t\tvar controller = getController(cached.views, view, cachedControllers, data.controller)\r\n\t\tvar key = data && data.attrs && data.attrs.key\r\n\t\tdata = pendingRequests === 0 || forcing || cachedControllers && cachedControllers.indexOf(controller) > -1 ? data.view(controller) : {tag: \"placeholder\"}\r\n\t\tif (data.subtree === \"retain\") return data;\r\n\t\tdata.attrs = data.attrs || {}\r\n\t\tdata.attrs.key = key\r\n\t\tupdateLists(views, controllers, view, controller)\r\n\t\treturn data\r\n\t}\r\n\r\n\tfunction markViews(data, cached, views, controllers) {\r\n\t\tvar cachedControllers = cached && cached.controllers\r\n\r\n\t\twhile (data.view != null) {\r\n\t\t\tdata = checkView(\r\n\t\t\t\tdata,\r\n\t\t\t\tdata.view.$original || data.view,\r\n\t\t\t\tcached,\r\n\t\t\t\tcachedControllers,\r\n\t\t\t\tcontrollers,\r\n\t\t\t\tviews)\r\n\t\t}\r\n\r\n\t\treturn data\r\n\t}\r\n\r\n\tfunction buildObject( // eslint-disable-line max-statements\r\n\t\tdata,\r\n\t\tcached,\r\n\t\teditable,\r\n\t\tparentElement,\r\n\t\tindex,\r\n\t\tshouldReattach,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\tvar views = []\r\n\t\tvar controllers = []\r\n\r\n\t\tdata = markViews(data, cached, views, controllers)\r\n\r\n\t\tif (data.subtree === \"retain\") return cached\r\n\r\n\t\tif (!data.tag && controllers.length) {\r\n\t\t\tthrow new Error(\"Component template must return a virtual \" +\r\n\t\t\t\t\"element, not an array, string, etc.\")\r\n\t\t}\r\n\r\n\t\tdata.attrs = data.attrs || {}\r\n\t\tcached.attrs = cached.attrs || {}\r\n\r\n\t\tvar dataAttrKeys = Object.keys(data.attrs)\r\n\t\tvar hasKeys = dataAttrKeys.length > (\"key\" in data.attrs ? 1 : 0)\r\n\r\n\t\tmaybeRecreateObject(data, cached, dataAttrKeys)\r\n\r\n\t\tif (!isString(data.tag)) return\r\n\r\n\t\tvar isNew = cached.nodes.length === 0\r\n\r\n\t\tnamespace = getObjectNamespace(data, namespace)\r\n\r\n\t\tvar node\r\n\t\tif (isNew) {\r\n\t\t\tnode = constructNode(data, namespace)\r\n\t\t\t// set attributes first, then create children\r\n\t\t\tvar attrs = constructAttrs(data, node, namespace, hasKeys)\r\n\r\n\t\t\tvar children = constructChildren(data, node, cached, editable,\r\n\t\t\t\tnamespace, configs)\r\n\r\n\t\t\tcached = reconstructCached(\r\n\t\t\t\tdata,\r\n\t\t\t\tattrs,\r\n\t\t\t\tchildren,\r\n\t\t\t\tnode,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tviews,\r\n\t\t\t\tcontrollers)\r\n\t\t} else {\r\n\t\t\tnode = buildUpdatedNode(\r\n\t\t\t\tcached,\r\n\t\t\t\tdata,\r\n\t\t\t\teditable,\r\n\t\t\t\thasKeys,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tviews,\r\n\t\t\t\tconfigs,\r\n\t\t\t\tcontrollers)\r\n\t\t}\r\n\r\n\t\tif (isNew || shouldReattach === true && node != null) {\r\n\t\t\tinsertNode(parentElement, node, index)\r\n\t\t}\r\n\r\n\t\t// The configs are called after `build` finishes running\r\n\t\tscheduleConfigsToBeCalled(configs, data, node, isNew, cached)\r\n\r\n\t\treturn cached\r\n\t}\r\n\r\n\tfunction build(\r\n\t\tparentElement,\r\n\t\tparentTag,\r\n\t\tparentCache,\r\n\t\tparentIndex,\r\n\t\tdata,\r\n\t\tcached,\r\n\t\tshouldReattach,\r\n\t\tindex,\r\n\t\teditable,\r\n\t\tnamespace,\r\n\t\tconfigs\r\n\t) {\r\n\t\t/*\r\n\t\t * `build` is a recursive function that manages creation/diffing/removal\r\n\t\t * of DOM elements based on comparison between `data` and `cached` the\r\n\t\t * diff algorithm can be summarized as this:\r\n\t\t *\r\n\t\t * 1 - compare `data` and `cached`\r\n\t\t * 2 - if they are different, copy `data` to `cached` and update the DOM\r\n\t\t *     based on what the difference is\r\n\t\t * 3 - recursively apply this algorithm for every array and for the\r\n\t\t *     children of every virtual element\r\n\t\t *\r\n\t\t * The `cached` data structure is essentially the same as the previous\r\n\t\t * redraw's `data` data structure, with a few additions:\r\n\t\t * - `cached` always has a property called `nodes`, which is a list of\r\n\t\t *    DOM elements that correspond to the data represented by the\r\n\t\t *    respective virtual element\r\n\t\t * - in order to support attaching `nodes` as a property of `cached`,\r\n\t\t *    `cached` is *always* a non-primitive object, i.e. if the data was\r\n\t\t *    a string, then cached is a String instance. If data was `null` or\r\n\t\t *    `undefined`, cached is `new String(\"\")`\r\n\t\t * - `cached also has a `configContext` property, which is the state\r\n\t\t *    storage object exposed by config(element, isInitialized, context)\r\n\t\t * - when `cached` is an Object, it represents a virtual element; when\r\n\t\t *    it's an Array, it represents a list of elements; when it's a\r\n\t\t *    String, Number or Boolean, it represents a text node\r\n\t\t *\r\n\t\t * `parentElement` is a DOM element used for W3C DOM API calls\r\n\t\t * `parentTag` is only used for handling a corner case for textarea\r\n\t\t * values\r\n\t\t * `parentCache` is used to remove nodes in some multi-node cases\r\n\t\t * `parentIndex` and `index` are used to figure out the offset of nodes.\r\n\t\t * They're artifacts from before arrays started being flattened and are\r\n\t\t * likely refactorable\r\n\t\t * `data` and `cached` are, respectively, the new and old nodes being\r\n\t\t * diffed\r\n\t\t * `shouldReattach` is a flag indicating whether a parent node was\r\n\t\t * recreated (if so, and if this node is reused, then this node must\r\n\t\t * reattach itself to the new parent)\r\n\t\t * `editable` is a flag that indicates whether an ancestor is\r\n\t\t * contenteditable\r\n\t\t * `namespace` indicates the closest HTML namespace as it cascades down\r\n\t\t * from an ancestor\r\n\t\t * `configs` is a list of config functions to run after the topmost\r\n\t\t * `build` call finishes running\r\n\t\t *\r\n\t\t * there's logic that relies on the assumption that null and undefined\r\n\t\t * data are equivalent to empty strings\r\n\t\t * - this prevents lifecycle surprises from procedural helpers that mix\r\n\t\t *   implicit and explicit return statements (e.g.\r\n\t\t *   function foo() {if (cond) return m(\"div\")}\r\n\t\t * - it simplifies diffing code\r\n\t\t */\r\n\t\tdata = dataToString(data)\r\n\t\tif (data.subtree === \"retain\") return cached\r\n\t\tcached = makeCache(data, cached, index, parentIndex, parentCache)\r\n\r\n\t\tif (isArray(data)) {\r\n\t\t\treturn buildArray(\r\n\t\t\t\tdata,\r\n\t\t\t\tcached,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tindex,\r\n\t\t\t\tparentTag,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\teditable,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else if (data != null && isObject(data)) {\r\n\t\t\treturn buildObject(\r\n\t\t\t\tdata,\r\n\t\t\t\tcached,\r\n\t\t\t\teditable,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tindex,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\tnamespace,\r\n\t\t\t\tconfigs)\r\n\t\t} else if (!isFunction(data)) {\r\n\t\t\treturn handleTextNode(\r\n\t\t\t\tcached,\r\n\t\t\t\tdata,\r\n\t\t\t\tindex,\r\n\t\t\t\tparentElement,\r\n\t\t\t\tshouldReattach,\r\n\t\t\t\teditable,\r\n\t\t\t\tparentTag)\r\n\t\t} else {\r\n\t\t\treturn cached\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sortChanges(a, b) {\r\n\t\treturn a.action - b.action || a.index - b.index\r\n\t}\r\n\r\n\tfunction copyStyleAttrs(node, dataAttr, cachedAttr) {\r\n\t\tfor (var rule in dataAttr) if (hasOwn.call(dataAttr, rule)) {\r\n\t\t\tif (cachedAttr == null || cachedAttr[rule] !== dataAttr[rule]) {\r\n\t\t\t\tnode.style[rule] = dataAttr[rule]\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (rule in cachedAttr) if (hasOwn.call(cachedAttr, rule)) {\r\n\t\t\tif (!hasOwn.call(dataAttr, rule)) node.style[rule] = \"\"\r\n\t\t}\r\n\t}\r\n\r\n\tvar shouldUseSetAttribute = {\r\n\t\tlist: 1,\r\n\t\tstyle: 1,\r\n\t\tform: 1,\r\n\t\ttype: 1,\r\n\t\twidth: 1,\r\n\t\theight: 1\r\n\t}\r\n\r\n\tfunction setSingleAttr(\r\n\t\tnode,\r\n\t\tattrName,\r\n\t\tdataAttr,\r\n\t\tcachedAttr,\r\n\t\ttag,\r\n\t\tnamespace\r\n\t) {\r\n\t\tif (attrName === \"config\" || attrName === \"key\") {\r\n\t\t\t// `config` isn't a real attribute, so ignore it\r\n\t\t\treturn true\r\n\t\t} else if (isFunction(dataAttr) && attrName.slice(0, 2) === \"on\") {\r\n\t\t\t// hook event handlers to the auto-redrawing system\r\n\t\t\tnode[attrName] = autoredraw(dataAttr, node)\r\n\t\t} else if (attrName === \"style\" && dataAttr != null &&\r\n\t\t\t\tisObject(dataAttr)) {\r\n\t\t\t// handle `style: {...}`\r\n\t\t\tcopyStyleAttrs(node, dataAttr, cachedAttr)\r\n\t\t} else if (namespace != null) {\r\n\t\t\t// handle SVG\r\n\t\t\tif (attrName === \"href\") {\r\n\t\t\t\tnode.setAttributeNS(\"http://www.w3.org/1999/xlink\",\r\n\t\t\t\t\t\"href\", dataAttr)\r\n\t\t\t} else {\r\n\t\t\t\tnode.setAttribute(\r\n\t\t\t\t\tattrName === \"className\" ? \"class\" : attrName,\r\n\t\t\t\t\tdataAttr)\r\n\t\t\t}\r\n\t\t} else if (attrName in node && !shouldUseSetAttribute[attrName]) {\r\n\t\t\t// handle cases that are properties (but ignore cases where we\r\n\t\t\t// should use setAttribute instead)\r\n\t\t\t//\r\n\t\t\t// - list and form are typically used as strings, but are DOM\r\n\t\t\t//   element references in js\r\n\t\t\t//\r\n\t\t\t// - when using CSS selectors (e.g. `m(\"[style='']\")`), style is\r\n\t\t\t//   used as a string, but it's an object in js\r\n\t\t\t//\r\n\t\t\t// #348 don't set the value if not needed - otherwise, cursor\r\n\t\t\t// placement breaks in Chrome\r\n\t\t\ttry {\r\n\t\t\t\tif (tag !== \"input\" || node[attrName] !== dataAttr) {\r\n\t\t\t\t\tnode[attrName] = dataAttr\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tnode.setAttribute(attrName, dataAttr)\r\n\t\t\t}\r\n\t\t}\r\n\t\telse node.setAttribute(attrName, dataAttr)\r\n\t}\r\n\r\n\tfunction trySetAttr(\r\n\t\tnode,\r\n\t\tattrName,\r\n\t\tdataAttr,\r\n\t\tcachedAttr,\r\n\t\tcachedAttrs,\r\n\t\ttag,\r\n\t\tnamespace\r\n\t) {\r\n\t\tif (!(attrName in cachedAttrs) || (cachedAttr !== dataAttr)) {\r\n\t\t\tcachedAttrs[attrName] = dataAttr\r\n\t\t\ttry {\r\n\t\t\t\treturn setSingleAttr(\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\tattrName,\r\n\t\t\t\t\tdataAttr,\r\n\t\t\t\t\tcachedAttr,\r\n\t\t\t\t\ttag,\r\n\t\t\t\t\tnamespace)\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// swallow IE's invalid argument errors to mimic HTML's\r\n\t\t\t\t// fallback-to-doing-nothing-on-invalid-attributes behavior\r\n\t\t\t\tif (e.message.indexOf(\"Invalid argument\") < 0) throw e\r\n\t\t\t}\r\n\t\t} else if (attrName === \"value\" && tag === \"input\" &&\r\n\t\t\t\tnode.value !== dataAttr) {\r\n\t\t\t// #348 dataAttr may not be a string, so use loose comparison\r\n\t\t\tnode.value = dataAttr\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setAttributes(node, tag, dataAttrs, cachedAttrs, namespace) {\r\n\t\tfor (var attrName in dataAttrs) if (hasOwn.call(dataAttrs, attrName)) {\r\n\t\t\tif (trySetAttr(\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\tattrName,\r\n\t\t\t\t\tdataAttrs[attrName],\r\n\t\t\t\t\tcachedAttrs[attrName],\r\n\t\t\t\t\tcachedAttrs,\r\n\t\t\t\t\ttag,\r\n\t\t\t\t\tnamespace)) {\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn cachedAttrs\r\n\t}\r\n\r\n\tfunction clear(nodes, cached) {\r\n\t\tfor (var i = nodes.length - 1; i > -1; i--) {\r\n\t\t\tif (nodes[i] && nodes[i].parentNode) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tnodes[i].parentNode.removeChild(nodes[i])\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t/* eslint-disable max-len */\r\n\t\t\t\t\t// ignore if this fails due to order of events (see\r\n\t\t\t\t\t// http://stackoverflow.com/questions/21926083/failed-to-execute-removechild-on-node)\r\n\t\t\t\t\t/* eslint-enable max-len */\r\n\t\t\t\t}\r\n\t\t\t\tcached = [].concat(cached)\r\n\t\t\t\tif (cached[i]) unload(cached[i])\r\n\t\t\t}\r\n\t\t}\r\n\t\t// release memory if nodes is an array. This check should fail if nodes\r\n\t\t// is a NodeList (see loop above)\r\n\t\tif (nodes.length) {\r\n\t\t\tnodes.length = 0\r\n\t\t}\r\n\t}\r\n\r\n\tfunction unload(cached) {\r\n\t\tif (cached.configContext && isFunction(cached.configContext.onunload)) {\r\n\t\t\tcached.configContext.onunload()\r\n\t\t\tcached.configContext.onunload = null\r\n\t\t}\r\n\t\tif (cached.controllers) {\r\n\t\t\tforEach(cached.controllers, function (controller) {\r\n\t\t\t\tif (isFunction(controller.onunload)) {\r\n\t\t\t\t\tcontroller.onunload({preventDefault: noop})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (cached.children) {\r\n\t\t\tif (isArray(cached.children)) forEach(cached.children, unload)\r\n\t\t\telse if (cached.children.tag) unload(cached.children)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction appendTextFragment(parentElement, data) {\r\n\t\ttry {\r\n\t\t\tparentElement.appendChild(\r\n\t\t\t\t$document.createRange().createContextualFragment(data))\r\n\t\t} catch (e) {\r\n\t\t\tparentElement.insertAdjacentHTML(\"beforeend\", data)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction injectHTML(parentElement, index, data) {\r\n\t\tvar nextSibling = parentElement.childNodes[index]\r\n\t\tif (nextSibling) {\r\n\t\t\tvar isElement = nextSibling.nodeType !== 1\r\n\t\t\tvar placeholder = $document.createElement(\"span\")\r\n\t\t\tif (isElement) {\r\n\t\t\t\tparentElement.insertBefore(placeholder, nextSibling || null)\r\n\t\t\t\tplaceholder.insertAdjacentHTML(\"beforebegin\", data)\r\n\t\t\t\tparentElement.removeChild(placeholder)\r\n\t\t\t} else {\r\n\t\t\t\tnextSibling.insertAdjacentHTML(\"beforebegin\", data)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tappendTextFragment(parentElement, data)\r\n\t\t}\r\n\r\n\t\tvar nodes = []\r\n\r\n\t\twhile (parentElement.childNodes[index] !== nextSibling) {\r\n\t\t\tnodes.push(parentElement.childNodes[index])\r\n\t\t\tindex++\r\n\t\t}\r\n\r\n\t\treturn nodes\r\n\t}\r\n\r\n\tfunction autoredraw(callback, object) {\r\n\t\treturn function (e) {\r\n\t\t\te = e || event\r\n\t\t\tm.redraw.strategy(\"diff\")\r\n\t\t\tm.startComputation()\r\n\t\t\ttry {\r\n\t\t\t\treturn callback.call(object, e)\r\n\t\t\t} finally {\r\n\t\t\t\tendFirstComputation()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tvar html\r\n\tvar documentNode = {\r\n\t\tappendChild: function (node) {\r\n\t\t\tif (html === undefined) html = $document.createElement(\"html\")\r\n\t\t\tif ($document.documentElement &&\r\n\t\t\t\t\t$document.documentElement !== node) {\r\n\t\t\t\t$document.replaceChild(node, $document.documentElement)\r\n\t\t\t} else {\r\n\t\t\t\t$document.appendChild(node)\r\n\t\t\t}\r\n\r\n\t\t\tthis.childNodes = $document.childNodes\r\n\t\t},\r\n\r\n\t\tinsertBefore: function (node) {\r\n\t\t\tthis.appendChild(node)\r\n\t\t},\r\n\r\n\t\tchildNodes: []\r\n\t}\r\n\r\n\tvar nodeCache = []\r\n\tvar cellCache = {}\r\n\r\n\tm.render = function (root, cell, forceRecreation) {\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error(\"Ensure the DOM element being passed to \" +\r\n\t\t\t\t\"m.route/m.mount/m.render is not undefined.\")\r\n\t\t}\r\n\t\tvar configs = []\r\n\t\tvar id = getCellCacheKey(root)\r\n\t\tvar isDocumentRoot = root === $document\r\n\t\tvar node\r\n\r\n\t\tif (isDocumentRoot || root === $document.documentElement) {\r\n\t\t\tnode = documentNode\r\n\t\t} else {\r\n\t\t\tnode = root\r\n\t\t}\r\n\r\n\t\tif (isDocumentRoot && cell.tag !== \"html\") {\r\n\t\t\tcell = {tag: \"html\", attrs: {}, children: cell}\r\n\t\t}\r\n\r\n\t\tif (cellCache[id] === undefined) clear(node.childNodes)\r\n\t\tif (forceRecreation === true) reset(root)\r\n\r\n\t\tcellCache[id] = build(\r\n\t\t\tnode,\r\n\t\t\tnull,\r\n\t\t\tundefined,\r\n\t\t\tundefined,\r\n\t\t\tcell,\r\n\t\t\tcellCache[id],\r\n\t\t\tfalse,\r\n\t\t\t0,\r\n\t\t\tnull,\r\n\t\t\tundefined,\r\n\t\t\tconfigs)\r\n\r\n\t\tforEach(configs, function (config) { config() })\r\n\t}\r\n\r\n\tfunction getCellCacheKey(element) {\r\n\t\tvar index = nodeCache.indexOf(element)\r\n\t\treturn index < 0 ? nodeCache.push(element) - 1 : index\r\n\t}\r\n\r\n\tm.trust = function (value) {\r\n\t\tvalue = new String(value) // eslint-disable-line no-new-wrappers\r\n\t\tvalue.$trusted = true\r\n\t\treturn value\r\n\t}\r\n\r\n\tfunction gettersetter(store) {\r\n\t\tfunction prop() {\r\n\t\t\tif (arguments.length) store = arguments[0]\r\n\t\t\treturn store\r\n\t\t}\r\n\r\n\t\tprop.toJSON = function () {\r\n\t\t\treturn store\r\n\t\t}\r\n\r\n\t\treturn prop\r\n\t}\r\n\r\n\tm.prop = function (store) {\r\n\t\tif ((store != null && isObject(store) || isFunction(store)) &&\r\n\t\t\t\tisFunction(store.then)) {\r\n\t\t\treturn propify(store)\r\n\t\t}\r\n\r\n\t\treturn gettersetter(store)\r\n\t}\r\n\r\n\tvar roots = []\r\n\tvar components = []\r\n\tvar controllers = []\r\n\tvar lastRedrawId = null\r\n\tvar lastRedrawCallTime = 0\r\n\tvar computePreRedrawHook = null\r\n\tvar computePostRedrawHook = null\r\n\tvar topComponent\r\n\tvar FRAME_BUDGET = 16 // 60 frames per second = 1 call per 16 ms\r\n\r\n\tfunction parameterize(component, args) {\r\n\t\tfunction controller() {\r\n\t\t\t/* eslint-disable no-invalid-this */\r\n\t\t\treturn (component.controller || noop).apply(this, args) || this\r\n\t\t\t/* eslint-enable no-invalid-this */\r\n\t\t}\r\n\r\n\t\tif (component.controller) {\r\n\t\t\tcontroller.prototype = component.controller.prototype\r\n\t\t}\r\n\r\n\t\tfunction view(ctrl) {\r\n\t\t\tvar currentArgs = [ctrl].concat(args)\r\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\r\n\t\t\t\tcurrentArgs.push(arguments[i])\r\n\t\t\t}\r\n\r\n\t\t\treturn component.view.apply(component, currentArgs)\r\n\t\t}\r\n\r\n\t\tview.$original = component.view\r\n\t\tvar output = {controller: controller, view: view}\r\n\t\tif (args[0] && args[0].key != null) output.attrs = {key: args[0].key}\r\n\t\treturn output\r\n\t}\r\n\r\n\tm.component = function (component) {\r\n\t\tvar args = [].slice.call(arguments, 1)\r\n\r\n\t\treturn parameterize(component, args)\r\n\t}\r\n\r\n\tfunction checkPrevented(component, root, index, isPrevented) {\r\n\t\tif (!isPrevented) {\r\n\t\t\tm.redraw.strategy(\"all\")\r\n\t\t\tm.startComputation()\r\n\t\t\troots[index] = root\r\n\t\t\tvar currentComponent\r\n\r\n\t\t\tif (component) {\r\n\t\t\t\tcurrentComponent = topComponent = component\r\n\t\t\t} else {\r\n\t\t\t\tcurrentComponent = topComponent = component = {controller: noop}\r\n\t\t\t}\r\n\r\n\t\t\tvar controller = new (component.controller || noop)()\r\n\r\n\t\t\t// controllers may call m.mount recursively (via m.route redirects,\r\n\t\t\t// for example)\r\n\t\t\t// this conditional ensures only the last recursive m.mount call is\r\n\t\t\t// applied\r\n\t\t\tif (currentComponent === topComponent) {\r\n\t\t\t\tcontrollers[index] = controller\r\n\t\t\t\tcomponents[index] = component\r\n\t\t\t}\r\n\t\t\tendFirstComputation()\r\n\t\t\tif (component === null) {\r\n\t\t\t\tremoveRootElement(root, index)\r\n\t\t\t}\r\n\t\t\treturn controllers[index]\r\n\t\t} else if (component == null) {\r\n\t\t\tremoveRootElement(root, index)\r\n\t\t}\r\n\t}\r\n\r\n\tm.mount = m.module = function (root, component) {\r\n\t\tif (!root) {\r\n\t\t\tthrow new Error(\"Please ensure the DOM element exists before \" +\r\n\t\t\t\t\"rendering a template into it.\")\r\n\t\t}\r\n\r\n\t\tvar index = roots.indexOf(root)\r\n\t\tif (index < 0) index = roots.length\r\n\r\n\t\tvar isPrevented = false\r\n\t\tvar event = {\r\n\t\t\tpreventDefault: function () {\r\n\t\t\t\tisPrevented = true\r\n\t\t\t\tcomputePreRedrawHook = computePostRedrawHook = null\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tforEach(unloaders, function (unloader) {\r\n\t\t\tunloader.handler.call(unloader.controller, event)\r\n\t\t\tunloader.controller.onunload = null\r\n\t\t})\r\n\r\n\t\tif (isPrevented) {\r\n\t\t\tforEach(unloaders, function (unloader) {\r\n\t\t\t\tunloader.controller.onunload = unloader.handler\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tunloaders = []\r\n\t\t}\r\n\r\n\t\tif (controllers[index] && isFunction(controllers[index].onunload)) {\r\n\t\t\tcontrollers[index].onunload(event)\r\n\t\t}\r\n\r\n\t\treturn checkPrevented(component, root, index, isPrevented)\r\n\t}\r\n\r\n\tfunction removeRootElement(root, index) {\r\n\t\troots.splice(index, 1)\r\n\t\tcontrollers.splice(index, 1)\r\n\t\tcomponents.splice(index, 1)\r\n\t\treset(root)\r\n\t\tnodeCache.splice(getCellCacheKey(root), 1)\r\n\t}\r\n\r\n\tvar redrawing = false\r\n\tm.redraw = function (force) {\r\n\t\tif (redrawing) return\r\n\t\tredrawing = true\r\n\t\tif (force) forcing = true\r\n\r\n\t\ttry {\r\n\t\t\t// lastRedrawId is a positive number if a second redraw is requested\r\n\t\t\t// before the next animation frame\r\n\t\t\t// lastRedrawID is null if it's the first redraw and not an event\r\n\t\t\t// handler\r\n\t\t\tif (lastRedrawId && !force) {\r\n\t\t\t\t// when setTimeout: only reschedule redraw if time between now\r\n\t\t\t\t// and previous redraw is bigger than a frame, otherwise keep\r\n\t\t\t\t// currently scheduled timeout\r\n\t\t\t\t// when rAF: always reschedule redraw\r\n\t\t\t\tif ($requestAnimationFrame === global.requestAnimationFrame ||\r\n\t\t\t\t\t\tnew Date() - lastRedrawCallTime > FRAME_BUDGET) {\r\n\t\t\t\t\tif (lastRedrawId > 0) $cancelAnimationFrame(lastRedrawId)\r\n\t\t\t\t\tlastRedrawId = $requestAnimationFrame(redraw, FRAME_BUDGET)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tredraw()\r\n\t\t\t\tlastRedrawId = $requestAnimationFrame(function () {\r\n\t\t\t\t\tlastRedrawId = null\r\n\t\t\t\t}, FRAME_BUDGET)\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tredrawing = forcing = false\r\n\t\t}\r\n\t}\r\n\r\n\tm.redraw.strategy = m.prop()\r\n\tfunction redraw() {\r\n\t\tif (computePreRedrawHook) {\r\n\t\t\tcomputePreRedrawHook()\r\n\t\t\tcomputePreRedrawHook = null\r\n\t\t}\r\n\t\tforEach(roots, function (root, i) {\r\n\t\t\tvar component = components[i]\r\n\t\t\tif (controllers[i]) {\r\n\t\t\t\tvar args = [controllers[i]]\r\n\t\t\t\tm.render(root,\r\n\t\t\t\t\tcomponent.view ? component.view(controllers[i], args) : \"\")\r\n\t\t\t}\r\n\t\t})\r\n\t\t// after rendering within a routed context, we need to scroll back to\r\n\t\t// the top, and fetch the document title for history.pushState\r\n\t\tif (computePostRedrawHook) {\r\n\t\t\tcomputePostRedrawHook()\r\n\t\t\tcomputePostRedrawHook = null\r\n\t\t}\r\n\t\tlastRedrawId = null\r\n\t\tlastRedrawCallTime = new Date()\r\n\t\tm.redraw.strategy(\"diff\")\r\n\t}\r\n\r\n\tfunction endFirstComputation() {\r\n\t\tif (m.redraw.strategy() === \"none\") {\r\n\t\t\tpendingRequests--\r\n\t\t\tm.redraw.strategy(\"diff\")\r\n\t\t} else {\r\n\t\t\tm.endComputation()\r\n\t\t}\r\n\t}\r\n\r\n\tm.withAttr = function (prop, withAttrCallback, callbackThis) {\r\n\t\treturn function (e) {\r\n\t\t\te = e || event\r\n\t\t\t/* eslint-disable no-invalid-this */\r\n\t\t\tvar currentTarget = e.currentTarget || this\r\n\t\t\tvar _this = callbackThis || this\r\n\t\t\t/* eslint-enable no-invalid-this */\r\n\t\t\tvar target = prop in currentTarget ?\r\n\t\t\t\tcurrentTarget[prop] :\r\n\t\t\t\tcurrentTarget.getAttribute(prop)\r\n\t\t\twithAttrCallback.call(_this, target)\r\n\t\t}\r\n\t}\r\n\r\n\t// routing\r\n\tvar modes = {pathname: \"\", hash: \"#\", search: \"?\"}\r\n\tvar redirect = noop\r\n\tvar isDefaultRoute = false\r\n\tvar routeParams, currentRoute\r\n\r\n\tm.route = function (root, arg1, arg2, vdom) { // eslint-disable-line\r\n\t\t// m.route()\r\n\t\tif (arguments.length === 0) return currentRoute\r\n\t\t// m.route(el, defaultRoute, routes)\r\n\t\tif (arguments.length === 3 && isString(arg1)) {\r\n\t\t\tredirect = function (source) {\r\n\t\t\t\tvar path = currentRoute = normalizeRoute(source)\r\n\t\t\t\tif (!routeByValue(root, arg2, path)) {\r\n\t\t\t\t\tif (isDefaultRoute) {\r\n\t\t\t\t\t\tthrow new Error(\"Ensure the default route matches \" +\r\n\t\t\t\t\t\t\t\"one of the routes defined in m.route\")\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tisDefaultRoute = true\r\n\t\t\t\t\tm.route(arg1, true)\r\n\t\t\t\t\tisDefaultRoute = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar listener = m.route.mode === \"hash\" ?\r\n\t\t\t\t\"onhashchange\" :\r\n\t\t\t\t\"onpopstate\"\r\n\r\n\t\t\tglobal[listener] = function () {\r\n\t\t\t\tvar path = $location[m.route.mode]\r\n\t\t\t\tif (m.route.mode === \"pathname\") path += $location.search\r\n\t\t\t\tif (currentRoute !== normalizeRoute(path)) redirect(path)\r\n\t\t\t}\r\n\r\n\t\t\tcomputePreRedrawHook = setScroll\r\n\t\t\tglobal[listener]()\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// config: m.route\r\n\t\tif (root.addEventListener || root.attachEvent) {\r\n\t\t\tvar base = m.route.mode !== \"pathname\" ? $location.pathname : \"\"\r\n\t\t\troot.href = base + modes[m.route.mode] + vdom.attrs.href\r\n\t\t\tif (root.addEventListener) {\r\n\t\t\t\troot.removeEventListener(\"click\", routeUnobtrusive)\r\n\t\t\t\troot.addEventListener(\"click\", routeUnobtrusive)\r\n\t\t\t} else {\r\n\t\t\t\troot.detachEvent(\"onclick\", routeUnobtrusive)\r\n\t\t\t\troot.attachEvent(\"onclick\", routeUnobtrusive)\r\n\t\t\t}\r\n\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// m.route(route, params, shouldReplaceHistoryEntry)\r\n\t\tif (isString(root)) {\r\n\t\t\tvar oldRoute = currentRoute\r\n\t\t\tcurrentRoute = root\r\n\r\n\t\t\tvar args = arg1 || {}\r\n\t\t\tvar queryIndex = currentRoute.indexOf(\"?\")\r\n\t\t\tvar params\r\n\r\n\t\t\tif (queryIndex > -1) {\r\n\t\t\t\tparams = parseQueryString(currentRoute.slice(queryIndex + 1))\r\n\t\t\t} else {\r\n\t\t\t\tparams = {}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i in args) if (hasOwn.call(args, i)) {\r\n\t\t\t\tparams[i] = args[i]\r\n\t\t\t}\r\n\r\n\t\t\tvar querystring = buildQueryString(params)\r\n\t\t\tvar currentPath\r\n\r\n\t\t\tif (queryIndex > -1) {\r\n\t\t\t\tcurrentPath = currentRoute.slice(0, queryIndex)\r\n\t\t\t} else {\r\n\t\t\t\tcurrentPath = currentRoute\r\n\t\t\t}\r\n\r\n\t\t\tif (querystring) {\r\n\t\t\t\tcurrentRoute = currentPath +\r\n\t\t\t\t\t(currentPath.indexOf(\"?\") === -1 ? \"?\" : \"&\") +\r\n\t\t\t\t\tquerystring\r\n\t\t\t}\r\n\r\n\t\t\tvar replaceHistory =\r\n\t\t\t\t(arguments.length === 3 ? arg2 : arg1) === true ||\r\n\t\t\t\toldRoute === root\r\n\r\n\t\t\tif (global.history.pushState) {\r\n\t\t\t\tvar method = replaceHistory ? \"replaceState\" : \"pushState\"\r\n\t\t\t\tcomputePreRedrawHook = setScroll\r\n\t\t\t\tcomputePostRedrawHook = function () {\r\n\t\t\t\t\tglobal.history[method](null, $document.title,\r\n\t\t\t\t\t\tmodes[m.route.mode] + currentRoute)\r\n\t\t\t\t}\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute)\r\n\t\t\t} else {\r\n\t\t\t\t$location[m.route.mode] = currentRoute\r\n\t\t\t\tredirect(modes[m.route.mode] + currentRoute)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tm.route.param = function (key) {\r\n\t\tif (!routeParams) {\r\n\t\t\tthrow new Error(\"You must call m.route(element, defaultRoute, \" +\r\n\t\t\t\t\"routes) before calling m.route.param()\")\r\n\t\t}\r\n\r\n\t\tif (!key) {\r\n\t\t\treturn routeParams\r\n\t\t}\r\n\r\n\t\treturn routeParams[key]\r\n\t}\r\n\r\n\tm.route.mode = \"search\"\r\n\r\n\tfunction normalizeRoute(route) {\r\n\t\treturn route.slice(modes[m.route.mode].length)\r\n\t}\r\n\r\n\tfunction routeByValue(root, router, path) {\r\n\t\trouteParams = {}\r\n\r\n\t\tvar queryStart = path.indexOf(\"?\")\r\n\t\tif (queryStart !== -1) {\r\n\t\t\trouteParams = parseQueryString(\r\n\t\t\t\tpath.substr(queryStart + 1, path.length))\r\n\t\t\tpath = path.substr(0, queryStart)\r\n\t\t}\r\n\r\n\t\t// Get all routes and check if there's\r\n\t\t// an exact match for the current path\r\n\t\tvar keys = Object.keys(router)\r\n\t\tvar index = keys.indexOf(path)\r\n\r\n\t\tif (index !== -1){\r\n\t\t\tm.mount(root, router[keys [index]])\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\tfor (var route in router) if (hasOwn.call(router, route)) {\r\n\t\t\tif (route === path) {\r\n\t\t\t\tm.mount(root, router[route])\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\r\n\t\t\tvar matcher = new RegExp(\"^\" + route\r\n\t\t\t\t.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\")\r\n\t\t\t\t.replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\r\n\r\n\t\t\tif (matcher.test(path)) {\r\n\t\t\t\t/* eslint-disable no-loop-func */\r\n\t\t\t\tpath.replace(matcher, function () {\r\n\t\t\t\t\tvar keys = route.match(/:[^\\/]+/g) || []\r\n\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\r\n\t\t\t\t\tforEach(keys, function (key, i) {\r\n\t\t\t\t\t\trouteParams[key.replace(/:|\\./g, \"\")] =\r\n\t\t\t\t\t\t\tdecodeURIComponent(values[i])\r\n\t\t\t\t\t})\r\n\t\t\t\t\tm.mount(root, router[route])\r\n\t\t\t\t})\r\n\t\t\t\t/* eslint-enable no-loop-func */\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction routeUnobtrusive(e) {\r\n\t\te = e || event\r\n\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\r\n\r\n\t\tif (e.preventDefault) {\r\n\t\t\te.preventDefault()\r\n\t\t} else {\r\n\t\t\te.returnValue = false\r\n\t\t}\r\n\r\n\t\tvar currentTarget = e.currentTarget || e.srcElement\r\n\t\tvar args\r\n\r\n\t\tif (m.route.mode === \"pathname\" && currentTarget.search) {\r\n\t\t\targs = parseQueryString(currentTarget.search.slice(1))\r\n\t\t} else {\r\n\t\t\targs = {}\r\n\t\t}\r\n\r\n\t\twhile (currentTarget && !/a/i.test(currentTarget.nodeName)) {\r\n\t\t\tcurrentTarget = currentTarget.parentNode\r\n\t\t}\r\n\r\n\t\t// clear pendingRequests because we want an immediate route change\r\n\t\tpendingRequests = 0\r\n\t\tm.route(currentTarget[m.route.mode]\r\n\t\t\t.slice(modes[m.route.mode].length), args)\r\n\t}\r\n\r\n\tfunction setScroll() {\r\n\t\tif (m.route.mode !== \"hash\" && $location.hash) {\r\n\t\t\t$location.hash = $location.hash\r\n\t\t} else {\r\n\t\t\tglobal.scrollTo(0, 0)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction buildQueryString(object, prefix) {\r\n\t\tvar duplicates = {}\r\n\t\tvar str = []\r\n\r\n\t\tfor (var prop in object) if (hasOwn.call(object, prop)) {\r\n\t\t\tvar key = prefix ? prefix + \"[\" + prop + \"]\" : prop\r\n\t\t\tvar value = object[prop]\r\n\r\n\t\t\tif (value === null) {\r\n\t\t\t\tstr.push(encodeURIComponent(key))\r\n\t\t\t} else if (isObject(value)) {\r\n\t\t\t\tstr.push(buildQueryString(value, key))\r\n\t\t\t} else if (isArray(value)) {\r\n\t\t\t\tvar keys = []\r\n\t\t\t\tduplicates[key] = duplicates[key] || {}\r\n\t\t\t\t/* eslint-disable no-loop-func */\r\n\t\t\t\tforEach(value, function (item) {\r\n\t\t\t\t\t/* eslint-enable no-loop-func */\r\n\t\t\t\t\tif (!duplicates[key][item]) {\r\n\t\t\t\t\t\tduplicates[key][item] = true\r\n\t\t\t\t\t\tkeys.push(encodeURIComponent(key) + \"=\" +\r\n\t\t\t\t\t\t\tencodeURIComponent(item))\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tstr.push(keys.join(\"&\"))\r\n\t\t\t} else if (value !== undefined) {\r\n\t\t\t\tstr.push(encodeURIComponent(key) + \"=\" +\r\n\t\t\t\t\tencodeURIComponent(value))\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn str.join(\"&\")\r\n\t}\r\n\r\n\tfunction parseQueryString(str) {\r\n\t\tif (str === \"\" || str == null) return {}\r\n\t\tif (str.charAt(0) === \"?\") str = str.slice(1)\r\n\r\n\t\tvar pairs = str.split(\"&\")\r\n\t\tvar params = {}\r\n\r\n\t\tforEach(pairs, function (string) {\r\n\t\t\tvar pair = string.split(\"=\")\r\n\t\t\tvar key = decodeURIComponent(pair[0])\r\n\t\t\tvar value = pair.length === 2 ? decodeURIComponent(pair[1]) : null\r\n\t\t\tif (params[key] != null) {\r\n\t\t\t\tif (!isArray(params[key])) params[key] = [params[key]]\r\n\t\t\t\tparams[key].push(value)\r\n\t\t\t}\r\n\t\t\telse params[key] = value\r\n\t\t})\r\n\r\n\t\treturn params\r\n\t}\r\n\r\n\tm.route.buildQueryString = buildQueryString\r\n\tm.route.parseQueryString = parseQueryString\r\n\r\n\tfunction reset(root) {\r\n\t\tvar cacheKey = getCellCacheKey(root)\r\n\t\tclear(root.childNodes, cellCache[cacheKey])\r\n\t\tcellCache[cacheKey] = undefined\r\n\t}\r\n\r\n\tm.deferred = function () {\r\n\t\tvar deferred = new Deferred()\r\n\t\tdeferred.promise = propify(deferred.promise)\r\n\t\treturn deferred\r\n\t}\r\n\r\n\tfunction propify(promise, initialValue) {\r\n\t\tvar prop = m.prop(initialValue)\r\n\t\tpromise.then(prop)\r\n\t\tprop.then = function (resolve, reject) {\r\n\t\t\treturn propify(promise.then(resolve, reject), initialValue)\r\n\t\t}\r\n\r\n\t\tprop.catch = prop.then.bind(null, null)\r\n\t\treturn prop\r\n\t}\r\n\t// Promiz.mithril.js | Zolmeister | MIT\r\n\t// a modified version of Promiz.js, which does not conform to Promises/A+\r\n\t// for two reasons:\r\n\t//\r\n\t// 1) `then` callbacks are called synchronously (because setTimeout is too\r\n\t//    slow, and the setImmediate polyfill is too big\r\n\t//\r\n\t// 2) throwing subclasses of Error cause the error to be bubbled up instead\r\n\t//    of triggering rejection (because the spec does not account for the\r\n\t//    important use case of default browser error handling, i.e. message w/\r\n\t//    line number)\r\n\r\n\tvar RESOLVING = 1\r\n\tvar REJECTING = 2\r\n\tvar RESOLVED = 3\r\n\tvar REJECTED = 4\r\n\r\n\tfunction Deferred(onSuccess, onFailure) {\r\n\t\tvar self = this\r\n\t\tvar state = 0\r\n\t\tvar promiseValue = 0\r\n\t\tvar next = []\r\n\r\n\t\tself.promise = {}\r\n\r\n\t\tself.resolve = function (value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value\r\n\t\t\t\tstate = RESOLVING\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\r\n\t\t\treturn self\r\n\t\t}\r\n\r\n\t\tself.reject = function (value) {\r\n\t\t\tif (!state) {\r\n\t\t\t\tpromiseValue = value\r\n\t\t\t\tstate = REJECTING\r\n\r\n\t\t\t\tfire()\r\n\t\t\t}\r\n\r\n\t\t\treturn self\r\n\t\t}\r\n\r\n\t\tself.promise.then = function (onSuccess, onFailure) {\r\n\t\t\tvar deferred = new Deferred(onSuccess, onFailure)\r\n\r\n\t\t\tif (state === RESOLVED) {\r\n\t\t\t\tdeferred.resolve(promiseValue)\r\n\t\t\t} else if (state === REJECTED) {\r\n\t\t\t\tdeferred.reject(promiseValue)\r\n\t\t\t} else {\r\n\t\t\t\tnext.push(deferred)\r\n\t\t\t}\r\n\r\n\t\t\treturn deferred.promise\r\n\t\t}\r\n\r\n\t\tfunction finish(type) {\r\n\t\t\tstate = type || REJECTED\r\n\t\t\tnext.map(function (deferred) {\r\n\t\t\t\tif (state === RESOLVED) {\r\n\t\t\t\t\tdeferred.resolve(promiseValue)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdeferred.reject(promiseValue)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tfunction thennable(then, success, failure, notThennable) {\r\n\t\t\tif (((promiseValue != null && isObject(promiseValue)) ||\r\n\t\t\t\t\tisFunction(promiseValue)) && isFunction(then)) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// count protects against abuse calls from spec checker\r\n\t\t\t\t\tvar count = 0\r\n\t\t\t\t\tthen.call(promiseValue, function (value) {\r\n\t\t\t\t\t\tif (count++) return\r\n\t\t\t\t\t\tpromiseValue = value\r\n\t\t\t\t\t\tsuccess()\r\n\t\t\t\t\t}, function (value) {\r\n\t\t\t\t\t\tif (count++) return\r\n\t\t\t\t\t\tpromiseValue = value\r\n\t\t\t\t\t\tfailure()\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\t\tpromiseValue = e\r\n\t\t\t\t\tfailure()\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnotThennable()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction fire() {\r\n\t\t\t// check if it's a thenable\r\n\t\t\tvar then\r\n\t\t\ttry {\r\n\t\t\t\tthen = promiseValue && promiseValue.then\r\n\t\t\t} catch (e) {\r\n\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\tpromiseValue = e\r\n\t\t\t\tstate = REJECTING\r\n\t\t\t\treturn fire()\r\n\t\t\t}\r\n\r\n\t\t\tif (state === REJECTING) {\r\n\t\t\t\tm.deferred.onerror(promiseValue)\r\n\t\t\t}\r\n\r\n\t\t\tthennable(then, function () {\r\n\t\t\t\tstate = RESOLVING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\tstate = REJECTING\r\n\t\t\t\tfire()\r\n\t\t\t}, function () {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (state === RESOLVING && isFunction(onSuccess)) {\r\n\t\t\t\t\t\tpromiseValue = onSuccess(promiseValue)\r\n\t\t\t\t\t} else if (state === REJECTING && isFunction(onFailure)) {\r\n\t\t\t\t\t\tpromiseValue = onFailure(promiseValue)\r\n\t\t\t\t\t\tstate = RESOLVING\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tm.deferred.onerror(e)\r\n\t\t\t\t\tpromiseValue = e\r\n\t\t\t\t\treturn finish()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (promiseValue === self) {\r\n\t\t\t\t\tpromiseValue = TypeError()\r\n\t\t\t\t\tfinish()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthennable(then, function () {\r\n\t\t\t\t\t\tfinish(RESOLVED)\r\n\t\t\t\t\t}, finish, function () {\r\n\t\t\t\t\t\tfinish(state === RESOLVING && RESOLVED)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tm.deferred.onerror = function (e) {\r\n\t\tif (type.call(e) === \"[object Error]\" &&\r\n\t\t\t\t!/ Error/.test(e.constructor.toString())) {\r\n\t\t\tpendingRequests = 0\r\n\t\t\tthrow e\r\n\t\t}\r\n\t}\r\n\r\n\tm.sync = function (args) {\r\n\t\tvar deferred = m.deferred()\r\n\t\tvar outstanding = args.length\r\n\t\tvar results = new Array(outstanding)\r\n\t\tvar method = \"resolve\"\r\n\r\n\t\tfunction synchronizer(pos, resolved) {\r\n\t\t\treturn function (value) {\r\n\t\t\t\tresults[pos] = value\r\n\t\t\t\tif (!resolved) method = \"reject\"\r\n\t\t\t\tif (--outstanding === 0) {\r\n\t\t\t\t\tdeferred.promise(results)\r\n\t\t\t\t\tdeferred[method](results)\r\n\t\t\t\t}\r\n\t\t\t\treturn value\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (args.length > 0) {\r\n\t\t\tforEach(args, function (arg, i) {\r\n\t\t\t\targ.then(synchronizer(i, true), synchronizer(i, false))\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tdeferred.resolve([])\r\n\t\t}\r\n\r\n\t\treturn deferred.promise\r\n\t}\r\n\r\n\tfunction identity(value) { return value }\r\n\r\n\tfunction handleJsonp(options) {\r\n\t\tvar callbackKey = \"mithril_callback_\" +\r\n\t\t\tnew Date().getTime() + \"_\" +\r\n\t\t\t(Math.round(Math.random() * 1e16)).toString(36)\r\n\r\n\t\tvar script = $document.createElement(\"script\")\r\n\r\n\t\tglobal[callbackKey] = function (resp) {\r\n\t\t\tscript.parentNode.removeChild(script)\r\n\t\t\toptions.onload({\r\n\t\t\t\ttype: \"load\",\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tresponseText: resp\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tglobal[callbackKey] = undefined\r\n\t\t}\r\n\r\n\t\tscript.onerror = function () {\r\n\t\t\tscript.parentNode.removeChild(script)\r\n\r\n\t\t\toptions.onerror({\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tstatus: 500,\r\n\t\t\t\t\tresponseText: JSON.stringify({\r\n\t\t\t\t\t\terror: \"Error making jsonp request\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tglobal[callbackKey] = undefined\r\n\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tscript.onload = function () {\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\tscript.src = options.url +\r\n\t\t\t(options.url.indexOf(\"?\") > 0 ? \"&\" : \"?\") +\r\n\t\t\t(options.callbackKey ? options.callbackKey : \"callback\") +\r\n\t\t\t\"=\" + callbackKey +\r\n\t\t\t\"&\" + buildQueryString(options.data || {})\r\n\r\n\t\t$document.body.appendChild(script)\r\n\t}\r\n\r\n\tfunction createXhr(options) {\r\n\t\tvar xhr = new global.XMLHttpRequest()\r\n\t\txhr.open(options.method, options.url, true, options.user,\r\n\t\t\toptions.password)\r\n\r\n\t\txhr.onreadystatechange = function () {\r\n\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\tif (xhr.status >= 200 && xhr.status < 300) {\r\n\t\t\t\t\toptions.onload({type: \"load\", target: xhr})\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptions.onerror({type: \"error\", target: xhr})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (options.serialize === JSON.stringify &&\r\n\t\t\t\toptions.data &&\r\n\t\t\t\toptions.method !== \"GET\") {\r\n\t\t\txhr.setRequestHeader(\"Content-Type\",\r\n\t\t\t\t\"application/json; charset=utf-8\")\r\n\t\t}\r\n\r\n\t\tif (options.deserialize === JSON.parse) {\r\n\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\r\n\t\t}\r\n\r\n\t\tif (isFunction(options.config)) {\r\n\t\t\tvar maybeXhr = options.config(xhr, options)\r\n\t\t\tif (maybeXhr != null) xhr = maybeXhr\r\n\t\t}\r\n\r\n\t\tvar data = options.method === \"GET\" || !options.data ? \"\" : options.data\r\n\r\n\t\tif (data && !isString(data) && data.constructor !== global.FormData) {\r\n\t\t\tthrow new Error(\"Request data should be either be a string or \" +\r\n\t\t\t\t\"FormData. Check the `serialize` option in `m.request`\")\r\n\t\t}\r\n\r\n\t\txhr.send(data)\r\n\t\treturn xhr\r\n\t}\r\n\r\n\tfunction ajax(options) {\r\n\t\tif (options.dataType && options.dataType.toLowerCase() === \"jsonp\") {\r\n\t\t\treturn handleJsonp(options)\r\n\t\t} else {\r\n\t\t\treturn createXhr(options)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction bindData(options, data, serialize) {\r\n\t\tif (options.method === \"GET\" && options.dataType !== \"jsonp\") {\r\n\t\t\tvar prefix = options.url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\r\n\t\t\tvar querystring = buildQueryString(data)\r\n\t\t\toptions.url += (querystring ? prefix + querystring : \"\")\r\n\t\t} else {\r\n\t\t\toptions.data = serialize(data)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parameterizeUrl(url, data) {\r\n\t\tif (data) {\r\n\t\t\turl = url.replace(/:[a-z]\\w+/gi, function(token){\r\n\t\t\t\tvar key = token.slice(1)\r\n\t\t\t\tvar value = data[key]\r\n\t\t\t\tdelete data[key]\r\n\t\t\t\treturn value\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn url\r\n\t}\r\n\r\n\tm.request = function (options) {\r\n\t\tif (options.background !== true) m.startComputation()\r\n\t\tvar deferred = new Deferred()\r\n\t\tvar isJSONP = options.dataType &&\r\n\t\t\toptions.dataType.toLowerCase() === \"jsonp\"\r\n\r\n\t\tvar serialize, deserialize, extract\r\n\r\n\t\tif (isJSONP) {\r\n\t\t\tserialize = options.serialize =\r\n\t\t\tdeserialize = options.deserialize = identity\r\n\r\n\t\t\textract = function (jsonp) { return jsonp.responseText }\r\n\t\t} else {\r\n\t\t\tserialize = options.serialize = options.serialize || JSON.stringify\r\n\r\n\t\t\tdeserialize = options.deserialize =\r\n\t\t\t\toptions.deserialize || JSON.parse\r\n\t\t\textract = options.extract || function (xhr) {\r\n\t\t\t\tif (xhr.responseText.length || deserialize !== JSON.parse) {\r\n\t\t\t\t\treturn xhr.responseText\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\toptions.method = (options.method || \"GET\").toUpperCase()\r\n\t\toptions.url = parameterizeUrl(options.url, options.data)\r\n\t\tbindData(options, options.data, serialize)\r\n\t\toptions.onload = options.onerror = function (ev) {\r\n\t\t\ttry {\r\n\t\t\t\tev = ev || event\r\n\t\t\t\tvar response = deserialize(extract(ev.target, options))\r\n\t\t\t\tif (ev.type === \"load\") {\r\n\t\t\t\t\tif (options.unwrapSuccess) {\r\n\t\t\t\t\t\tresponse = options.unwrapSuccess(response, ev.target)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isArray(response) && options.type) {\r\n\t\t\t\t\t\tforEach(response, function (res, i) {\r\n\t\t\t\t\t\t\tresponse[i] = new options.type(res)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (options.type) {\r\n\t\t\t\t\t\tresponse = new options.type(response)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeferred.resolve(response)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (options.unwrapError) {\r\n\t\t\t\t\t\tresponse = options.unwrapError(response, ev.target)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeferred.reject(response)\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tdeferred.reject(e)\r\n\t\t\t} finally {\r\n\t\t\t\tif (options.background !== true) m.endComputation()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tajax(options)\r\n\t\tdeferred.promise = propify(deferred.promise, options.initialValue)\r\n\t\treturn deferred.promise\r\n\t}\r\n\r\n\treturn m\r\n})\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mithril/mithril.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 2\n ** module chunks = 0\n **/","// Some of the helper functions require the app instance. Hacky and bad, but for now it'l do\nvar app;\n\nexport function setAppInstance(app_instance) {\n\tapp = app_instance;\n}\n\n\nexport function isAppActive() {\n\tvar is_app_open = (app && app.state('is_open'));\n\tvar is_browser_active = window.document.hasFocus ?\n\t\twindow.document.hasFocus() :\n\t\ttrue;\n\n\treturn is_app_open && is_browser_active;\n}\n\n\nvar nickColour = (function() {\n\tvar cache = Object.create(null);\n\n\tfunction sumCharCodes(total, i) {\n\t\treturn total + i.charCodeAt(0);\n\t}\n\n\treturn function nickColour(nick) {\n\t\tvar nick_lightness, nick_int, rgb;\n\t\tvar cache_key = nick.toLowerCase();\n\n\t\tif (!cache[cache_key]) {\n\t\t\tnick_lightness = 40;\n\t\t\tnick_int = _.reduce(nick.toLowerCase().split(''), sumCharCodes, 0);\n\t\t\trgb = hsl2rgb(nick_int % 200, 70, nick_lightness);\n\n\t\t\tcache[cache_key] = '#' + ('000000' + (rgb[2] | (rgb[1] << 8) | (rgb[0] << 16)).toString(16)).substr(-6);\n\t\t}\n\n\t\treturn cache[cache_key];\n\t};\n})();\nexport { nickColour };\n\n\nexport function hsl2rgb(h, s, l) {\n\tvar m1, m2, hue;\n\tvar r, g, b;\n\ts /= 100;\n\tl /= 100;\n\tif (s == 0) {\n\t\tr = g = b = (l * 255);\n\t} else {\n\t\tif (l <= 0.5) {\n\t\t\tm2 = l * (s + 1);\n\t\t} else {\n\t\t\tm2 = l + s - l * s;\n\t\t}\n\t\tm1 = l * 2 - m2;\n\t\thue = h / 360;\n\t\tr = HueToRgb(m1, m2, hue + 1/3);\n\t\tg = HueToRgb(m1, m2, hue);\n\t\tb = HueToRgb(m1, m2, hue - 1/3);\n\t}\n\n\treturn [r, g, b];\n\n\tfunction HueToRgb(m1, m2, hue) {\n\t\tvar v;\n\t\tif (hue < 0)\n\t\t\thue += 1;\n\t\telse if (hue > 1)\n\t\t\thue -= 1;\n\n\t\tif (6 * hue < 1)\n\t\t\tv = m1 + (m2 - m1) * hue * 6;\n\t\telse if (2 * hue < 1)\n\t\t\tv = m2;\n\t\telse if (3 * hue < 2)\n\t\t\tv = m1 + (m2 - m1) * (2/3 - hue) * 6;\n\t\telse\n\t\t\tv = m1;\n\n\t\treturn 255 * v;\n\t}\n}\n\n\nexport function isInReddit() {\n\treturn !!window.location.host.match(/reddit.com$/i);\n}\n\n\nexport function hasExtension() {\n\treturn app.has_extension;\n}\n\n\nexport function subModule(module, args) {\n\tvar instance = new module.controller(args);\n\treturn {\n\t\tinstance: instance,\n\t\tview: function() {\n\t\t\tvar fn_args = Array.prototype.slice.call(arguments);\n\t\t\treturn module.view.apply(module, [instance, args].concat(fn_args));\n\t\t}\n\t};\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Helpers/Helpers.js\n **/","import './ChatApp.styl';\n\nimport * as Helpers from '../../Helpers/Helpers.js';\n\nimport Sidebar from '../Sidebar/Sidebar.js';\nimport Topbar from '../Topbar/Topbar.js';\nimport HomeView from '../HomeView/HomeView.js';\nimport Settings from '../Settings/Settings.js';\n\nimport Subchat from '../../Services/Subchat.js';\nimport Reddit from '../../Services/Reddit.js';\nimport Transport from '../../Services/Transport.js';\nimport ChannelManager from '../../Services/ChannelManager.js';\nimport ModeratorToolbox from '../../Services/ModeratorToolbox.js';\n\n\n/**\n * Top level application controller\n */\nvar ChatApp = {};\n\nChatApp.controller = function(args) {\n\tHelpers.setAppInstance(this);\n\n\tthis.is_in_reddit = !!window.location.host.match(/reddit.com$/i);\n\tthis.has_extension = args.has_extension;\n\n\tthis.bus = args.bus;\n\tthis.state = args.state;\n\n\tthis.subchat = new Subchat.instance(this.state);\n\tthis.transport = new Transport(this.subchat.sid, this.bus);\n\n\tthis.top_bar = Helpers.subModule(Topbar, {app: this});\n\tthis.side_bar = Helpers.subModule(Sidebar, {app: this});\n\n\t// TODO: .home will be the default homescreen\n\tthis.home = m(HomeView, {app: this});\n\n\t// The active workspace instance. If null, the channel manager will takeover\n\tthis.workspace_instance = null;\n\n\tthis.rooms = new ChannelManager({\n\t\tbus: this.bus,\n\t\ttransport: this.transport\n\t});\n\n\t// The subreddits we are subscribed to\n\tthis.subchat.loadSubreddits();\n\tthis.subreddits = this.subchat.subreddits;\n\tthis.subreddits.refresh = () => {\n\t\tthis.subchat.loadSubreddits(true);\n\t};\n\n\t// Keep note if we have loaded the channels from storage or elsewhere yet\n\tthis.channels_loaded = false;\n\n\tthis.setWorkspace = (instance) => {\n\t\tthis.toggleSidebar(false);\n\t\tthis.workspace_instance = instance;\n\t};\n\n\t// Get the view function for the active room. (generates the DOM structure)\n\tthis.activeWorkspaceView = () => {\n\t\tif (this.workspace_instance) {\n\t\t\treturn this.workspace_instance;\n\t\t}\n\n\t\t// Not logged in? Show the homepage only\n\t\tif (!this.subchat.username()) {\n\t\t\treturn this.home;\n\t\t}\n\n\t\tvar active_room = this.rooms.active();\n\t\treturn active_room ?\n\t\t\tactive_room :\n\t\t\tthis.home;\n\t};\n\n\t// Toggle the app\n\tthis.toggle = () => {\n\t\tthis.state.set('is_open', !this.state('is_open'));\n\t\tthis.bus.trigger('app.toggle', this.state('is_open'));\n\t};\n\n\tthis.toggleSidebar = (should_open) => {\n\t\tif (typeof should_open === 'undefined') {\n\t\t\tshould_open = !this.state('is_sidebar_open');\n\t\t}\n\n\t\tthis.state.set('is_sidebar_open', !!should_open);\n\t\tthis.bus.trigger('app.toggle_sidebar', this.state('is_sidebar_open'));\n\t}\n\n\t// Determine the classes for the app\n\tthis.appClasses = () => {\n\t\tvar classes = 'OC__ui';\n\n\t\tif(!this.state('is_open')) {\n\t\t\tclasses = classes + ' OC__ui--closed ';\n\t\t}\n\n\t\tif(!this.state('is_sidebar_open')) {\n\t\t\tclasses = classes + ' OC__ui--sidebar-collapsed ';\n\t\t}\n\n\t\tif(ModeratorToolbox.isActive()) {\n\t\t\tclasses = classes + ' OC__ui--toolbox ';\n\t\t}\n\n\t\tif (!this.is_in_reddit) {\n\t\t\tclasses = classes + ' OC__ui--standalone';\n\t\t}\n\n\t\tif (!this.subchat.username()) {\n\t\t\tclasses = classes + ' OC__ui--loggedout';\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\t// Once we're ready (logged in, app is ready) then we show the active rooms\n\tthis.addInitialRooms = () => {\n\t\tvar default_channel = '/r/OrangeChat';\n\t\tvar channel_list = this.state.get('channel_list') || [];\n\t\tvar active_channel = this.state.get('active_channel');\n\t\tvar channel_in_url = (!this.is_in_reddit && window.location.hash) ?\n\t\t\twindow.location.hash.substring(1).split(',')[0] :\n\t\t\tnull;\n\n\t\tif (!channel_list.length) {\n\t\t\tthis.rooms.createRoom(default_channel);\n\t\t} else {\n\t\t\t_.each(channel_list, (channel_state) => {\n\t\t\t\t// Upgrade the list of string based channel names from older OC versions to objects\n\t\t\t\tif (typeof channel_state === 'string') {\n\t\t\t\t\tchannel_state = {\n\t\t\t\t\t\tname: channel_state,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tvar channel = this.rooms.createRoom(channel_state.name, {\n\t\t\t\t\tlabel: channel_state.label,\n\t\t\t\t\tread_upto: channel_state.read_upto || 0,\n\t\t\t\t\taccess: channel_state.access,\n\t\t\t\t\tlinked_channels: channel_state.linked_channels\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t//if (Reddit.currentSubreddit()) {\n\t\t//\tthis.rooms.createRoom('/r/' + Reddit.currentSubreddit());\n\t\t//}\n\n\t\t// If we had a channel specified in the URL, make sure it exists and set it as the defualt channel\n\t\tif (channel_in_url) {\n\t\t\tif (!this.rooms.getRoom(channel_in_url)) {\n\t\t\t\tthis.rooms.createRoom(channel_in_url);\n\t\t\t}\n\t\t\tactive_channel = channel_in_url;\n\t\t}\n\n\t\t// If our active channel no longer exists, set the first channel active instead\n\t\tif (!this.rooms.setActive(active_channel || default_channel) === false) {\n\t\t\tthis.rooms.setIndexActive(0);\n\t\t}\n\n\t\tthis.channels_loaded = true;\n\t\tthis.bus.trigger('channels.loaded');\n\t};\n\n\tthis.saveChannelState = (new_channel) => {\n\t\t// Don't save channel state is we haven't got it yet\n\t\tif (!this.channels_loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar channels = _.map(this.rooms.rooms, function(channel) {\n\t\t\treturn {\n\t\t\t\tname: channel.instance.name(),\n\t\t\t\tlabel: channel.instance.label(),\n\t\t\t\tread_upto: channel.instance.read_upto,\n\t\t\t\taccess: channel.instance.access,\n\t\t\t\tlinked_channels: channel.instance.linked_channels\n\t\t\t};\n\t\t});\n\n\t\tthis.state.set('channel_list', channels);\n\t};\n\n\t// Harsh hack to speed up redrawing\n\t// The way the CSS is structured leaves huge white breaks between redraws\n\t// if the height is increased. This forces a redraw to mask it.\n\t// TODO: Have the CSS background colours on the wrapping elemements, not the\n\t// individual content elements\n\twindow.onresize = () => {\n\t\tm.redraw();\n\t};\n\n\t// Keep track of our channels state on a few events\n\tthis.bus.on('channel.created', this.saveChannelState);\n\tthis.bus.on('channel.close', this.saveChannelState);\n\twindow.onunload = this.saveChannelState;\n\n\t// Toggle the app\n\tthis.bus.on('action.toggle_app', this.toggle);\n\n\t// Toggle the sidebar\n\tthis.bus.on('action.toggle_sidebar', this.toggleSidebar);\n\n\tthis.bus.on('action.close_workspace', () => {\n\t\tthis.workspace_instance = null;\n\t\t// Go back to the channel view, with the channel list\n\t\tthis.toggleSidebar(true);\n\t});\n\n\tthis.bus.on('action.show_settings', () => {\n\t\tthis.setWorkspace(Helpers.subModule(Settings, {\n\t\t\tbus: this.bus\n\t\t}));\n\t});\n\n\t// Keep track of the active channel between page refreshes\n\tthis.bus.on('channel.active', (active_channel, previous_channel) => {\n\t\tif (active_channel) {\n\t\t\tthis.state.set('active_channel', active_channel.name());\n\n\t\t\t// Remove any active workspace so this channel can be shown\n\t\t\tthis.workspace_instance = null;\n\t\t}\n\t});\n\n\t// Keep a few components updated when our state changes\n\tthis.bus.on('state.change', (changed, new_value, old_value, values) => {\n\t\t// If our session ID has changed, update the transport so it's in sync\n\t\t// Eg. First logging in, the session ID is not available for the transport. After\n\t\t// logged in and the session is created, the transport is then safe to connect.\n\t\tif (changed === 'sid' && new_value !== old_value) {\n\t\t\tthis.transport.setSessionId(new_value);\n\t\t}\n\n\t\t// The channel list state may have been updated by the extension, so lets\n\t\t// go through it and merge any changes as needed\n\t\tif (changed === 'channel_list') {\n\t\t\tvar channel_list = this.state.get('channel_list') || [];\n\t\t\t// First, remove any channels not in the state\n\t\t\t_.each(this.rooms.rooms, (channel) => {\n\t\t\t\tvar chan_in_state = !!_.find(channel_list, (item) => {\n\t\t\t\t\treturn item.name.toLowerCase() === channel.instance.name().toLowerCase();\n\t\t\t\t});\n\n\t\t\t\tif (!chan_in_state) {\n\t\t\t\t\tthis.rooms.closeRoom(channel.instance.name());\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Now add any new channels\n\t\t\t_.each(channel_list, (channel_state) => {\n\t\t\t\tvar channel = this.rooms.createRoom(channel_state.name, {\n\t\t\t\t\tlabel: channel_state.label,\n\t\t\t\t\tread_upto: channel_state.read_upto || 0,\n\t\t\t\t\taccess: channel_state.access,\n\t\t\t\t\tlinked_channels: channel_state.linked_channels\n\t\t\t\t});\n\n\t\t\t\t// Make sure we have the most recent read_upto value\n\t\t\t\tif (channel.instance.read_upto < channel_state.read_upto) {\n\t\t\t\t\tchannel.instance.read_upto = channel_state.read_upto;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\t// Pipe some messages from transport into relevant bus events\n\tthis.bus.on('transport.message', (message) => {\n\t\tif (message.author && message.target) {\n\t\t\t// Add some user-application specific properties to the message\n\t\t\tif (message.content.match(new RegExp('\\\\b' + this.subchat.username() + '\\\\b', 'i'))) {\n\t\t\t\tmessage.is_highlight = true;\n\t\t\t}\n\n\t\t\tthis.bus.trigger('im.message', message);\n\t\t}\n\n\t\t// Messages sent specifically for this user\n\t\tif (message.type && message.payload) {\n\t\t\tthis.bus.trigger('message.' + message.type, message.payload);\n\t\t}\n\t});\n\tthis.bus.on('transport.groupmeta', (groups) => {\n\t\tthis.bus.trigger('im.meta', groups);\n\t});\n\n\t// Convert some document events into bus events\n\t$(document).on('click', (event) => {\n\t\t// This event comes from outside the mithrill application so we need to handle\n\t\t// the redraw ourselves\n\t\tm.startComputation();\n\t\tthis.bus.trigger('action.document_click', event);\n\t\tm.endComputation();\n\t});\n\n\tif (Helpers.isInReddit()) {\n\t\tReddit.injectUserbarIcon(this, this.bus);\n\t\tReddit.hookOcButtons(this.bus);\n\t}\n\n\t// The ping call will check that we are logged in, but since the mojority of the time\n\t// the user wouldn't have been logged out for no reason then we start by checking the local\n\t// state (subchat.username()) below while the ping call is in progress\n\tthis.subchat.ping().then((user_data) => {\n\t\tif (user_data.just_logged_in) {\n\t\t\tthis.addInitialRooms();\n\t\t}\n\n\t\t// The user channel lets us broadcast+receive data between all of the instances the\n\t\t// user has open. Browser tabs, devices, different browsers, etc.\n\t\tif (user_data.user_channel) {\n\t\t\tthis.transport.join(user_data.user_channel);\n\t\t}\n\n\t\t// Update our existing channels if any differ\n\t\t_.map(user_data.channels, (channel) => {\n\t\t\tvar our_channel = this.rooms.getRoom(channel.name);\n\t\t\t// TODO: Replace the 2 with the ACCESS_TYPE_* constants\n\t\t\tif (!our_channel && channel.access_type === 2) {\n\t\t\t\t// Do we want to add all of our invited channels from other devices/tabs\n\t\t\t\t// to this channel list? Then uncomment below\n\t\t\t\t//our_channel = this.rooms.createRoom(channel.name, {label: channel.label});\n\n\t\t\t}\n\n\t\t\tif (!our_channel) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (channel.type === 3 && channel.access_type === 2 && channel.other_user) {\n\t\t\t\t// Private channels which we have an invite for along with 1 other person (PM) will\n\t\t\t\t// have .other_user as the other persons username\n\t\t\t\tour_channel.instance.label(channel.other_user);\n\n\t\t\t} else if (channel.label !== our_channel.instance.label()) {\n\t\t\t\tour_channel.instance.label(channel.label);\n\t\t\t}\n\t\t});\n\t});\n\n\t// Start checking for the user auth\n\tif (!this.subchat.username()) {\n\t} else {\n\t\t// Add a few channels/rooms\n\t\tthis.addInitialRooms();\n\t}\n};\n\nChatApp.view = function(controller) {\n\tvar content = [\n\t\tcontroller.top_bar.view()\n\t];\n\n\tif (controller.state('is_open')) {\n\t\tcontent.push(m('div[class=\"OC__shadow-underlay\"]', [\n\t\t\tm('div', {class: 'OC__shadow-underlay-inner'})\n\t\t]));\n\n\t\tif(controller.subchat.username()) {\n\t\t\tcontent.push(controller.side_bar.view());\n\t\t}\n\n\t\tcontent.push(m('div', {class: 'OC__workspace'}, [\n\t\t\tcontroller.activeWorkspaceView()\n\t\t]));\n\t}\n\n\treturn m('div', {\n\t\tid: 'chat-inner',\n\t\tclass: controller.appClasses()\n\t}, [\n\t\tcontent\n\t]);\n};\n\nexport default ChatApp;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/ChatApp/ChatApp.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./ChatApp.styl\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./ChatApp.styl\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./ChatApp.styl\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Components/ChatApp/ChatApp.styl\n ** module id = 5\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".OC__ui {\\n  position: fixed;\\n  bottom: 0;\\n  right: 20px;\\n  width: 570px;\\n  height: 360px;\\n  background-color: #fff;\\n  box-shadow: 0 0 28px rgba(0,0,0,0.3);\\n  z-index: 2147483647;\\n  -webkit-transition: width 175ms ease;\\n  transition: width 175ms ease;\\n  overflow: hidden;\\n  -webkit-text-size-adjust: 100%;\\n      -ms-text-size-adjust: 100%;\\n          text-size-adjust: 100%;\\n  -webkit-font-smoothing: subpixel-antialiased;\\n  text-rendering: optimizelegibility;\\n  font-family: \\\"Helvetica Neue\\\", Helvetica, Arial, \\\"Lucida Grande\\\", sans-serif;\\n  font-size: 14px;\\n  color: rgba(0,0,0,0.87);\\n  line-height: 20px;\\n  line-height: 1.428571428571429em;\\n}\\n.OC__ui a {\\n  text-decoration: none;\\n}\\n.OC__ui *,\\n.OC__ui *:before,\\n.OC__ui *:after {\\n  box-sizing: border-box;\\n}\\n.OC__ui--sidebar-collapsed,\\n.OC__ui--loggedout {\\n  width: 350px;\\n}\\n.OC__ui--loggedout {\\n  height: 200px;\\n}\\n.OC__ui--closed {\\n  width: auto;\\n  height: auto;\\n  background-color: #ff5722;\\n}\\n.OC__ui--toolbox {\\n  bottom: 25px;\\n  z-index: 2147483645;\\n}\\n.OC__ui--standalone {\\n  width: 100%;\\n  height: 100%;\\n  right: 0;\\n  box-shadow: none;\\n  -webkit-transition: none;\\n  transition: none;\\n}\\n.OC__shadow-underlay {\\n  overflow: hidden;\\n  position: absolute;\\n  z-index: 79;\\n  left: 0;\\n  top: 10px;\\n  right: 0;\\n  height: 56px;\\n}\\n.OC__shadow-underlay-inner {\\n  position: absolute;\\n  left: 0;\\n  top: -10px;\\n  right: 0;\\n  height: 48px;\\n  box-shadow: 0 2px 4px 0 rgba(0,0,0,0.3);\\n}\\n.OC__workspace {\\n  position: absolute;\\n  width: calc(100% - 220px);\\n  height: 100%;\\n  left: 220px;\\n  top: 0;\\n  background-color: #fff;\\n  -webkit-transition: left 175ms ease, width 175ms ease;\\n  transition: left 175ms ease, width 175ms ease;\\n}\\n.OC__ui--standalone .OC-Sidebar__header-collapse {\\n  -webkit-transform: rotate(180deg);\\n          transform: rotate(180deg);\\n}\\n.OC__ui--loggedout .OC__shadow-underlay {\\n  display: none;\\n}\\n.OC__ui--sidebar-collapsed .OC__workspace,\\n.OC__ui--loggedout .OC__workspace {\\n  left: 0;\\n  width: 100%;\\n}\\n.OC__ui--sidebar-collapsed .OC-MessageRoom__header {\\n  background-color: #ff5722;\\n}\\n.OC__ui--sidebar-collapsed .OC-MessageRoom__header-collapse {\\n  left: 16px;\\n}\\n.OC__ui--sidebar-collapsed .OC-MessageRoom__header-collapse svg {\\n  fill: rgba(255,255,255,0.5);\\n}\\n.OC__ui--sidebar-collapsed .OC-MessageRoom__header-info {\\n  left: 56px;\\n}\\n.OC__ui--sidebar-collapsed .OC-MessageRoom__header-info h4 {\\n  color: #fff;\\n}\\n.OC__ui--sidebar-collapsed .OC-MessageRoom__header-tabs-item svg {\\n  fill: rgba(255,255,255,0.5);\\n}\\n.OC__ui--sidebar-collapsed .OC-MessageRoom__header-tabs-item--active svg {\\n  fill: #fff;\\n}\\n.OC__ui--sidebar-collapsed .OC-MessageRoom__header-info {\\n  color: #fff;\\n}\\n.OC__workspace-content {\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  top: 46px;\\n  overflow-y: auto;\\n  padding: 16px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/stylus-loader!./src/Components/ChatApp/ChatApp.styl\n ** module id = 6\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 7\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 8\n ** module chunks = 0\n **/","import './Sidebar.styl';\n\nimport * as Helpers from '../../Helpers/Helpers.js';\nimport MessageRoom from '../MessageRoom/MessageRoom.js';\nimport Reddit from '../../Services/Reddit.js';\nimport OptionsMenu from '../OptionsMenu/OptionsMenu.js';\n\n\n/**\n * The sidebar UI\n */\nvar Sidebar = {};\n\nSidebar.controller = function(args) {\n\tthis.app = args.app;\n\tthis.mods = m.prop(0);\n\tthis.is_join_dialog_open = false;\n\n\t// When there's a menu to show, this will be it\n\tthis.options_menu = null;\n\n\t// Keep track of the join channel scroll position between renders\n\tthis.join_channels_scrolltop = m.prop(0);\n\tthis.join_channel_input = m.prop('');\n\n\tthis.closeChannel = (channel_name) => {\n\t\tthis.app.rooms.closeRoom(channel_name);\n\t};\n\n\tthis.onOptionsMenuItemClick = (event) => {\n\t\tthis.stopEventPropagation(event);\n\t\tthis.options_menu = Helpers.subModule(OptionsMenu, {\n\t\t\tbus: this.app.bus\n\t\t});\n\t\tthis.options_menu.instance.once('close', () => {\n\t\t\tthis.options_menu = null;\n\t\t});\n\t};\n\n\tthis.openJoinDialog = (event) => {\n\t\tthis.stopEventPropagation(event);\n\t\tthis.is_join_dialog_open = true;\n\n\t\tif (this.app.subreddits().length === 0) {\n\t\t\tthis.app.subreddits.refresh();\n\t\t}\n\n\t\tthis.app.bus.once('action.document_click', this.closeJoinDialog);\n\t};\n\n\tthis.closeJoinDialog = () => {\n\t\tthis.is_join_dialog_open = false;\n\t};\n\n\tthis.joinChannelFormSubmit = (event) => {\n\t\tthis.stopEventPropagation(event);\n\t\tvar sub_name = this.join_channel_input();\n\t\tthis.join_channel_input('');\n\n\t\t// Make sure we actually have characters\n\t\tif ((sub_name||'').replace(/[^a-z0-9]/, '')) {\n\t\t\t// Normalise the /r/ formatting\n\t\t\tif (sub_name.toLowerCase().indexOf('r/') === 0) {\n\t\t\t\tsub_name = '/' + sub_name;\n\t\t\t} else if (sub_name.toLowerCase().indexOf('/r/') !== 0) {\n\t\t\t\tsub_name = '/r/' + sub_name;\n\t\t\t}\n\n\t\t\tvar room = this.app.rooms.createRoom(sub_name);\n\t\t\tthis.app.rooms.setActive(room.instance.name());\n\t\t\tthis.closeJoinDialog();\n\n\t\t\t// Clear the entry box\n\t\t\t$(event.target).find('input').val('');\n\t\t}\n\n\t\t// Make sure the form does not actually submit anywhere\n\t\treturn false;\n\t};\n\n\tthis.stopEventPropagation = (event) => {\n\t\tevent = $.event.fix(event);\n\t\tevent.stopPropagation();\n\t\treturn event;\n\t};\n};\n\nSidebar.view = function(controller) {\n\tvar channels = [];\n\tvar sub_channels = Object.create(null);\n\tvar list = [];\n\n\t// Separate the main channels and their subchannels\n\t_.each(controller.app.rooms.rooms, function(channel) {\n\t\tvar chan = channel.instance;\n\t\tvar parent_chan_name;\n\n\t\t// Main channels don't have a parent\n\t\tif (!chan.linked_channels.parent) {\n\t\t\tchannels.push(channel);\n\t\t} else {\n\t\t\tparent_chan_name = chan.linked_channels.parent.name;\n\t\t\tsub_channels[parent_chan_name] = sub_channels[parent_chan_name] || [];\n\t\t\tsub_channels[parent_chan_name].push(channel);\n\t\t}\n\t});\n\n\t// Add each channel entry to the list, followed by its subchannels\n\t_.each(channels, function(channel, idx) {\n\t\tlist.push(Sidebar.viewChannelListItem(controller, channel));\n\t\t_.each(sub_channels[channel.instance.transportSafeRoomName()], function(channel) {\n\t\t\tlist.push(Sidebar.viewChannelListItem(controller, channel, {\n\t\t\t\tsubchannel: true\n\t\t\t}));\n\t\t});\n\t});\n\n\treturn m('div', {class: !controller.is_join_dialog_open ? 'OC-Sidebar' : 'OC-Sidebar OC-Sidebar--join-dialog-open'}, [\n\t\tm('div', {class: 'OC-Sidebar__header'}, [\n\t\t\tm('form', {class: 'OC-Sidebar__header-search', onsubmit: controller.joinChannelFormSubmit}, [\n\t\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"16\"][height=\"16\"][viewBox=\"0 0 24 24\"]', [\n\t\t\t\t\tm('path[d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"]')\n\t\t\t\t]),\n\t\t\t\tm('input', {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tclass: 'OC-Sidebar__header-search-input',\n\t\t\t\t\tplaceholder: 'r/subreddit',\n\t\t\t\t\tonfocus: controller.openJoinDialog,\n\t\t\t\t\tonclick: controller.stopEventPropagation,\n\t\t\t\t\tonkeyup: m.withAttr('value', controller.join_channel_input)\n\t\t\t\t})\n\t\t\t]),\n\t\t\tcontroller.is_join_dialog_open ? Sidebar.viewJoinDialog(controller) : null,\n\n\t\t\tm('div[class=\"OC-Sidebar__header-user-options\"]', {onclick: controller.onOptionsMenuItemClick}, [\n\t\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"24\"][height=\"24\"][viewBox=\"0 0 24 24\"]', [\n\t\t\t\t\tm('path[d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"]')\n\t\t\t\t])\n\t\t\t]),\n\t\t\tcontroller.options_menu ? controller.options_menu.view() : null\n\t\t]),\n\n\t\tm('ul', {class: controller.app.rooms.rooms.length > 0 ? 'OC-Sidebar__channels' : 'OC-Sidebar__channels OC-Sidebar__channels--no-channels'}, [\n\t\t\t// m('div', {class: 'OC-Sidebar__channels-header'}, [\n\t\t\t// \t// m('a', {class: 'OC-Sidebar__channels-header-branding', href: 'https://orangechat.io', target: '_blank'}, [\n\t\t\t// \t// \tm('img[src=\"https://app.orangechat.io/assets/logo-white.svg\"][width=\"16\"][height=\"16\"][alt=\"orangechat.io\"]')\n\t\t\t// \t// ]),\n\t\t\t// \tm('div', {class: 'OC-Sidebar__channels-header-title'}, [\n\t\t\t// \t\tm('h4', 'Channels')\n\t\t\t// \t]),\n\t\t\t// \tm('ul', {class: 'OC-Sidebar__channels-header-tabs'}, [\n\t\t\t// \t\tm('li', {class: 'OC-Sidebar__channels-header-tabs-item'}, [\n\t\t\t// \t\t\tm('a', {onclick: controller.toggleJoinDialog}, [\n\t\t\t// \t\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"16\"][height=\"16\"][viewBox=\"0 0 320 512\"]', [\n\t\t\t// \t\t\t\t\tm('path[d=\"M192 224v-128h-64v128h-128v64h128v128h64v-128h128v-64h-128z\"]')\n\t\t\t// \t\t\t\t])\n\t\t\t// \t\t\t])\n\t\t\t// \t\t])\n\t\t\t// \t])\n\t\t\t// ]),\n\t\t\tcontroller.app.rooms.rooms.length > 0 ? list : m('p', \"Seems like you're not in any channels.\")\n\t\t]),\n\n\t\t// m('div', {class: 'OC-Sidebar__footer'}, [\n\t\t// \tm('div', {class: 'OC-Sidebar__footer-user'}, [\n\t\t// \t\tm('span', controller.app.subchat.username()),\n\t\t// \t\tm('div', {class: 'OC-Sidebar__footer-user-expand'}, [\n\t\t// \t\t\tm('a', [\n\t\t// \t\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"16\"][height=\"16\"][viewBox=\"0 0 320 512\"]', [\n\t\t// \t\t\t\t\tm('path[d=\"M160 128l-160 160 64 64 96-96 96 96 64-64-160-160z\"]')\n\t\t// \t\t\t\t])\n\t\t// \t\t\t])\n\t\t// \t\t])\n\t\t// \t]),\n\t\t\t// m('ul', {class: 'OC-Sidebar__footer-tabs'}, [\n\t\t\t// \tm('li', {class: 'OC-Sidebar__footer-tabs-item'}, [\n\t\t\t// \t\tm('a', {onclick: controller.toggleJoinDialog}, [\n\t\t\t// \t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"16\"][height=\"16\"][viewBox=\"0 0 320 512\"]', [\n\t\t\t// \t\t\t\tm('path[d=\"M192 224v-128h-64v128h-128v64h128v128h64v-128h128v-64h-128z\"]')\n\t\t\t// \t\t\t]),\n\t\t\t// \t\t\tcontroller.is_join_dialog_open ? Sidebar.viewJoinDialog(controller) : null\n\t\t\t// \t\t])\n\t\t\t// \t])\n\t\t\t// ])\n\t\t\t// m('div', {\n\t\t\t// \tclass: 'OC-Sidebar__footer-settings',\n\t\t\t// \tonclick: controller.onOptionsMenuItemClick\n\t\t\t// }, [\n\t\t\t// \tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"16\"][height=\"16\"][viewBox=\"0 0 768 768\"]', [\n\t\t\t// \t\tm('path[d=\"M384 0q39.75 0 67.875 28.125t28.125 67.875v16.5q11.75 4 28.25 11.5l11.5-11.5q28.25-28.25 68-28.25 39.5 0 67.75 28.25t28.25 67.75q0 39.75-28.25 68l-11.5 11.5q7.5 16.5 11.5 28.25h16.5q39.75 0 67.875 28.125t28.125 67.875-28.125 67.875-67.875 28.125h-16.5q-4 11.75-11.5 28.25l11.5 11.5q28.25 28.25 28.25 68 0 39.5-28.25 67.75t-67.75 28.25q-39.75 0-68-28.25l-11.5-11.5q-16.5 7.5-28.25 11.5v16.5q0 39.75-28.125 67.875t-67.875 28.125-67.875-28.125-28.125-67.875v-16.5q-11.75-4-28.25-11.5l-11.5 11.5q-28.25 28.25-67.75 28.25-39.75 0-67.875-28.25t-28.125-67.75q0-40 28-68l11.5-11.5q-7.5-16.5-11.5-28.25h-16.5q-39.75 0-67.875-28.125t-28.125-67.875 28.125-67.875 67.875-28.125h16.5q4-11.75 11.5-28.25l-11.5-11.5q-28-28-28-68 0-39.5 28.125-67.75t67.875-28.25q39.5 0 67.75 28.25l11.5 11.5q16.5-7.5 28.25-11.5v-16.5q0-39.75 28.125-67.875t67.875-28.125zM384 64q-13.25 0-22.625 9.375t-9.375 22.625v66.25q-56 8-102.25 42.25l-46.75-46.75q-9.5-9.5-22.5-9.5-13.25 0-22.625 9.375t-9.375 22.625q0 13.5 9.25 22.75l46.75 46.75q-34.25 46.25-42.25 102.25h-66.25q-13.25 0-22.625 9.375t-9.375 22.625 9.375 22.625 22.625 9.375h66.25q8 56 42.25 102.25l-46.75 46.75q-9.25 9.25-9.25 22.75 0 13.25 9.375 22.625t22.625 9.375q13 0 22.5-9.5l46.75-46.75q46.25 34.25 102.25 42.25v66.25q0 13.25 9.375 22.625t22.625 9.375 22.625-9.375 9.375-22.625v-66.25q56-8 102.25-42.25l46.75 46.75q9.5 9.5 22.75 9.5t22.625-9.375 9.375-22.625-9.5-22.75l-46.75-46.75q34.25-46.25 42.25-102.25h66.25q13.25 0 22.625-9.375t9.375-22.625-9.375-22.625-22.625-9.375h-66.25q-8-56-42.25-102.25l46.75-46.75q9.5-9.5 9.5-22.75t-9.375-22.625-22.625-9.375-22.75 9.5l-46.75 46.75q-46.25-34.25-102.25-42.25v-66.25q0-13.25-9.375-22.625t-22.625-9.375zM384 256q53 0 90.5 37.5t37.5 90.5-37.5 90.5-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5zM384 320q-26.5 0-45.25 18.75t-18.75 45.25 18.75 45.25 45.25 18.75 45.25-18.75 18.75-45.25-18.75-45.25-45.25-18.75z\"]')\n\t\t\t// \t]),\n\t\t\t// \tcontroller.options_menu ? controller.options_menu.view() : null\n\t\t\t// ])\n\t\t// ]),\n\t]);\n};\n\nSidebar.viewChannelListItem = function(controller, channel, opts) {\n\tvar unread_badge;\n\tvar list_item;\n\tvar item_classes = '';\n\n\topts = opts || {};\n\n\tif (channel.instance.unread_counter > 0) {\n\t\tunread_badge = m('span', {\n\t\t\tclass: 'OC-Sidebar__channels-item-badge',\n\t\t\ttitle: 'Unread messages'\n\t\t}, channel.instance.unread_counter);\n\t}\n\n\titem_classes = 'OC-Sidebar__channels-item';\n\tif (controller.app.rooms.active() === channel) {\n\t\titem_classes += ' OC-Sidebar__channels-item--active';\n\t}\n\tif (opts.subchannel) {\n\t\titem_classes += ' OC-Sidebar__channels-item--sub-channel';\n\t}\n\n\tvar num_users_text = channel.instance.num_users();\n\tnum_users_text = num_users_text === 1 ?\n\t\tnum_users_text + ' person here' :\n\t\tnum_users_text + ' people here';\n\n\tlist_item = m('li', {\n\t\tclass: item_classes,\n\t\tonclick: function() { controller.app.rooms.setActive(channel.instance.name()); }\n\t}, [\n\t\tm('div', {class: 'OC-Sidebar__channels-item-left'}, [\n\t\t\tm('span', {class: 'OC-Sidebar__channels-item-name'}, channel.instance.displayLabel()),\n\t\t\tm('span', {class: 'OC-Sidebar__channels-item-sub-name'}, num_users_text)\n\t\t]),\n\t\tunread_badge,\n\t\tm('svg[class=\"OC-Sidebar__channels-item-close\"][version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"24\"][height=\"24\"][viewBox=\"0 0 24 24\"]', {\n\t\t\tonclick: channel.instance.close\n\t\t}, [\n\t\t\tm('path[d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"]')\n\t\t])\n\t]);\n\n\treturn list_item;\n};\n\nSidebar.viewJoinDialog = function(controller) {\n\tvar subscribed_sub_count = 0;\n\tvar current_search = controller.join_channel_input().toLowerCase();\n\n\tvar subreddit_list = _.map(controller.app.subreddits(), function(sub) {\n\t\tsubscribed_sub_count++;\n\n\t\tvar sub_compare = sub.name.toLowerCase();\n\t\tif (sub_compare.indexOf(current_search.replace('/r/', '')) > -1) {\n\t\t\treturn sub.name;\n\t\t}\n\t});\n\tif (Reddit.currentSubreddit()) {\n\t\tsubreddit_list.unshift('/r/' + Reddit.currentSubreddit());\n\t}\n\tsubreddit_list = _.compact(subreddit_list);\n\n\tsubreddit_list = _.map(subreddit_list, function(sub_name) {\n\t\treturn m('li', {\n\t\t\tclass: 'OC-Sidebar__join-dialog-channels-item',\n\t\t\tonclick: function(event) {\n\t\t\t\tcontroller.stopEventPropagation(event);\n\t\t\t\tvar room = controller.app.rooms.createRoom(sub_name);\n\t\t\t\tcontroller.app.rooms.setActive(room.instance.name());\n\t\t\t\tcontroller.closeJoinDialog();\n\t\t\t}\n\t\t}, sub_name);\n\t});\n\n\tif (!subscribed_sub_count) {\n\t\tsubreddit_list.push(m('div', {class: 'OC-Sidebar__join-dialog-channels-loading'}, [\n\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"30\"][height=\"30\"][viewBox=\"25 25 50 50\"]', [\n\t\t\t\tm('circle[fill=\"none\"][stroke-width=\"4\"][stroke-miterlimit=\"10\"][cx=\"50\"][cy=\"50\"][r=\"20\"]')\n\t\t\t])\n\t\t]));\n\t}\n\n\treturn m('div', {class: 'OC-Sidebar__join-dialog'}, [\n\t\tm('ul', {\n\t\t\tclass: 'OC-Sidebar__join-dialog-channels',\n\t\t\tonscroll: m.withAttr('scrollTop', controller.join_channels_scrolltop),\n\t\t\tconfig: function(el, already_initialised) {\n\t\t\t\tif (already_initialised) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Keep our scroll position when we get redrawn\n\t\t\t\tel.scrollTop = controller.join_channels_scrolltop();\n\t\t\t}\n\t\t}, subreddit_list)\n\t])\n};\n\nexport default Sidebar;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/Sidebar/Sidebar.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Sidebar.styl\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Sidebar.styl\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Sidebar.styl\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Components/Sidebar/Sidebar.styl\n ** module id = 10\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".OC-Sidebar {\\n  width: 220px;\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  height: 100%;\\n  background-color: #ff5722;\\n}\\n.OC-Sidebar__header {\\n  position: absolute;\\n  height: 48px;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  background-color: #ff5722;\\n  z-index: 80;\\n  color: #fff;\\n}\\n.OC-Sidebar__header-search {\\n  padding: 9px 56px 0 16px;\\n  position: relative;\\n  z-index: 101;\\n}\\n.OC-Sidebar__header-search svg {\\n  fill: rgba(255,255,255,0.7);\\n  position: absolute;\\n  top: 16px;\\n  left: 26px;\\n  pointer-events: none;\\n}\\n.OC-Sidebar__header-search-input {\\n  height: 30px;\\n  font-size: 1em;\\n}\\n.OC-Sidebar__header-search input {\\n  display: block;\\n  width: 100%;\\n  border-radius: 3px;\\n  padding-left: 37px;\\n  padding-right: 16px;\\n  border: 0;\\n  color: rgba(255,255,255,0.7);\\n  background-color: rgba(255,255,255,0.25);\\n  position: relative;\\n}\\n.OC-Sidebar__header-search input::-webkit-input-placeholder {\\n  color: rgba(255,255,255,0.7);\\n}\\n.OC-Sidebar__header-search input::-moz-placeholder {\\n  color: rgba(255,255,255,0.7);\\n}\\n.OC-Sidebar__header-search input:-ms-input-placeholder {\\n  color: rgba(255,255,255,0.7);\\n}\\n.OC-Sidebar__header-search input::placeholder {\\n  color: rgba(255,255,255,0.7);\\n}\\n.OC-Sidebar__header-search input:focus {\\n  outline: 0;\\n  color: rgba(0,0,0,0.54);\\n}\\n.OC-Sidebar__header-search input:focus::-webkit-input-placeholder {\\n  color: rgba(0,0,0,0.54);\\n}\\n.OC-Sidebar__header-search input:focus::-moz-placeholder {\\n  color: rgba(0,0,0,0.54);\\n}\\n.OC-Sidebar__header-search input:focus:-ms-input-placeholder {\\n  color: rgba(0,0,0,0.54);\\n}\\n.OC-Sidebar__header-search input:focus::placeholder {\\n  color: rgba(0,0,0,0.54);\\n}\\n.OC-Sidebar__header-user-options {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  width: 24px;\\n  margin: 13px 16px 0 16px;\\n  cursor: pointer;\\n  z-index: 102;\\n}\\n.OC-Sidebar__header-user-options svg {\\n  fill: rgba(255,255,255,0.5);\\n  height: auto;\\n  display: inline-block;\\n}\\n.OC-Sidebar__header-collapse {\\n  position: absolute;\\n  right: 16px;\\n  top: 50%;\\n  margin-top: -12px;\\n  fill: rgba(255,255,255,0.5);\\n  cursor: pointer;\\n  display: inline-block;\\n}\\n.OC-Sidebar--join-dialog-open .OC-Sidebar__header-search svg {\\n  fill: rgba(0,0,0,0.54);\\n}\\n.OC-Sidebar--join-dialog-open .OC-Sidebar__header-search {\\n  opacity: 1;\\n  pointer-events: auto;\\n}\\n.OC-Sidebar--join-dialog-open .OC-Sidebar__header-search-control {\\n  fill: rgba(0,0,0,0.87);\\n  left: 32px;\\n  margin-top: -2px;\\n}\\n.OC-Sidebar__channels {\\n  position: absolute;\\n  top: 48px;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  overflow-y: auto;\\n}\\n.OC-Sidebar__channels--no-channels p {\\n  padding: 10px 16px;\\n  font-size: 1em;\\n  color: rgba(255,255,255,0.5);\\n}\\n.OC-Sidebar__channels-item {\\n  padding: 10px 16px;\\n  cursor: pointer;\\n  position: relative;\\n}\\n.OC-Sidebar__channels-item-name {\\n  font-size: 1em;\\n  display: block;\\n  color: #fff;\\n  font-weight: 500;\\n}\\n.OC-Sidebar__channels-item-sub-name {\\n  font-size: 0.857142857142857em;\\n  color: rgba(255,255,255,0.7);\\n  display: block;\\n}\\n.OC-Sidebar__channels-item-close {\\n  position: absolute;\\n  right: 16px;\\n  top: 50%;\\n  margin-top: -12px;\\n  fill: rgba(255,255,255,0.7);\\n  cursor: pointer;\\n  display: none;\\n  padding: 2px;\\n  border: 1px solid rgba(255,255,255,0.7);\\n  border-radius: 50%;\\n}\\n.OC-Sidebar__channels-item-badge {\\n  display: inline-block;\\n  color: rgba(255,255,255,0.7);\\n  font-size: 0.857142857142857em;\\n  height: 18px;\\n  padding: 0 8px;\\n  border: 1px solid rgba(255,255,255,0.7);\\n  border-radius: 10px;\\n  line-height: 1;\\n  padding-top: 2px;\\n  position: absolute;\\n  right: 16px;\\n  top: 50%;\\n  margin-top: -9px;\\n  text-align: center;\\n}\\n.OC-Sidebar__channels-item:hover {\\n  background-color: #f4511e;\\n}\\n.OC-Sidebar__channels-item:hover .OC-Sidebar__channels-item-close {\\n  display: block;\\n}\\n.OC-Sidebar__channels-item:hover .OC-Sidebar__channels-item-badge {\\n  display: none;\\n}\\n.OC-Sidebar__channels-item--sub-channel {\\n  padding: 10px 16px 10px 32px;\\n  margin-bottom: 8px;\\n}\\n.OC-Sidebar__channels-item--sub-channel .OC-Sidebar__channels-item-name {\\n  font-size: 1em;\\n}\\n.OC-Sidebar__channels-item--sub-channel .OC-Sidebar__channels-item-sub-name {\\n  display: none;\\n}\\n.OC-Sidebar__channels-item--active {\\n  background-color: #e64a19;\\n}\\n.OC-Sidebar__channels-item--active:hover {\\n  background-color: #e64a19;\\n}\\n.OC-Sidebar__join-dialog {\\n  z-index: 101;\\n  display: block;\\n  position: absolute;\\n  z-index: 100;\\n  background-color: #fff;\\n  border-radius: 3px;\\n  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.14), 0 0px 5px 0 rgba(0,0,0,0.12), 0 2px 1px -2px rgba(0,0,0,0.2);\\n  padding: 10px 0;\\n  padding-top: 30px;\\n  left: 16px;\\n  top: 9px;\\n  right: 16px;\\n}\\n.OC-Sidebar__join-dialog-channels {\\n  max-height: 250px;\\n  border-top: 1px solid rgba(0,0,0,0.13);\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n  margin-top: 10px;\\n  padding-top: 10px;\\n}\\n.OC-Sidebar__join-dialog-channels-loading {\\n  position: relative;\\n  margin: 0px auto;\\n  width: 24px;\\n  padding: 10px 0;\\n}\\n.OC-Sidebar__join-dialog-channels-loading:before {\\n  content: '';\\n  display: block;\\n  padding-top: 100%;\\n}\\n.OC-Sidebar__join-dialog-channels-loading svg {\\n  -webkit-animation: rotate 2s linear infinite;\\n          animation: rotate 2s linear infinite;\\n  -webkit-transform-origin: center center;\\n          transform-origin: center center;\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  margin: auto;\\n}\\n.OC-Sidebar__join-dialog-channels-loading svg circle {\\n  stroke-dasharray: 1, 200;\\n  stroke-dashoffset: 0;\\n  -webkit-animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;\\n          animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;\\n  stroke-linecap: round;\\n}\\n.OC-Sidebar__join-dialog-channels-item {\\n  cursor: pointer;\\n  color: rgba(0,0,0,0.87);\\n  font-size: 1em;\\n  padding: 10px 16px;\\n  display: block;\\n}\\n.OC-Sidebar__join-dialog-channels-item:hover {\\n  background-color: rgba(0,0,0,0.04);\\n}\\n@-webkit-keyframes rotate {\\n  100% {\\n    -webkit-transform: rotate(360deg);\\n            transform: rotate(360deg);\\n  }\\n}\\n@keyframes rotate {\\n  100% {\\n    -webkit-transform: rotate(360deg);\\n            transform: rotate(360deg);\\n  }\\n}\\n@-webkit-keyframes dash {\\n  0% {\\n    stroke-dasharray: 1, 200;\\n    stroke-dashoffset: 0;\\n  }\\n  50% {\\n    stroke-dasharray: 89, 200;\\n    stroke-dashoffset: -35px;\\n  }\\n  100% {\\n    stroke-dasharray: 89, 200;\\n    stroke-dashoffset: -124px;\\n  }\\n}\\n@keyframes dash {\\n  0% {\\n    stroke-dasharray: 1, 200;\\n    stroke-dashoffset: 0;\\n  }\\n  50% {\\n    stroke-dasharray: 89, 200;\\n    stroke-dashoffset: -35px;\\n  }\\n  100% {\\n    stroke-dasharray: 89, 200;\\n    stroke-dashoffset: -124px;\\n  }\\n}\\n@-webkit-keyframes color {\\n  100%, 0% {\\n    stroke: #f44336;\\n  }\\n  40% {\\n    stroke: #3f51b5;\\n  }\\n  66% {\\n    stroke: #4caf50;\\n  }\\n  80%, 90% {\\n    stroke: #ffc107;\\n  }\\n}\\n@keyframes color {\\n  100%, 0% {\\n    stroke: #f44336;\\n  }\\n  40% {\\n    stroke: #3f51b5;\\n  }\\n  66% {\\n    stroke: #4caf50;\\n  }\\n  80%, 90% {\\n    stroke: #ffc107;\\n  }\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/stylus-loader!./src/Components/Sidebar/Sidebar.styl\n ** module id = 11\n ** module chunks = 0\n **/","import './MessageRoom.styl';\n\nimport * as Helpers from '../../Helpers/Helpers.js';\n\nimport Reddit from '../../Services/Reddit.js';\nimport Subchat from '../../Services/Subchat.js';\nimport MessageModel from '../Message/Model.js';\nimport Message from '../Message/Message.js';\nimport MessageParser from '../../Services/MessageParser.js';\nimport * as Notifications from '../../Services/Notifications.js';\n\nimport Panel from '../Panel/Panel.js'\nimport UserPanel from '../Panel/Panels/UserPanel.js';\n\nimport GroupSettings from './Views/GroupSettings.js';\n\nvar ACCESS_TYPE_BAN = 1;\nvar ACCESS_TYPE_INVITE = 2;\nvar ACCESS_TYPE_REDDIT_MOD = 3;\n\n/**\n * The message room (channel) UI.\n * Contains thread listing\n */\nvar MessageRoom = {};\n\nMessageRoom.controller = function(args) {\n\tthis.name = m.prop(args.name);\n\tthis.label = m.prop(args.label);\n\tthis.current_message = m.prop('');\n\tthis.num_users = m.prop(0);\n\tthis.known_usernames = m.prop([]);\n\tthis.bus = args.bus;\n\tthis.room_manager = args.room_manager;\n\tthis.subchat = Subchat.instance();\n\tthis.message_parser = new MessageParser(null, this.known_usernames);\n\n\tthis.access = args.access || {\n\t\tis_reddit_mod: false,\n\t\tis_admin: false,\n\t\tis_invite: false\n\t};\n\n\t// Associated channels such as the mod only channel\n\tthis.linked_channels = args.linked_channels || {};\n\n\tthis.is_active = false;\n\tthis.messages = m.prop([\n\t\t//{author: 'prawnsalad', content: 'ello '+this.name()+'! This is my room. There are many like it, but this one is mine.'}\n\t]);\n\n\t// Unread messages\n\tthis.unread_counter = 0;\n\n\t// An unread message mentions us\n\tthis.unread_highlight = false;\n\n\t// Timestamp of the last message we read\n\tthis.read_upto = args.read_upto || 0;\n\n\t// Timestamp of the last message we have received\n\tthis.received_upto = 0;\n\n\t// Keep track of the thread scroll position between renders\n\tthis.thread_scrolltop = m.prop(0);\n\tthis.thread_autoscroll = true;\n\n\t// A component instance that gets rendered instead of the message thread\n\tthis.open_panel = null;\n\n\tthis.transportSafeRoomName = () => {\n\t\treturn this.name().toLowerCase().replace('/r/', 'reddit_sub_');\n\t};\n\n\tthis.displayLabel = () => {\n\t\treturn this.label() || this.name();\n\t};\n\n\tthis.resetCounters = () => {\n\t\tthis.unread_counter = 0;\n\t\tthis.unread_highlight = false;\n\n\t\tvar last_message = _.last(this.messages());\n\t\tif (last_message) {\n\t\t\tthis.read_upto = last_message.data.created;\n\t\t}\n\t};\n\n\t// When we send a message we attach a random ID (match ID) that we can identify as\n\t// it comes back. This lets us add a message to the view before it gets sent for instant\n\t// user feedback and detect it as we see it come back to update our displayed\n\t// version of the message. Each channel gets a random prefix so that we can safely\n\t// use an incrementing counter easily.\n\tthis.generateMessageMatchId = (function() {\n\t\tvar next_id = 0;\n\t\tvar prefix = Math.floor(Math.random() * 100000000000).toString(36);\n\t\treturn function() {\n\t\t\tvar id = next_id++;\n\t\t\treturn prefix + next_id.toString(36);\n\t\t};\n\t})();\n\n\tthis.bus.on('channel.active', (new_channel, old_channel) => {\n\t\tif (new_channel === this) {\n\t\t\tthis.resetCounters();\n\t\t\tthis.thread_autoscroll = true;\n\t\t}\n\t});\n\n\tthis.bus.on('app.toggle', (is_open) => {\n\t\tif (is_open && this.is_active) {\n\t\t\tthis.resetCounters();\n\t\t}\n\t});\n\n\tthis.bus.on('im.message', (message_raw) => {\n\t\tif (message_raw.target !== this.transportSafeRoomName()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar messages = this.messages();\n\n\t\tvar new_message = new MessageModel(message_raw);\n\t\tnew_message.display = this.message_parser.parseAll(new_message);\n\n\t\t// Any messages we send will have a .matchid property only known to us. Check\n\t\t// if we have that matchid in our messages so we don't add it again\n\t\tvar existing_message;\n\t\tif (new_message.matchid) {\n\t\t\texisting_message = _.find(messages, function(message) {\n\t\t\t\treturn message.data.matchid === new_message.matchid;\n\t\t\t});\n\t\t}\n\n\t\t// This message may already exist if we sent it ourselves, so update it\n\t\tif (existing_message) {\n\t\t\texisting_message.data.fromObj(new_message);\n\t\t} else if (new_message.created > this.received_upto) {\n\t\t\t// Only add new messages if they don't appear from the past\n\t\t\tthis.addMessage(new_message);\n\n\t\t\tif (this.known_usernames().indexOf(new_message.author.toLowerCase())  === -1) {\n\t\t\t\tthis.known_usernames().push(new_message.author.toLowerCase());\n\t\t\t}\n\t\t}\n\n\t\tm.redraw();\n\n\t\tvar our_username = this.subchat.username();\n\t\tvar is_our_message = our_username.toLowerCase() === new_message.author.toLowerCase();\n\t\tvar has_focus = Helpers.isAppActive() && this.is_active;\n\n\t\t// We know the time of the last message we read was, so anything before it\n\t\t// is also considered as read\n\t\tif (!is_our_message && !has_focus && new_message.created > this.read_upto) {\n\t\t\tthis.unread_counter++;\n\n\t\t\tif (new_message.content.toLowerCase().indexOf(our_username.toLowerCase()) > -1) {\n\t\t\t\tthis.unread_highlight = true;\n\n\t\t\t\t// We only need the desktop notification if this page is not in focus\n\t\t\t\tif (!Helpers.isAppActive()) {\n\t\t\t\t\tthis.notify('Somebody mentioned you!', new_message.author + ': ' + new_message.content);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Only move our read_upto position forward if this channel is active.\n\t\t// Never move it backwards... that just makes no sense.\n\t\tif (has_focus && new_message.created > this.read_upto) {\n\t\t\tthis.read_upto = new_message.created;\n\t\t}\n\n\t\tthis.received_upto = _.last(messages).data.created;\n\t});\n\n\tthis.bus.on('im.meta', (groups) => {\n\t\tvar this_name = this.transportSafeRoomName().toLowerCase();\n\t\tif (!groups[this_name]) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.num_users(groups[this_name].num_users);\n\t});\n\n\tthis.bus.on('message.chan_access', (message) => {\n\t\tif (message.target !== this.transportSafeRoomName()) {\n\t\t\treturn;\n\t\t}\n\t\tif (message.access === ACCESS_TYPE_REDDIT_MOD) {\n\t\t\tthis.access.is_reddit_mod = true;\n\t\t\tthis.linked_channels.reddit_mod = message.mod_channel;\n\t\t}\n\t\tif (message.access === ACCESS_TYPE_INVITE) {\n\t\t\tthis.access.is_invite = true;\n\t\t}\n\t});\n\n\tthis.bus.on('message.channel.meta', (message) => {\n\t\tvar do_redraw = false;\n\n\t\tif (message.target !== this.transportSafeRoomName()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (message.label) {\n\t\t\tthis.label(message.label);\n\t\t\tdo_redraw = true;\n\t\t}\n\t\tif (message.parent) {\n\t\t\tthis.linked_channels.parent = message.parent;\n\t\t\tdo_redraw = true;\n\t\t}\n\n\t\tif (do_redraw) {\n\t\t\tm.redraw();\n\t\t}\n\t});\n\n\t// If we get banned\n\tthis.bus.on('message.channel.ban', (event) => {\n\t\tif (event.channel_name !== this.transportSafeRoomName()) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar message = new MessageModel({\n\t\t\tauthor: '*',\n\t\t\tcontent: 'You have been banned from this channel! There will be no more channel updates here.'\n\t\t});\n\n\t\tmessage.display = this.message_parser.parseAll(message);\n\t\tthis.addMessage(message);\n\t\tm.redraw();\n\t});\n\n\tthis.notify = (title, body) => {\n\t\tvar notification = Notifications.notify(title, body);\n\t\tif (!notification) {\n\t\t\treturn;\n\t\t}\n\n\t\tnotification.onclick = () => {\n\t\t\t// Some older browsers use .cancel instead of .close\n\t\t\tvar closeFn = (notification.close || notification.cancel || function(){});\n\t\t\tcloseFn.call(notification);\n\n\t\t\tthis.room_manager.setActive(this.name());\n\t\t\twindow.focus();\n\t\t};\n\t}\n\tthis.onFormSubmit = (event) => {\n\t\tevent = $.event.fix(event);\n\t\tevent.preventDefault();\n\n\t\tvar message_type;\n\t\tvar message = this.current_message();\n\t\tif (!message) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Lets keep some IRC users happy... support /me\n\t\tif (message.toLowerCase().indexOf('/me ') === 0) {\n\t\t\tmessage_type = 'action';\n\t\t\tmessage = message.substring(4);\n\t\t}\n\n\t\tthis.sendMessage(message, message_type);\n\t\tthis.current_message('');\n\n\t\t// We only use one way binding for the input box so we need to update the input\n\t\t// manually. Two way binding causes issues with vdom diffing\n\t\t$(event.currentTarget).find('input[type=\"text\"]').val('');\n\n\t\tm.redraw();\n\t};\n\n\tthis.sendMessage = (message_content, message_type) => {\n\t\tvar message = new MessageModel({\n\t\t\tauthor: this.subchat.username(),\n\t\t\tcontent: message_content,\n\t\t\tmatchid: this.generateMessageMatchId(),\n\t\t\tcreated: (new Date()).getTime(),\n\t\t\ttype: message_type\n\t\t});\n\n\t\tmessage.display = this.message_parser.parseAll(message);\n\t\tthis.addMessage(message);\nif (message_content.indexOf('fail') > -1) {\n\tmessage.error = 'There was an error sending this message :(';\n\tmessage.retry = false;\n}\n\t\treturn m.request({\n\t\t\tmethod: 'POST',\n\t\t\turl: this.subchat.apiUrl('/send'),\n\t\t\tdata: {\n\t\t\t\ttarget: this.transportSafeRoomName(),\n\t\t\t\tcontent: message_content,\n\t\t\t\tmatchid: message.matchid,\n\t\t\t\ttype: message_type\n\t\t\t}\n\t\t}).then(function(api_response) {\n\t\t\tif (api_response.status !== 'ok') {\n\t\t\t\t// TODO: Message failed to send so add a .error property to the\n\t\t\t\t// message so that the view can show it didn't send.\n\t\t\t\tvar err_map = {\n\t\t\t\t\t'requires_auth': 'You must be logged in to send a message here',\n\t\t\t\t\t'not_allowed': 'You do not have permission to send messages here'\n\t\t\t\t};\n\n\t\t\t\tmessage.error = err_map[api_response.error] || 'There was an error sending this message :(';\n\t\t\t\tif (err_map[api_response.error]) {\n\t\t\t\t\tmessage.retry = true;\n\t\t\t\t} else {\n\t\t\t\t\tmessage.retry = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}).catch(function(err) {\n\t\t\t// TODO: Message failed to send so add a .error property to the\n\t\t\t// message so that the view can show it didn't send.\n\t\t\tmessage.error = 'There was an error sending this message :(';\n\t\t\tmessage.retry = false;\n\t\t});\n\t};\n\n\tthis.openChat = () => {\n\t\tthis.open_panel = null;\n\t};\n\n\tthis.openGroupSettings = () => {\n\t\tthis.open_panel = Helpers.subModule(GroupSettings, {\n\t\t\tbus: this.bus,\n\t\t\troom: this,\n\t\t\troom_manager: this.room_manager\n\t\t});\n\t};\n\n\tthis.openUserPanel = (event, username, opts) => {\n\t\tthis.bus.trigger('panel.open', event, Helpers.subModule(UserPanel, {\n\t\t\tbus: this.bus,\n\t\t\tusername: username,\n\t\t\tsource: opts.source,\n\t\t\troom: this,\n\t\t\troom_manager: this.room_manager\n\t\t}));\n\t};\n\n\t// this.openGroupPanel = () => {\n\t// \tthis.bus.trigger('panel.open', Helpers.subModule(GroupPanel, {\n\t// \t\tbus: this.bus,\n\t// \t\troom: this,\n\t// \t\troom_manager: this.room_manager\n\t// \t}));\n\t// };\n\n\t// this.bus.on('panel.opened', () => {\n\t// \tthis.isPanelOpen = true;\n\t// });\n\n\t// this.bus.on('panel.closed', () => {\n\t// \tthis.isPanelOpen = false;\n\t// });\n\n\tthis.close = () => {\n\t\tthis.room_manager.closeRoom(this.name());\n\t};\n\n\tthis.toggleApp = () => {\n\t\tthis.bus.trigger('action.toggle_app');\n\t};\n\n\tthis.addMessage = (message_model) => {\n\t\tvar max_messages = 200;\n\n\t\tvar component = Helpers.subModule(Message, {\n\t\t\tmessage: message_model,\n\t\t\tmessage_room: this\n\t\t});\n\n\t\tvar message = {\n\t\t\tdata: message_model,\n\t\t\tview: component.view\n\t\t};\n\n\t\tvar messages = this.messages();\n\t\tmessages.push(message);\n\n\t\t// Keep our thread pruned to a suitable number so not to balloon memory usage\n\t\tif (messages.length > max_messages) {\n\t\t\tthis.messages(messages.slice(messages.length - max_messages));\n\t\t}\n\n\t\treturn message;\n\t};\n\n\tthis.toggleSidebar = () => {\n\t\tthis.bus.trigger('action.toggle_sidebar');\n\t};\n\n\tthis.is_options_overlay_open = false;\n\n\tthis.openOptionsOverlay = (event) => {\n\t\tevent = $.event.fix(event);\n\t\tevent.stopPropagation();\n\n\t\tthis.is_options_overlay_open = true;\n\n\t\targs.bus.once('action.document_click', () => {\n\t\t\tthis.closeOptionsOverlay();\n\t\t});\n\t};\n\n\tthis.closeOptionsOverlay = () => {\n\t\tthis.is_options_overlay_open = false;\n\t};\n\n\tthis.joinModChannel = (event) => {\n\t\tevent = $.event.fix(event);\n\t\tevent.stopPropagation();\n\n\t\tif (!this.access.is_reddit_mod) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.linked_channels.reddit_mod) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar channel = this.room_manager.createRoom(this.linked_channels.reddit_mod);\n\t\tthis.room_manager.setActive(channel.instance.name());\n\t};\n};\n\nMessageRoom.view = function(controller) {\n\tvar header = MessageRoom.viewHeader(controller);\n\n\tvar room_content = [];\n\n\troom_content.push(m(Panel, {\n\t\tbus: controller.bus\n\t}));\n\n\tif(!controller.open_panel) {\n\t\troom_content.push(MessageRoom.viewChat(controller));\n\t} else {\n\t\troom_content.push(controller.open_panel.view());\n\t}\n\n\treturn m('div', {class: 'OC-MessageRoom'}, [\n\t\theader,\n\t\troom_content\n\t]);\n};\n\nMessageRoom.viewChat = function(controller) {\n\t// TODO: Only render the last X messages\n\tvar thread_style = Helpers.isInReddit() ? 'inline' : 'block';\n\tvar thread_items = [];\n\tvar last_message = null;\n\tvar mins_20 = 60 * 20 * 1000;\n\n\t_.each(controller.messages(), function(message, idx, list) {\n\t\tif (thread_style === 'inline') {\n\t\t\t// Show the message time if it's the first or there was a gap of 20mins\n\t\t\t// since the last message\n\t\t\tif (!last_message || message.data.created - last_message.data.created > mins_20) {\n\t\t\t\tthread_items.push(m('div', {class: 'OC-MessageRoom__thread--time-separator'}, [\n\t\t\t\t\tm.trust(message.data.display.created_short)\n\t\t\t\t]));\n\t\t\t}\n\t\t}\n\n\t\tthread_items.push(message.view({\n\t\t\tstyle: thread_style,\n\t\t\tthread: list,\n\t\t\tmessage_idx: idx\n\t\t}));\n\n\t\tlast_message = message;\n\t});\n\n\tif (thread_items.length === 0) {\n\t\tthread_items.push(m('div', {class: 'OC-MessageRoom__no-messages'}, 'No messages here recently... :('));\n\t}\n\n\treturn [\n\t\tm('ul', {\n\t\t\tclass: 'OC-MessageRoom__thread',\n\t\t\tonscroll: function() {\n\t\t\t\tvar rect = this.getBoundingClientRect();\n\n\t\t\t\t// Scrolled to the bottom with a margin of 20px = autoscroll\n\t\t\t\tif (this.scrollTop + rect.height > this.scrollHeight - 20) {\n\t\t\t\t\tcontroller.thread_autoscroll = true;\n\t\t\t\t} else {\n\t\t\t\t\tcontroller.thread_autoscroll = false;\n\t\t\t\t}\n\n\t\t\t\tcontroller.thread_scrolltop(this.scrollTop);\n\n\t\t\t\t// We don't need to redraw on every scroll event\n\t\t\t\tm.redraw.strategy('none');\n\t\t\t},\n\t\t\tconfig: function(el, already_initialised) {\n\t\t\t\tif (controller.thread_autoscroll) {\n\t\t\t\t\tel.scrollTop = el.scrollHeight;\n\t\t\t\t}\n\n\t\t\t\t// Only set the scroll position when the element is first being initialised/created\n\t\t\t\tif (!already_initialised && !controller.thread_autoscroll) {\n\t\t\t\t\tel.scrollTop = controller.thread_scrolltop();\n\t\t\t\t}\n\t\t\t}\n\t\t}, thread_items),\n\t\tm('form', {class: 'OC-MessageRoom__footer', onsubmit: controller.onFormSubmit.bind(controller)}, [\n\t\t\t// controller.access.is_reddit_mod ? m('div', {\n\t\t\t// \tclass: 'OC-MessageRoom__mod-info',\n\t\t\t// \tonclick: controller.joinModChannel\n\t\t\t// }, [\n\t\t\t// \tm('a', 'Join the moderator channel')\n\t\t\t// ]) : null,\n\t\t\tm('input', {\n\t\t\t\ttype: 'text',\n\t\t\t\tplaceholder: 'send a message',\n\t\t\t\tmaxlength: '1000',\n\t\t\t\tonkeyup: m.withAttr('value', controller.current_message)\n\t\t\t}),\n\t\t\tm('button[type=\"submit\"]', [\n\t\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"24\"][height=\"24\"][viewBox=\"0 0 24 24\"]', [\n\t\t\t\t\tm('path[d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"]')\n\t\t\t\t])\n\t\t\t])\n\t\t\t// m('div', {\n\t\t\t// \tclass: 'OC-MessageRoom__footer-options',\n\t\t\t// \tonclick: controller.openOptionsOverlay\n\t\t\t// }, [\n\t\t\t// \tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"24\"][height=\"24\"][viewBox=\"0 0 24 24\"]', [\n\t\t\t// \t\tm('path[d=\"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z\"]')\n\t\t\t// \t]),\n\t\t\t// ])\n\t\t])\n\t];\n};\n\nMessageRoom.viewHeader = function(controller) {\n\tvar tabs = [];\n\tvar title = '';\n\tvar parent_channel;\n\n\tif (controller.access.is_invite) {\n\t\ttabs.push(\n\t\t\tm('li', {\n\t\t\t\tclass: controller.open_panel ? 'OC-MessageRoom__header-tabs-item OC-MessageRoom__header-tabs-item--active' : 'OC-MessageRoom__header-tabs-item',\n\t\t\t\tonclick: controller.openGroupSettings\n\t\t\t}, [\n\t\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"24\"][height=\"24\"][viewBox=\"0 0 24 24\"]', [\n\t\t\t\t\tm('path[d=\"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z\"]')\n\t\t\t\t])\n\t\t\t])\n\t\t);\n\t}\n\n\tif(tabs.length > 0) {\n\t\ttabs.unshift(\n\t\t\tm('li', {\n\t\t\t\tclass: !controller.open_panel ? 'OC-MessageRoom__header-tabs-item OC-MessageRoom__header-tabs-item--active' : 'OC-MessageRoom__header-tabs-item',\n\t\t\t\tonclick: controller.openChat\n\t\t\t}, [\n\t\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"24\"][height=\"24\"][viewBox=\"0 0 24 24\"]', [\n\t\t\t\t\tm('path[d=\"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z\"]')\n\t\t\t\t])\n\t\t\t])\n\t\t);\n\t}\n\n\tif(controller.access.is_reddit_mod) {\n\t\ttabs.push(\n\t\t\tm('li', {\n\t\t\t\tclass: 'OC-MessageRoom__header-tabs-item',\n\t\t\t\tonclick: controller.joinModChannel,\n\t\t\t\ttitle: 'Join the mod channel'\n\t\t\t}, [\n\t\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"24\"][height=\"24\"][viewBox=\"0 0 24 24\"]', [\n\t\t\t\t\tm('path[d=\"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z\"]')\n\t\t\t\t])\n\t\t\t])\n\t\t);\n\t}\n\n\ttitle = controller.displayLabel();\n\tif (controller.linked_channels.parent) {\n\t\tparent_channel = controller.room_manager.getRoom(controller.linked_channels.parent.name);\n\t\tif (parent_channel) {\n\t\t\ttitle = parent_channel.instance.displayLabel() + ' - ' + title;\n\t\t}\n\t}\n\n\treturn m('div', {class: 'OC-MessageRoom__header'}, [\n\t\tm('div', {class: 'OC-MessageRoom__header-collapse', title: 'Toggle sidebar', onclick: controller.toggleSidebar}, [\n\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"24\"][height=\"24\"][viewBox=\"0 0 24 24\"]', [\n\t\t\t\tm('path[d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"]')\n\t\t\t])\n\t\t]),\n\t\tm('div', {class: 'OC-MessageRoom__header-info', onclick: Helpers.isInReddit() ? controller.toggleApp : null}, [\n\t\t\tm('h4', title)\n\t\t]),\n\t\tm('ul', {class: 'OC-MessageRoom__header-tabs'}, tabs)\n\t]);\n};\n\nexport default MessageRoom;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/MessageRoom/MessageRoom.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./MessageRoom.styl\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./MessageRoom.styl\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./MessageRoom.styl\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Components/MessageRoom/MessageRoom.styl\n ** module id = 13\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".OC-MessageRoom {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  height: 100%;\\n  width: 100%;\\n}\\n.OC-MessageRoom__header {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  height: 48px;\\n  background-color: #fff;\\n  overflow: hidden;\\n  z-index: 80;\\n}\\n.OC-MessageRoom__header-collapse {\\n  position: absolute;\\n  left: 16px;\\n  top: 50%;\\n  margin-top: -12px;\\n  cursor: pointer;\\n  -webkit-transition: left 175ms ease;\\n  transition: left 175ms ease;\\n}\\n.OC-MessageRoom__header-collapse svg {\\n  fill: rgba(0,0,0,0.54);\\n  display: inline-block;\\n  vertical-align: middle;\\n}\\n.OC-MessageRoom__header-info {\\n  position: absolute;\\n  left: 56px;\\n  top: 50%;\\n  margin-top: -7px;\\n  -webkit-transition: left 175ms ease;\\n  transition: left 175ms ease;\\n  cursor: pointer;\\n}\\n.OC-MessageRoom__header-info h4 {\\n  font-size: 1.071428571428571em;\\n  line-height: 1;\\n  display: block;\\n  font-weight: 500;\\n}\\n.OC-MessageRoom__header-tabs {\\n  position: absolute;\\n  top: 50%;\\n  margin-top: -12px;\\n  right: 0;\\n}\\n.OC-MessageRoom__header-tabs-item {\\n  display: inline-block;\\n  cursor: pointer;\\n  margin-right: 16px;\\n}\\n.OC-MessageRoom__header-tabs-item svg {\\n  fill: rgba(0,0,0,0.38);\\n  display: inline-block;\\n  vertical-align: middle;\\n}\\n.OC-MessageRoom__header-tabs-item--active svg {\\n  fill: rgba(0,0,0,0.54);\\n}\\n.OC-MessageRoom__no-messages {\\n  padding: 10px 16px;\\n  font-weight: 500;\\n  color: rgba(0,0,0,0.38);\\n}\\n.OC-MessageRoom__group-settings {\\n  position: absolute;\\n  padding: 10px 16px;\\n  top: 48px;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n.OC-MessageRoom__group-settings-section {\\n  margin-bottom: 10px;\\n  position: relative;\\n}\\n.OC-MessageRoom__group-settings-section label {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  color: rgba(0,0,0,0.38);\\n  font-size: 0.857142857142857em;\\n  -webkit-transition: color 175ms ease;\\n  transition: color 175ms ease;\\n}\\n.OC-MessageRoom__group-settings-section button {\\n  border: 0;\\n  background-color: transparent;\\n  display: block;\\n  position: absolute;\\n  right: 0;\\n  bottom: 4px;\\n}\\n.OC-MessageRoom__group-settings-section button svg {\\n  fill: rgba(0,0,0,0.38);\\n  display: block;\\n}\\n.OC-MessageRoom__group-settings-section input {\\n  border: 0;\\n  border-bottom: 1px solid rgba(0,0,0,0.13);\\n  padding: 25px 0 10px 0;\\n  font-size: 1em;\\n  display: block;\\n  width: 100%;\\n  margin: 0 0 10px 0;\\n  -webkit-transition: border-color 175ms ease;\\n  transition: border-color 175ms ease;\\n}\\n.OC-MessageRoom__group-settings-section input:focus {\\n  outline: 0;\\n  border-color: #ff5722;\\n}\\n.OC-MessageRoom__group-settings-section input:focus ~ label {\\n  color: #ff5722;\\n}\\n.OC-MessageRoom__group-settings-section input:focus ~ button svg {\\n  fill: #ff5722;\\n}\\n.OC-MessageRoom__group-settings-section input::-webkit-input-placeholder {\\n  color: rgba(0,0,0,0.54);\\n}\\n.OC-MessageRoom__group-settings-section input::-moz-placeholder {\\n  color: rgba(0,0,0,0.54);\\n}\\n.OC-MessageRoom__group-settings-section input:-ms-input-placeholder {\\n  color: rgba(0,0,0,0.54);\\n}\\n.OC-MessageRoom__group-settings-section input::placeholder {\\n  color: rgba(0,0,0,0.54);\\n}\\n.OC-MessageRoom__thread {\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  bottom: 55px;\\n  top: 48px;\\n  overflow-y: auto;\\n}\\n.OC-MessageRoom__thread--time-separator {\\n  text-align: center;\\n  font-size: 0.8em;\\n  font-weight: bold;\\n  font-style: italic;\\n  margin: 6px;\\n  color: rgba(0,0,0,0.54);\\n}\\n.OC-MessageRoom__footer {\\n  background-color: rgba(0,0,0,0.06);\\n  border-top: 1px solid rgba(0,0,0,0.13);\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  height: 55px;\\n}\\n.OC-MessageRoom__footer button {\\n  border: 0;\\n  background-color: transparent;\\n  display: block;\\n  position: absolute;\\n  right: 32px;\\n  top: 50%;\\n  margin: 0;\\n  margin-top: -12px;\\n  padding: 0;\\n  box-shadow: none;\\n  height: auto;\\n}\\n.OC-MessageRoom__footer button svg {\\n  fill: rgba(0,0,0,0.38);\\n  display: block;\\n}\\n.OC-MessageRoom__footer input {\\n  position: absolute;\\n  top: 50%;\\n  margin-top: -17px;\\n  left: 16px;\\n  width: calc(100% - 2 * 16px);\\n  border: 0;\\n  border: 2px solid rgba(0,0,0,0.13);\\n  padding: 0 56px 0 16px;\\n  height: 34px;\\n  font-size: 1em;\\n  display: block;\\n  border-radius: 3px;\\n}\\n.OC-MessageRoom__footer input:focus {\\n  outline: 0;\\n}\\n.OC-MessageRoom__footer input:focus ~ button svg {\\n  fill: #ff5722;\\n}\\n.OC-MessageRoom__footer input::-webkit-input-placeholder {\\n  color: rgba(0,0,0,0.38);\\n}\\n.OC-MessageRoom__footer input::-moz-placeholder {\\n  color: rgba(0,0,0,0.38);\\n}\\n.OC-MessageRoom__footer input:-ms-input-placeholder {\\n  color: rgba(0,0,0,0.38);\\n}\\n.OC-MessageRoom__footer input::placeholder {\\n  color: rgba(0,0,0,0.38);\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/stylus-loader!./src/Components/MessageRoom/MessageRoom.styl\n ** module id = 14\n ** module chunks = 0\n **/","/**\n * Hacky API to get reddit.com info while embedded into reddit.com\n * TODO: This should be moved into the backend via oauth\n */\nvar Reddit = {};\n\nReddit.isLoggedIn = function() {\n\treturn $('.user > a').attr('class') !== 'login-required';\n};\n\nReddit.username = (function() {\n\tvar username = $('.user > a').text();\n\treturn function() {\n\t\treturn username;\n\t}\n})();\n\nReddit.currentSubreddit = function() {\n\treturn $('.redditname:first a').text();\n};\n\nReddit.subreddits = function() {\n\tvar subreddits = m.prop([]);\n\n\t$.getJSON('/subreddits/mine.json', (response) => {\n\t\tvar new_subreddits = [];\n\t\tif (!response || !response.data) {\n\t\t\treturn;\n\t\t}\n\n\t\t$.each(response.data.children, (idx, item) => {\n\t\t\tnew_subreddits.push({\n\t\t\t\tname: '/r/' + item.data.display_name,\n\t\t\t\tshort_name: item.data.display_name\n\t\t\t});\n\t\t});\n\n\t\tnew_subreddits = _.sortBy(new_subreddits, (sub) => {\n\t\t\treturn sub.name.toLowerCase();\n\t\t});\n\n\t\tsubreddits(new_subreddits);\n\t\tm.redraw();\n\n\t}).fail(function() {\n\t});\n\n\treturn subreddits;\n};\n\nReddit.injectUserbarIcon = function(app, bus) {\n\t// Get the preferences link as we want to inject just before that\n\tvar $preferences = $('#header-bottom-right a.pref-lang').parents('.flat-list:first');\n\tvar $sep = $('<span class=\"separator\">|</span>');\n\tvar $icon = $('<a title=\"OrangeChat\" href=\"#\" class=\"ChatApp__reddit-icon\" style=\"top:1px;position:relative;font-size:1.2em;\">im</a>');\n\n\t$sep.insertBefore($preferences);\n\t$icon.insertBefore($sep);\n\n\t$icon.on('click', (event) => {\n\t\tevent.preventDefault();\n\t\tapp.toggle();\n\t\t// Mithril won't detect the redraw as the icon is outside of the app\n\t\tm.redraw();\n\t});\n\n\tvar alert_level = 0;\n\tfunction setAlertLevel(level) {\n\t\tif (level > alert_level) {\n\t\t\talert_level = level;\n\t\t\tsetIconStyles();\n\t\t}\n\t}\n\tfunction resetAlerts() {\n\t\talert_level = 0;\n\t\tsetIconStyles();\n\t}\n\tfunction setIconStyles() {\n\t\tif (alert_level === 0) {\n\t\t\t$icon.css({\n\t\t\t\t'font-weight': 'normal',\n\t\t\t\t'color': ''\n\t\t\t});\n\t\t} else if (alert_level === 1) {\n\t\t\t$icon.css({\n\t\t\t\t'font-weight': 'bold',\n\t\t\t\t'color': ''\n\t\t\t});\n\t\t} else if (alert_level === 2) {\n\t\t\t$icon.css({\n\t\t\t\t'font-weight': 'bold',\n\t\t\t\t'color': 'orangered'\n\t\t\t});\n\t\t}\n\t}\n\n\tbus.on('im.message', (message) => {\n\t\tif (window.document.hasFocus && window.document.hasFocus() && app.state('is_open')) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetAlertLevel(1);\n\t\tif (message.content.toLowerCase().indexOf(Reddit.username().toLowerCase()) > -1) {\n\t\t\tsetAlertLevel(2);\n\t\t}\n\t});\n\n\tbus.on('app.toggle', (is_open) => {\n\t\tif (is_open) {\n\t\t\tresetAlerts();\n\t\t}\n\t});\n\n\tbus.on('channel.active', (channel) => {\n\t\t// Consider this as the user being active and doing stuff, so they've seen the alert\n\t\tresetAlerts();\n\t});\n};\n\nReddit.hookOcButtons = function(bus) {\n\tvar $buttons = $('a[href^=\"https://app.orangechat.io\"]');\n\t$buttons.on('click', function(event) {\n\t\tvar url = $(this).attr('href');\n\t\tif (url && !url.match(/#./)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar channel = url.split('#')[1].split(',')[0];\n\t\tbus.trigger('action.ocbutton.click', event, channel);\n\t});\n};\n\nexport default Reddit;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Services/Reddit.js\n **/","/**\n * Integration to the subchat backend\n *\n * TODO: Should Services/Transport be in here?\n */\n\n\nfunction Subchat(state) {\n\tthis.state = state;\n\tthis.sid = state('sid') || '';\n\tthis.username = m.prop(state('username') || '');\n\tthis.api_url = 'https://app.orangechat.io/app';\n\tthis.subreddits = m.prop([]);\n}\n\n\n/**\n * Generate a singleton instance\n * @return {Subchat}\n */\nSubchat.instance = (function() {\n\tvar instance = null;\n\n\treturn function(state) {\n\t\tinstance = instance || new Subchat(state);\n\t\treturn instance;\n\t};\n})();\n\n\n// TODO: Not a fan of this setter. Find a way to detect changes on m.prop() and use that\nSubchat.prototype.setSid = function(sid) {\n\tthis.sid = sid;\n\tthis.state.set('sid', sid);\n};\n// TODO: Not a fan of this setter. Find a way to detect changes on m.prop() and use that\nSubchat.prototype.setUsername = function(username) {\n\tthis.username(username);\n\tthis.state.set('username', username);\n};\n\n\n/**\n * Build a URL to call the backend\n * @param  {String} path  The API path, ie. API method to be called\n * @param  {Object} _args Object of querystring parameters\n * @return {String}       A complete API URL\n */\nSubchat.prototype.apiUrl = function(path, _args) {\n\tvar args = _args || {};\n\tvar querystring_params = [];\n\t\n\targs.sid = this.sid || '';\n\n\tfor (var prop in args) {\n\t\tif (!args.hasOwnProperty(prop)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tquerystring_params.push(prop + '=' + encodeURIComponent(args[prop]));\n\t}\n\n\treturn this.api_url + path + '?' + querystring_params.join('&');\n};\n\nSubchat.prototype.ping = function() {\n\tvar deferred = m.deferred();\n\n\tm.request({method: 'GET', url: this.apiUrl('/ping')})\n\t.then((resp) => {\n\t\tvar just_logged_in = false;\n\n\t\tif (resp && resp.sid) {\n\t\t\tthis.setSid(resp.sid);\n\t\t}\n\n\t\tif (!resp.username) {\n\t\t\tthis.setUsername('');\n\t\t\tdeferred.resolve({});\n\n\t\t} else {\n\t\t\t// If we don't current have a username but have one now, then we must have\n\t\t\t// just logged in.\n\t\t\tjust_logged_in = !this.username();\n\n\t\t\t// Just make sure we know our correct username\n\t\t\tthis.setUsername(resp.username);\n\n\t\t\tdeferred.resolve({\n\t\t\t\tjust_logged_in: just_logged_in,\n\t\t\t\tusername: resp.username,\n\t\t\t\tuser_channel: resp.user_channel || '',\n\t\t\t\tchannels: resp.channels\n\t\t\t});\n\t\t}\n\t});\n\n\treturn deferred.promise;\n};\n\n\n/**\n * Create a private channel and return the channel name\n */\nSubchat.prototype.createChannel = function(_invite_users) {\n\tvar invite_users = [].concat(_invite_users);\n\tvar url = this.apiUrl('/channels/create', {\n\t\tinvite: invite_users.join(',')\n\t});\n\n\treturn m.request({method: 'GET', url: url})\n\t.then((resp) => {\n\t\treturn resp;\n\t});\n};\n\n\n/**\n * Ban users from a channel\n */\nSubchat.prototype.banFromChannel = function(channel_name, _ban_users) {\n\tvar users = [].concat(_ban_users);\n\tvar api_params = {\n\t\tusers: users.join(','),\n\t\tchannel: channel_name\n\t};\n\n\tvar url = this.apiUrl('/channels/ban', api_params);\n\n\treturn m.request({method: 'GET', url: url})\n\t.then((resp) => {\n\t\treturn resp;\n\t});\n};\n\n\n/**\n * Create a private channel and return the channel name\n */\nSubchat.prototype.inviteToChannel = function(channel_name, _invite_users, _opts) {\n\tvar invite_users = [].concat(_invite_users);\n\tvar opts = _opts || {};\n\tvar api_params = {\n\t\tinvite: invite_users.join(','),\n\t\tchannel: channel_name\n\t};\n\n\tif (opts.label) {\n\t\tapi_params.label = opts.label;\n\t}\n\n\tvar url = this.apiUrl('/channels/invite', api_params);\n\n\treturn m.request({method: 'GET', url: url})\n\t.then((resp) => {\n\t\treturn resp;\n\t});\n};\n\nSubchat.prototype.updateChannel = function(channel_name, updates) {\n\tupdates.channel = channel_name;\n\tvar url = this.apiUrl('/channels/update', updates);\n\n\treturn m.request({method: 'GET', url: url})\n\t.then((resp) => {\n\t\treturn resp;\n\t});\n};\n\nSubchat.prototype.loadSubreddits = function(force_reddit_update) {\n\tvar subreddits = this.subreddits;\n\tvar url = this.apiUrl('/subreddits', force_reddit_update ? {refresh:1} : undefined);\n\n\treturn $.getJSON(url, (response) => {\n\t\tvar new_subreddits = [];\n\t\tif (!response) {\n\t\t\treturn;\n\t\t}\n\n\t\t_.each(response, (item) => {\n\t\t\tnew_subreddits.push({\n\t\t\t\tname: '/r/' + item.subreddit,\n\t\t\t\tshort_name: item.subreddit\n\t\t\t});\n\t\t});\n\n\t\tnew_subreddits = _.sortBy(new_subreddits, (sub) => {\n\t\t\treturn sub.name.toLowerCase();\n\t\t});\n\n\t\tsubreddits(new_subreddits);\n\n\t\t// TODO: This redraw shouldn't be here.\n\t\tm.redraw();\n\n\t}).fail(function() {\n\t});\n};\n\n\n/**\n * Auth into the API backend\n * This will either return the username if already auth'd or process the reddit OAuth\n * and handle any redirects until fully auth'd, and then returns the username.\n */\nSubchat.prototype.auth = function() {\n\tvar deferred = m.deferred();\n\n\tm.startComputation();\n\n\tfunction resolveAuth(result) {\n\t\tm.endComputation();\n\t\tdeferred.resolve(result);\n\t}\n\tfunction rejectAuth(err) {\n\t\tm.endComputation();\n\t\tdeferred.reject(err);\n\t}\n\n\tm.request({method: 'GET', url: this.apiUrl('/auth')})\n\t.then((resp) => {\n\n\t\t// Check if we have a session ID set (can't use cookies.. IE9< doesn't\n\t\t// support cookies over CORS)\n\t\tif (resp && resp.sid) {\n\t\t\tthis.setSid(resp.sid);\n\t\t}\n\n\t\tif (!resp || resp.status === 'bad') {\n\t\t\trejectAuth(resp.error || 'unknown_error');\n\t\t\treturn;\n\t\t}\n\n\t\t// If instructed to redirect somewhere, do that now\n\t\tif (resp.redirect) {\n\t\t\twindow.location = resp.redirect + '&return_url=' + encodeURIComponent(window.location.href);\n\t\t\treturn;\n\t\t}\n\n\t\tif (resp.username) {\n\t\t\tthis.setUsername(resp.username);\n\t\t\tresolveAuth({username: this.username()});\n\t\t}\n\t});\n\n\treturn deferred.promise;\n};\n\n\n/**\n * \n */\nSubchat.prototype.logout = function() {\n\treturn m.request({method: 'GET', url: this.apiUrl('/logout')})\n\t.then((resp) => {\n\t\tthis.setUsername('');\n\t});\n};\n\n\n/**\n * Convert 'type_string:{JSON structure}' into an object\n * @param  {String} message Raw string, typically recieved from a window message\n * @return {Object}         {type: 'string', args: {args}\n */\nfunction parsePostedMessage(message) {\n\tvar result = {\n\t\ttype: null,\n\t\targs: {}\n\t};\n\n\tvar split_pos = message.indexOf(':');\n\tif (split_pos === -1) {\n\t\treturn result;\n\t}\n\n\tresult.type = message.substring(0, split_pos);\n\ttry {\n\t\tresult.args = JSON.parse(message.substring(split_pos + 1));\n\t} catch (err) {\n\t}\n\n\treturn result;\n}\n\nexport default Subchat;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Services/Subchat.js\n **/","export default class MessageModel {\n\tconstructor(message) {\n\t\tthis.fromObj(message);\n\t}\n\n\tfromObj(obj) {\n\t\tthis.id = obj.id;\n\t\tthis.matchid = obj.matchid;\n\t\tthis.author = obj.author;\n\t\tthis.content = obj.content;\n\t\tthis.channel = obj.channel;\n\t\tthis.created = obj.created;\n\t\tthis.source = obj.source;\n\t\tthis.type = obj.type;\n\t\tthis.is_highlight = obj.is_highlight;\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/Message/Model.js\n **/","import './Message.styl';\n\nimport * as Helpers from '../../Helpers/Helpers.js';\n\nvar Message = {};\n\nMessage.controller = function(args) {\n\tthis.cssClass = () => {\n\t\tvar css_class = 'OC-Message';\n\t\tif (args.message.author === args.message_room.subchat.username()) {\n\t\t\tcss_class += ' OC-Message--own';\n\t\t}\n\t\tif (!args.message.id) {\n\t\t\tcss_class += ' OC-Message--pending';\n\t\t}\n\t\tif (args.message.is_highlight) {\n\t\t\tcss_class += ' OC-Message--highlight';\n\t\t}\n\t\tif (args.message.type === 'action') {\n\t\t\tcss_class += ' OC-Message--action';\n\t\t}\n\t\treturn css_class;\n\t};\n\n\tthis.openUserPanel = (event) => {\n\t\tevent = $.event.fix(event);\n\t\tevent.stopPropagation();\n\t\targs.message_room.openUserPanel(event, args.message.author, {\n\t\t\tsource: args.message.source\n\t\t});\n\t};\n};\n\nMessage.view = function(controller, args, ext) {\n\tvar view = null;\n\n\tif (ext.style === 'inline') {\n\t\tview = Message.viewInline(controller, args, ext);\n\t} else {\n\t\tview = Message.viewBlock(controller, args, ext);\n\t}\n\n\treturn view;\n};\n\nMessage.viewInline = function(controller, args, ext) {\n\treturn m('li', {class: controller.cssClass() + ' OC-Message--inline'}, [\n\t\t//m('div', {class: 'OC-Message__timestamp'}, m.trust(args.message.display.created)),\n\t\tm('div', {\n\t\t\tstyle: args.message.type === 'action' ? 'color:' + Helpers.nickColour(args.message.author) + ';' : '',\n\t\t\tclass: 'OC-Message__content'\n\t\t}, [\n\t\t\tm('a', {\n\t\t\t\tclass: 'OC-Message__content-author',\n\t\t\t\tstyle: 'color:' + Helpers.nickColour(args.message.author) + ';',\n\t\t\t\tonclick: controller.openUserPanel,\n\t\t\t}, m.trust(args.message.display.author)),\n\t\t\t' ',\n\t\t\tm.trust(args.message.display.content)\n\t\t])\n\t]);\n};\n\nMessage.viewBlock = function(controller, args, ext) {\n\tvar error = null;\n\n\tif (args.message.error) {\n\t\tconsole.log('adding error');\n\t\terror = m('div', {class: 'OC-Message__error'}, args.message.error);\n\t}\n\n\treturn m('li', {class: controller.cssClass() + ' OC-Message--block'}, [\n\t\tm('a', {\n\t\t\tclass: 'OC-Message__author',\n\t\t\tstyle: 'color:' + Helpers.nickColour(args.message.author) + ';',\n\t\t\tonclick: controller.openUserPanel,\n\t\t}, m.trust(args.message.display.author)),\n\t\tm('div', {class: 'OC-Message__timestamp'}, m.trust(args.message.display.created)),\n\t\tm('div', {\n\t\t\tstyle: args.message.type === 'action' ? 'color:' + Helpers.nickColour(args.message.author) + ';' : '',\n\t\t\tclass: 'OC-Message__content'\n\t\t}, [\n\t\t\tm.trust(args.message.display.content)\n\t\t]),\n\t\terror\n\t]);\n};\n\nexport default Message;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/Message/Message.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Message.styl\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Message.styl\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Message.styl\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Components/Message/Message.styl\n ** module id = 19\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".OC-Message {\\n  padding: 5px 16px;\\n  word-break: break-word;\\n  overflow-wrap: break-word;\\n  word-wrap: break-word;\\n  position: relative;\\n}\\n.OC-Message--pending {\\n  opacity: 0.4;\\n}\\n.OC-Message--highlight {\\n  background-color: #fbe9e7;\\n}\\n.OC-Message--action .OC-Message__content {\\n  font-style: italic;\\n}\\n.OC-Message--action .OC-Message__content-author:before {\\n  content: '~ ';\\n}\\n.OC-Message:nth-child(2n) {\\n  background-color: #f5f5f5;\\n}\\n.OC-Message--inline .OC-Message__timestamp {\\n  color: rgba(0,0,0,0.38);\\n  position: absolute;\\n  font-size: 1em;\\n  left: 16px;\\n  top: 10px/2;\\n}\\n.OC-Message--inline .OC-Message__content {\\n  font-size: 1em;\\n}\\n.OC-Message--inline .OC-Message__content--username {\\n  font-style: italic;\\n}\\n.OC-Message--inline .OC-Message__content-author {\\n  font-weight: 500;\\n  cursor: pointer;\\n  font-size: 1em;\\n}\\n.OC-Message--inline .OC-Message__content-author:hover {\\n  opacity: 0.7;\\n}\\n.OC-Message--inline .OC-Message__error {\\n  background: #e05656;\\n  color: #fff;\\n  padding: 8px;\\n  border: 1px solid #a93f3f;\\n}\\n.OC-Message--block .OC-Message__timestamp {\\n  color: rgba(0,0,0,0.38);\\n  font-size: 0.857142857142857em;\\n  margin-left: 9px;\\n  display: inline;\\n}\\n.OC-Message--block .OC-Message__content {\\n  font-size: 1em;\\n  display: block;\\n}\\n.OC-Message--block .OC-Message__content--username {\\n  font-style: italic;\\n}\\n.OC-Message--block .OC-Message-author {\\n  font-weight: 500;\\n  cursor: pointer;\\n  font-size: 1em;\\n}\\n.OC-Message--block .OC-Message-author:hover {\\n  opacity: 0.7;\\n}\\n.OC-Message--block .OC-Message__error {\\n  background: #e05656;\\n  color: #fff;\\n  padding: 8px;\\n  border: 1px solid #a93f3f;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/stylus-loader!./src/Components/Message/Message.styl\n ** module id = 20\n ** module chunks = 0\n **/","import strftime from 'strftime';\nimport * as Helpers from '../Helpers/Helpers.js';\n\n/**\n * Parse messages into displayable formats. Parses URLs, embedded media, etc.\n */\nclass MessageParser {\n\n\tconstructor(filters = null, usernames = null) {\n\t\t// Word replacments in message content\n\t\tthis.filters = Object.create(filters);\n\n\t\t// A mithril prop function returning an array of usernames\n\t\tthis.usernames = usernames;\n\t}\n\n\tparseAll(message) {\n\t\tvar display_obj = {\n\t\t\tauthor: this.parseAuthor(_.escape(message.author), message.source),\n\t\t\tcontent: message.content,\n\t\t\tcreated: message.created ? this.parseTimestamp(message.created) : '',\n\t\t\tcreated_short: message.created ? this.parseShortTimestamp(message.created) : ''\n\t\t};\n\n\t\tvar words = display_obj.content.split(' ');\n\n\t\t// Go through each word and parse individually. If nothing is returned from a\n\t\t// parser function, continue to the next one.\n\t\twords = words.map((word) => {\n\t\t\tvar parsed;\n\n\t\t\tparsed = this.parseUrls(word);\n\t\t\tif (typeof parsed === 'string') return parsed;\n\n\t\t\tparsed = this.parseFilters(word);\n\t\t\tif (typeof parsed === 'string') return parsed;\n\n\t\t\tparsed = this.parseRedditPhrases(word);\n\t\t\tif (typeof parsed === 'string') return parsed;\n\n\t\t\tif (typeof this.usernames === 'function') {\n\t\t\t\tparsed = this.parseUsernames(word);\n\t\t\t\tif (typeof parsed === 'string') return parsed;\n\t\t\t}\n\n\t\t\treturn _.escape(word);\n\t\t});\n\n\t\tdisplay_obj.content = words.join(' ');\n\n\t\treturn display_obj;\n\t}\n\n\tparseUrls(word) {\n\t\tvar found_a_url = false,\n\t\t\tparsed_url;\n\n\t\tparsed_url = word.replace(/^(([A-Za-z][A-Za-z0-9\\-]*\\:\\/\\/)|(www\\.))([\\w\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF.\\-]+)([a-zA-Z]{2,6})(:[0-9]+)?(\\/[\\w\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF!:.?$'()[\\]*,;~+=&%@!\\-\\/]*)?(#.*)?$/gi, function (url) {\n\t\t\tvar nice = url,\n\t\t\t\textra_html = '';\n\n\t\t\t// Don't allow javascript execution\n\t\t\tif (url.match(/^javascript:/i)) {\n\t\t\t\treturn url;\n\t\t\t}\n\n\t\t\tfound_a_url = true;\n\n\t\t\t// Add the http if no protoocol was found\n\t\t\tif (url.match(/^www\\./i)) {\n\t\t\t\turl = 'http://' + url;\n\t\t\t}\n\n\t\t\t// Shorten the displayed URL if it's going to be too long\n\t\t\tif (nice.length > 100) {\n\t\t\t\tnice = nice.substr(0, 100) + '...';\n\t\t\t}\n\n\t\t\t// Make the link clickable\n\t\t\treturn '<a class=\"link-ext\" target=\"_blank\" rel=\"nofollow\" href=\"' + url.replace(/\"/g, '%22') + '\">' + _.escape(nice) + '</a>' + extra_html;\n\t\t});\n\n\t\treturn found_a_url ? parsed_url : false;\n\t}\n\n\tparseFilters(word) {\n\t\tif (this.filters[word.toLowerCase()]) {\n\t\t\treturn this.filters[word.toLowerCase()];\n\t\t}\n\t}\n\n\tparseRedditPhrases(word) {\n\t\tvar replacement_made = false;\n\t\tvar ret = word;\n\t\t// Convert /r/sub into reddit links\n\t\tret = ret.replace(/(?:^|\\s)(\\/?(r\\/[a-zA-Z0-9]+))/, (match, group1, group2) => {\n\t\t\treplacement_made = true;\n\t\t\treturn '<a href=\"https://www.reddit.com/' + group2 + '\">' + group1 + '</a>';\n\t\t});\n\n\t\t// Convert /u/user into reddit links\n\t\tret = ret.replace(/(?:^|\\s)(\\/?(u\\/[a-zA-Z0-9]+))/, (match, group1, group2) => {\n\t\t\treplacement_made = true;\n\t\t\treturn '<a href=\"https://www.reddit.com/' + group2 + '\">' + group1 + '</a>';\n\t\t});\n\n\t\treturn replacement_made ?\n\t\t\tret :\n\t\t\tfalse;\n\t}\n\n\tparseUsernames(word) {\n\t\tvar usernames = this.usernames();\n\t\tif (!usernames && !usernames.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar match = word.match(/^([a-z0-9_\\-]+)([^a-z0-9_\\-]+)?$/i);\n\t\tif (!match) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If this word isn't a recognised username, return\n\t\tif (usernames.indexOf(match[1].toLowerCase()) === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar colour = Helpers.nickColour(match[1]);\n\t\tvar ret = '<span class=\"OC-Message__content--username\" style=\"color:' + colour + ';\">' + _.escape(match[1]) + '</span>';\n\n\t\t// Add any trailing characters back on\n\t\tif (match[2]) {\n\t\t\tret += _.escape(match[2]);\n\t\t}\n\n\t\treturn ret;\n\t}\n\n\tparseTimestamp(timestamp) {\n\t\treturn strftime('%H:%M:%S', new Date(timestamp));\n\t}\n\n\tparseShortTimestamp(timestamp) {\n\t\treturn strftime('%H:%M', new Date(timestamp));\n\t}\n\n\tparseAuthor(author, source) {\n\t\tif(source == 'irc') {\n\t\t\tauthor += '*';\n\t\t}\n\n\t\treturn author;\n\t}\n\n}\n\nexport default MessageParser;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Services/MessageParser.js\n **/","//\n// strftime\n// github.com/samsonjs/strftime\n// @_sjs\n//\n// Copyright 2010 - 2015 Sami Samhuri <sami@samhuri.net>\n//\n// MIT License\n// http://sjs.mit-license.org\n//\n\n;(function() {\n\n    var DefaultLocale = {\n            days: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n            shortDays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n            months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n            shortMonths: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n            AM: 'AM',\n            PM: 'PM',\n            am: 'am',\n            pm: 'pm',\n            formats: {\n                D: '%m/%d/%y',\n                F: '%Y-%m-%d',\n                R: '%H:%M',\n                T: '%H:%M:%S',\n                X: '%T',\n                c: '%a %b %d %X %Y',\n                r: '%I:%M:%S %p',\n                v: '%e-%b-%Y',\n                x: '%D'\n            }\n        },\n        defaultStrftime = new Strftime(DefaultLocale, 0, false),\n        isCommonJS = typeof module !== 'undefined',\n        namespace;\n\n    // CommonJS / Node module\n    if (isCommonJS) {\n        namespace = module.exports = adaptedStrftime;\n        namespace.strftime = deprecatedStrftime;\n    }\n    // Browsers and other environments\n    else {\n        // Get the global object. Works in ES3, ES5, and ES5 strict mode.\n        namespace = (function() { return this || (1,eval)('this'); }());\n        namespace.strftime = adaptedStrftime;\n    }\n\n    // Deprecated API, to be removed in v1.0\n    var _require = isCommonJS ? \"require('strftime')\" : \"strftime\";\n    var _deprecationWarnings = {};\n    function deprecationWarning(name, instead) {\n        if (!_deprecationWarnings[name]) {\n            if (typeof console !== 'undefined' && typeof console.warn == 'function') {\n                console.warn(\"[WARNING] \" + name + \" is deprecated and will be removed in version 1.0. Instead, use `\" + instead + \"`.\");\n            }\n            _deprecationWarnings[name] = true;\n        }\n    }\n\n    namespace.strftimeTZ = deprecatedStrftimeTZ;\n    namespace.strftimeUTC = deprecatedStrftimeUTC;\n    namespace.localizedStrftime = deprecatedStrftimeLocalized;\n\n    // Adapt the old API while preserving the new API.\n    function adaptForwards(fn) {\n        fn.localize = defaultStrftime.localize.bind(defaultStrftime);\n        fn.timezone = defaultStrftime.timezone.bind(defaultStrftime);\n        fn.utc = defaultStrftime.utc.bind(defaultStrftime);\n    }\n\n    adaptForwards(adaptedStrftime);\n    function adaptedStrftime(fmt, d, locale) {\n        // d and locale are optional, check if this is (format, locale)\n        if (d && d.days) {\n            locale = d;\n            d = undefined;\n        }\n        if (locale) {\n            deprecationWarning(\"`\" + _require + \"(format, [date], [locale])`\", \"var s = \" + _require + \".localize(locale); s(format, [date])\");\n        }\n        var strftime = locale ? defaultStrftime.localize(locale) : defaultStrftime;\n        return strftime(fmt, d);\n    }\n\n    adaptForwards(deprecatedStrftime);\n    function deprecatedStrftime(fmt, d, locale) {\n        if (locale) {\n            deprecationWarning(\"`\" + _require + \".strftime(format, [date], [locale])`\", \"var s = \" + _require + \".localize(locale); s(format, [date])\");\n        }\n        else {\n            deprecationWarning(\"`\" + _require + \".strftime(format, [date])`\", _require + \"(format, [date])\");\n        }\n        var strftime = locale ? defaultStrftime.localize(locale) : defaultStrftime;\n        return strftime(fmt, d);\n    }\n\n    function deprecatedStrftimeTZ(fmt, d, locale, timezone) {\n        // locale is optional, check if this is (format, date, timezone)\n        if ((typeof locale == 'number' || typeof locale == 'string') && timezone == null) {\n            timezone = locale;\n            locale = undefined;\n        }\n\n        if (locale) {\n            deprecationWarning(\"`\" + _require + \".strftimeTZ(format, date, locale, tz)`\", \"var s = \" + _require + \".localize(locale).timezone(tz); s(format, [date])` or `var s = \" + _require + \".localize(locale); s.timezone(tz)(format, [date])\");\n        }\n        else {\n            deprecationWarning(\"`\" + _require + \".strftimeTZ(format, date, tz)`\", \"var s = \" + _require + \".timezone(tz); s(format, [date])` or `\" + _require + \".timezone(tz)(format, [date])\");\n        }\n\n        var strftime = (locale ? defaultStrftime.localize(locale) : defaultStrftime).timezone(timezone);\n        return strftime(fmt, d);\n    }\n\n    var utcStrftime = defaultStrftime.utc();\n    function deprecatedStrftimeUTC(fmt, d, locale) {\n        if (locale) {\n            deprecationWarning(\"`\" + _require + \".strftimeUTC(format, date, locale)`\", \"var s = \" + _require + \".localize(locale).utc(); s(format, [date])\");\n        }\n        else {\n            deprecationWarning(\"`\" + _require + \".strftimeUTC(format, [date])`\", \"var s = \" + _require + \".utc(); s(format, [date])\");\n        }\n        var strftime = locale ? utcStrftime.localize(locale) : utcStrftime;\n        return strftime(fmt, d);\n    }\n\n    function deprecatedStrftimeLocalized(locale) {\n        deprecationWarning(\"`\" + _require + \".localizedStrftime(locale)`\", _require + \".localize(locale)\");\n        return defaultStrftime.localize(locale);\n    }\n    // End of deprecated API\n\n    // Polyfill Date.now for old browsers.\n    if (typeof Date.now !== 'function') {\n        Date.now = function() {\n          return +new Date();\n        };\n    }\n\n    function Strftime(locale, customTimezoneOffset, useUtcTimezone) {\n        var _locale = locale || DefaultLocale,\n            _customTimezoneOffset = customTimezoneOffset || 0,\n            _useUtcBasedDate = useUtcTimezone || false,\n\n            // we store unix timestamp value here to not create new Date() each iteration (each millisecond)\n            // Date.now() is 2 times faster than new Date()\n            // while millisecond precise is enough here\n            // this could be very helpful when strftime triggered a lot of times one by one\n            _cachedDateTimestamp = 0,\n            _cachedDate;\n\n        function _strftime(format, date) {\n            var timestamp;\n\n            if (!date) {\n                var currentTimestamp = Date.now();\n                if (currentTimestamp > _cachedDateTimestamp) {\n                    _cachedDateTimestamp = currentTimestamp;\n                    _cachedDate = new Date(_cachedDateTimestamp);\n\n                    timestamp = _cachedDateTimestamp;\n\n                    if (_useUtcBasedDate) {\n                        // how to avoid duplication of date instantiation for utc here?\n                        // we tied to getTimezoneOffset of the current date\n                        _cachedDate = new Date(_cachedDateTimestamp + getTimestampToUtcOffsetFor(_cachedDate) + _customTimezoneOffset);\n                    }\n                }\n                else {\n                  timestamp = _cachedDateTimestamp;\n                }\n                date = _cachedDate;\n            }\n            else {\n                timestamp = date.getTime();\n\n                if (_useUtcBasedDate) {\n                    date = new Date(date.getTime() + getTimestampToUtcOffsetFor(date) + _customTimezoneOffset);\n                }\n            }\n\n            return _processFormat(format, date, _locale, timestamp);\n        }\n\n        function _processFormat(format, date, locale, timestamp) {\n            var resultString = '',\n                padding = null,\n                isInScope = false,\n                length = format.length,\n                extendedTZ = false;\n\n            for (var i = 0; i < length; i++) {\n\n                var currentCharCode = format.charCodeAt(i);\n\n                if (isInScope === true) {\n                    // '-'\n                    if (currentCharCode === 45) {\n                        padding = '';\n                        continue;\n                    }\n                    // '_'\n                    else if (currentCharCode === 95) {\n                        padding = ' ';\n                        continue;\n                    }\n                    // '0'\n                    else if (currentCharCode === 48) {\n                        padding = '0';\n                        continue;\n                    }\n                    // ':'\n                    else if (currentCharCode === 58) {\n                      if (extendedTZ) {\n                        if (typeof console !== 'undefined' && typeof console.warn == 'function') {\n                          console.warn(\"[WARNING] detected use of unsupported %:: or %::: modifiers to strftime\");\n                        }\n                      }\n                      extendedTZ = true;\n                      continue;\n                    }\n\n                    switch (currentCharCode) {\n\n                        // Examples for new Date(0) in GMT\n\n                        // 'Thursday'\n                        // case 'A':\n                        case 65:\n                            resultString += locale.days[date.getDay()];\n                            break;\n\n                        // 'January'\n                        // case 'B':\n                        case 66:\n                            resultString += locale.months[date.getMonth()];\n                            break;\n\n                        // '19'\n                        // case 'C':\n                        case 67:\n                            resultString += padTill2(Math.floor(date.getFullYear() / 100), padding);\n                            break;\n\n                        // '01/01/70'\n                        // case 'D':\n                        case 68:\n                            resultString += _processFormat(locale.formats.D, date, locale, timestamp);\n                            break;\n\n                        // '1970-01-01'\n                        // case 'F':\n                        case 70:\n                            resultString += _processFormat(locale.formats.F, date, locale, timestamp);\n                            break;\n\n                        // '00'\n                        // case 'H':\n                        case 72:\n                            resultString += padTill2(date.getHours(), padding);\n                            break;\n\n                        // '12'\n                        // case 'I':\n                        case 73:\n                            resultString += padTill2(hours12(date.getHours()), padding);\n                            break;\n\n                        // '000'\n                        // case 'L':\n                        case 76:\n                            resultString += padTill3(Math.floor(timestamp % 1000));\n                            break;\n\n                        // '00'\n                        // case 'M':\n                        case 77:\n                            resultString += padTill2(date.getMinutes(), padding);\n                            break;\n\n                        // 'am'\n                        // case 'P':\n                        case 80:\n                            resultString += date.getHours() < 12 ? locale.am : locale.pm;\n                            break;\n\n                        // '00:00'\n                        // case 'R':\n                        case 82:\n                            resultString += _processFormat(locale.formats.R, date, locale, timestamp);\n                            break;\n\n                        // '00'\n                        // case 'S':\n                        case 83:\n                            resultString += padTill2(date.getSeconds(), padding);\n                            break;\n\n                        // '00:00:00'\n                        // case 'T':\n                        case 84:\n                            resultString += _processFormat(locale.formats.T, date, locale, timestamp);\n                            break;\n\n                        // '00'\n                        // case 'U':\n                        case 85:\n                            resultString += padTill2(weekNumber(date, 'sunday'), padding);\n                            break;\n\n                        // '00'\n                        // case 'W':\n                        case 87:\n                            resultString += padTill2(weekNumber(date, 'monday'), padding);\n                            break;\n\n                        // '16:00:00'\n                        // case 'X':\n                        case 88:\n                            resultString += _processFormat(locale.formats.X, date, locale, timestamp);\n                            break;\n\n                        // '1970'\n                        // case 'Y':\n                        case 89:\n                            resultString += date.getFullYear();\n                            break;\n\n                        // 'GMT'\n                        // case 'Z':\n                        case 90:\n                            if (_useUtcBasedDate && _customTimezoneOffset === 0) {\n                                resultString += \"GMT\";\n                            }\n                            else {\n                                // fixme optimize\n                                var tzString = date.toString().match(/\\(([\\w\\s]+)\\)/);\n                                resultString += tzString && tzString[1] || '';\n                            }\n                            break;\n\n                        // 'Thu'\n                        // case 'a':\n                        case 97:\n                            resultString += locale.shortDays[date.getDay()];\n                            break;\n\n                        // 'Jan'\n                        // case 'b':\n                        case 98:\n                            resultString += locale.shortMonths[date.getMonth()];\n                            break;\n\n                        // ''\n                        // case 'c':\n                        case 99:\n                            resultString += _processFormat(locale.formats.c, date, locale, timestamp);\n                            break;\n\n                        // '01'\n                        // case 'd':\n                        case 100:\n                            resultString += padTill2(date.getDate(), padding);\n                            break;\n\n                        // ' 1'\n                        // case 'e':\n                        case 101:\n                            resultString += padTill2(date.getDate(), padding == null ? ' ' : padding);\n                            break;\n\n                        // 'Jan'\n                        // case 'h':\n                        case 104:\n                            resultString += locale.shortMonths[date.getMonth()];\n                            break;\n\n                        // '000'\n                        // case 'j':\n                        case 106:\n                            var y = new Date(date.getFullYear(), 0, 1);\n                            var day = Math.ceil((date.getTime() - y.getTime()) / (1000 * 60 * 60 * 24));\n                            resultString += padTill3(day);\n                            break;\n\n                        // ' 0'\n                        // case 'k':\n                        case 107:\n                            resultString += padTill2(date.getHours(), padding == null ? ' ' : padding);\n                            break;\n\n                        // '12'\n                        // case 'l':\n                        case 108:\n                            resultString += padTill2(hours12(date.getHours()), padding == null ? ' ' : padding);\n                            break;\n\n                        // '01'\n                        // case 'm':\n                        case 109:\n                            resultString += padTill2(date.getMonth() + 1, padding);\n                            break;\n\n                        // '\\n'\n                        // case 'n':\n                        case 110:\n                            resultString += '\\n';\n                            break;\n\n                        // '1st'\n                        // case 'o':\n                        case 111:\n                            resultString += String(date.getDate()) + ordinal(date.getDate());\n                            break;\n\n                        // 'AM'\n                        // case 'p':\n                        case 112:\n                            resultString += date.getHours() < 12 ? locale.AM : locale.PM;\n                            break;\n\n                        // '12:00:00 AM'\n                        // case 'r':\n                        case 114:\n                            resultString += _processFormat(locale.formats.r, date, locale, timestamp);\n                            break;\n\n                        // '0'\n                        // case 's':\n                        case 115:\n                            resultString += Math.floor(timestamp / 1000);\n                            break;\n\n                        // '\\t'\n                        // case 't':\n                        case 116:\n                            resultString += '\\t';\n                            break;\n\n                        // '4'\n                        // case 'u':\n                        case 117:\n                            var day = date.getDay();\n                            resultString += day === 0 ? 7 : day;\n                            break; // 1 - 7, Monday is first day of the week\n\n                        // ' 1-Jan-1970'\n                        // case 'v':\n                        case 118:\n                            resultString += _processFormat(locale.formats.v, date, locale, timestamp);\n                            break;\n\n                        // '4'\n                        // case 'w':\n                        case 119:\n                            resultString += date.getDay();\n                            break; // 0 - 6, Sunday is first day of the week\n\n                        // '12/31/69'\n                        // case 'x':\n                        case 120:\n                            resultString += _processFormat(locale.formats.x, date, locale, timestamp);\n                            break;\n\n                        // '70'\n                        // case 'y':\n                        case 121:\n                            resultString += ('' + date.getFullYear()).slice(2);\n                            break;\n\n                        // '+0000'\n                        // case 'z':\n                        case 122:\n                            if (_useUtcBasedDate && _customTimezoneOffset === 0) {\n                                resultString += extendedTZ ? \"+00:00\" : \"+0000\";\n                            }\n                            else {\n                                var off;\n                                if (_customTimezoneOffset !== 0) {\n                                    off = _customTimezoneOffset / (60 * 1000);\n                                }\n                                else {\n                                    off = -date.getTimezoneOffset();\n                                }\n                                var sign = off < 0 ? '-' : '+';\n                                var sep = extendedTZ ? ':' : '';\n                                var hours = Math.floor(Math.abs(off / 60));\n                                var mins = Math.abs(off % 60);\n                                resultString += sign + padTill2(hours) + sep + padTill2(mins);\n                            }\n                            break;\n\n                        default:\n                            resultString += format[i];\n                            break;\n                    }\n\n                    padding = null;\n                    isInScope = false;\n                    continue;\n                }\n\n                // '%'\n                if (currentCharCode === 37) {\n                    isInScope = true;\n                    continue;\n                }\n\n                resultString += format[i];\n            }\n\n            return resultString;\n        }\n\n        var strftime = _strftime;\n\n        strftime.localize = function(locale) {\n            return new Strftime(locale || _locale, _customTimezoneOffset, _useUtcBasedDate);\n        };\n\n        strftime.timezone = function(timezone) {\n            var customTimezoneOffset = _customTimezoneOffset;\n            var useUtcBasedDate = _useUtcBasedDate;\n\n            var timezoneType = typeof timezone;\n            if (timezoneType === 'number' || timezoneType === 'string') {\n                useUtcBasedDate = true;\n\n                // ISO 8601 format timezone string, [-+]HHMM\n                if (timezoneType === 'string') {\n                    var sign = timezone[0] === '-' ? -1 : 1,\n                        hours = parseInt(timezone.slice(1, 3), 10),\n                        minutes = parseInt(timezone.slice(3, 5), 10);\n\n                    customTimezoneOffset = sign * ((60 * hours) + minutes) * 60 * 1000;\n                    // in minutes: 420\n                }\n                else if (timezoneType === 'number') {\n                    customTimezoneOffset = timezone * 60 * 1000;\n                }\n            }\n\n            return new Strftime(_locale, customTimezoneOffset, useUtcBasedDate);\n        };\n\n        strftime.utc = function() {\n            return new Strftime(_locale, _customTimezoneOffset, true);\n        };\n\n        return strftime;\n    }\n\n    function padTill2(numberToPad, paddingChar) {\n        if (paddingChar === '' || numberToPad > 9) {\n            return numberToPad;\n        }\n        if (paddingChar == null) {\n            paddingChar = '0';\n        }\n        return paddingChar + numberToPad;\n    }\n\n    function padTill3(numberToPad) {\n        if (numberToPad > 99) {\n            return numberToPad;\n        }\n        if (numberToPad > 9) {\n            return '0' + numberToPad;\n        }\n        return '00' + numberToPad;\n    }\n\n    function hours12(hour) {\n        if (hour === 0) {\n            return 12;\n        }\n        else if (hour > 12) {\n            return hour - 12;\n        }\n        return hour;\n    }\n\n    // firstWeekday: 'sunday' or 'monday', default is 'sunday'\n    //\n    // Pilfered & ported from Ruby's strftime implementation.\n    function weekNumber(date, firstWeekday) {\n        firstWeekday = firstWeekday || 'sunday';\n\n        // This works by shifting the weekday back by one day if we\n        // are treating Monday as the first day of the week.\n        var weekday = date.getDay();\n        if (firstWeekday === 'monday') {\n            if (weekday === 0) // Sunday\n                weekday = 6;\n            else\n                weekday--;\n        }\n\n        var firstDayOfYearUtc = Date.UTC(date.getFullYear(), 0, 1),\n            dateUtc = Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()),\n            yday = Math.floor((dateUtc - firstDayOfYearUtc) / 86400000),\n            weekNum = (yday + 7 - weekday) / 7;\n\n        return Math.floor(weekNum);\n    }\n\n    // Get the ordinal suffix for a number: st, nd, rd, or th\n    function ordinal(number) {\n        var i = number % 10;\n        var ii = number % 100;\n\n        if ((ii >= 11 && ii <= 13) || i === 0 || i >= 4) {\n            return 'th';\n        }\n        switch (i) {\n            case 1: return 'st';\n            case 2: return 'nd';\n            case 3: return 'rd';\n        }\n    }\n\n    function getTimestampToUtcOffsetFor(date) {\n        return (date.getTimezoneOffset() || 0) * 60000;\n    }\n\n}());\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/strftime/strftime.js\n ** module id = 22\n ** module chunks = 0\n **/","var notification_requesting_permission = false;\n\nexport function notificationState() {\n\tif (notification_requesting_permission) {\n\t\treturn 'requesting';\n\t}\n\n\tif (!('Notification' in window)) {\n\t\treturn 'not_supported';\n\t}\n\n\tif (Notification.permission === 'granted') {\n\t\treturn 'ok';\n\t}\n\n\tif (Notification.permission === 'denied') {\n\t\treturn 'denied';\n\t}\n\n\treturn 'needs_request';\n};\n\nexport function requestPermission(cb) {\n\tnotification_requesting_permission = true;\n\n\tNotification.requestPermission((permission) => {\n\t\tnotification_requesting_permission = false;\n\t\tcb(permission);\n\t});\n};\n\nexport function notify(title, body, icon) {\n\tif (notificationState() !== 'ok') {\n\t\treturn false;\n\t}\n\n\tvar options = {\n\t\tbody: body,\n\t\ticon: icon || 'https://app.orangechat.io/assets/logo-color.png'\n\t}\n\treturn new Notification(title, options);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Services/Notifications.js\n **/","import './Panel.styl';\n\nvar Panel = {};\n\nPanel.controller = function(args) {\n\tthis.view = null;\n\tthis.style = '';\n\n\tthis.open = (event, view) => {\n\t\targs.bus.trigger('panel.opening');\n\t\tthis.view = view;\n\t\tm.redraw(); // Hacky... But we need the height of the panel after it's rendered.\n\n\t\tthis.style = 'display: block; left:  ' + this.calculateOffsetLeft(event) + 'px; top: ' + this.calculateOffsetTop(event) + 'px;';\n\n\t\targs.bus.trigger('panel.opened');\n\t};\n\n\tthis.close = () => {\n\t\targs.bus.trigger('panel.closing');\n\t\tthis.style = 'display: none;';\n\t\targs.bus.trigger('panel.closed');\n\t};\n\n\tthis.calculateOffsetTop = event => {\n\t\tvar workspace_height = $('.OC__workspace').height();\n\t\tvar panel_height = $('.OC-Panel').height();\n\n\t\tif((event.clientY + panel_height) > window.innerHeight) {\n\t\t\treturn ((window.innerHeight - (window.innerHeight - workspace_height)) - panel_height - 20);\n\t\t}\n\n\t\treturn (event.clientY - (window.innerHeight - workspace_height));\n\t};\n\n\tthis.calculateOffsetLeft = event => {\n\t\treturn (event.clientX - $('.OC__workspace').offset().left);\n\t};\n\n\targs.bus.on('panel.open', this.open);\n\targs.bus.on('panel.close', this.close);\n\n\targs.bus.on('panel.opened', () => {\n\t\targs.bus.once('action.document_click', () => {\n\t\t\targs.bus.trigger('panel.close');\n\t\t});\n\t});\n}\n\nPanel.view = function(controller) {\n\treturn m('div', {\n\t\tclass: 'OC-Panel',\n\t\tstyle: controller.style\n\t}, [\n\t\tm('h5', {class: 'OC-Panel__title'}, [\n\t\t\t\tcontroller.view != null ? controller.view.instance.title() : ''\n\t\t]),\n\n\t\tcontroller.view != null ? controller.view.view() : ''\n\t]);\n};\n\nexport default Panel;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/Panel/Panel.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Panel.styl\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Panel.styl\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Panel.styl\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Components/Panel/Panel.styl\n ** module id = 25\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".OC-Panel {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  display: none;\\n  z-index: 100;\\n  width: 215px;\\n  background-color: #fff;\\n  border-radius: 3px;\\n  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.14), 0 0px 5px 0 rgba(0,0,0,0.12), 0 2px 1px -2px rgba(0,0,0,0.2);\\n  overflow: hidden;\\n  padding: 10px 0;\\n}\\n.OC-Panel__title {\\n  font-size: 1.071428571428571em;\\n  font-weight: 500;\\n  color: rgba(0,0,0,0.87);\\n  padding: 10px 16px;\\n  padding-top: 0;\\n}\\n.OC-Panel__link {\\n  cursor: pointer;\\n  color: rgba(0,0,0,0.87);\\n  font-size: 1em;\\n  padding: 10px 16px;\\n  display: block;\\n}\\n.OC-Panel__link:hover {\\n  background-color: rgba(0,0,0,0.04);\\n}\\n.OC-Panel hr {\\n  margin: 10px 0;\\n  border: 0;\\n  border-top: 1px solid rgba(0,0,0,0.13);\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/stylus-loader!./src/Components/Panel/Panel.styl\n ** module id = 26\n ** module chunks = 0\n **/","import Subchat from '../../../Services/Subchat.js';\n\nvar UserPanel = {};\n\nUserPanel.controller = function(args) {\n\tthis.username = args.username;\n\tthis.source = args.source;\n\tthis.room = args.room;\n\tthis.room_manager = args.room_manager;\n\tthis.subchat = Subchat.instance();\n\n\tif (this.source === 'irc') {\n\t\tthis.title = m.prop(this.username);\n\t} else {\n\t\tthis.title = m.prop('/u/' + this.username);\n\t}\n\n\tthis.openPrivateChannel = () => {\n\t\tthis.subchat.createChannel(this.username).then((resp) => {\n\t\t\tif (!resp.channel_name) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar label = resp.channel_label;\n\t\t\t// Since we only have 1 user in this invite, set the label to\n\t\t\t// the user name.\n\t\t\tlabel = this.username;\n\n\t\t\tvar channel = this.room_manager.createRoom(resp.channel_name, {\n\t\t\t\tlabel: label\n\t\t\t});\n\n\t\t\tthis.room_manager.setActive(channel.instance.name());\n\t\t\targs.bus.trigger('panel.close');\n\t\t});\n\t};\n\n\tthis.inviteToChannel = channel => {\n\t\tthis.subchat.inviteToChannel(channel.name(), this.username).then((resp) => {\n\t\t\tif (resp.status == 'ok') {\n\t\t\t\targs.bus.trigger('panel.close');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconsole.log('inviteToChannel() Something went wrong...', resp);\n\t\t});\n\t};\n\n\tthis.banFromChannel = () => {\n\t\tif (!confirm('Ban ' + this.username + ' from ' + this.room.name() + '?')) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.subchat.banFromChannel(this.room.name(), this.username).then((resp) => {\n\t\t\tif (resp.status == 'ok') {\n\t\t\t\targs.bus.trigger('panel.close');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconsole.log('banFromChannel() Something went wrong...', resp);\n\t\t});\n\t};\n\n\tthis.toolboxShowUser = () => {\n\t\tfunction doFn() {\n\t\t\tvar $lastPopup = $('.mod-toolbox .tb-popup:last-of-type');\n\t\t\tif (!$lastPopup.length) {\n\t\t\t\tsetTimeout(doFn, 200);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar popupOffset = $lastPopup.offset();\n\t\t\tvar newTop = popupOffset.top-300;\n\t\t\tvar newLeft = popupOffset.left-200;\n\t\t\t$lastPopup.css({\n\t\t\t    'top':  newTop + 'px',\n\t\t\t    'left':  newLeft + 'px',\n\t\t\t    'z-index': '2147483675'\n\t\t\t});\n\t\t\tconsole.log($lastPopup[0]);\n\t\t}\n\n\t\tdoFn();\n\t};\n\n\tsetTimeout(() => {\n\t\tconsole.log('Dispatching TBNewThings event');\n\t\tvar event = new CustomEvent(\"TBNewThings\");\n\t\twindow.dispatchEvent(event);\n\t}, 200);\n};\n\nUserPanel.view = function(controller) {\n\tvar items = [];\n\n\tif (controller.source === 'irc') {\n\t\titems = [m('p', {class: 'OC-Panel__link'}, 'This person is talking via IRC')];\n\n\t} else {\n\t\titems = [\n\t\t\tm('a', {\n\t\t\t\tclass: 'OC-Panel__link',\n\t\t\t\tonclick: controller.openPrivateChannel\n\t\t\t}, 'Send private message'),\n\n\t\t\tm('a', {\n\t\t\t\tclass: 'OC-Panel__link',\n\t\t\t\thref: 'https://www.reddit.com/u/' + controller.username\n\t\t\t}, 'Reddit profile'),\n\n\t\t\tUserPanel.viewInviteToChannels(controller),\n\t\t];\n\t}\n\n\titems.push(UserPanel.viewModAction(controller));\n\n\treturn m('div', {class: 'OC-Panel__content'}, items);\n};\n\nUserPanel.viewInviteToChannels = function(controller) {\n\tvar content;\n\tvar chan_list;\n\tvar channels = _.filter(controller.room_manager.rooms, channel => {\n\t\treturn channel.instance.access.is_invite;\n\t});\n\n\tif (!channels.length) {\n\t\treturn;\n\t}\n\n\tif (channels.length === 1) {\n\t\tcontent = m('a', {\n\t\t\tclass: 'OC-Panel__link',\n\t\t\tonclick: inviteFn(channels[0].instance)\n\t\t}, 'Invite to ' + channels[0].instance.displayLabel());\n\t} else {\n\t\tchan_list = _.map(channels, channel => {\n\t\t\treturn m('a', {\n\t\t\t\tclass: 'OC-Panel__link',\n\t\t\t\tonclick: inviteFn(channel.instance)\n\t\t\t}, channel.instance.displayLabel());\n\t\t});\n\n\t\tcontent = [\n\t\t\tm('hr')\n\t\t].concat(chan_list);\n\t};\n\n\treturn m('div', {\n\t\tclass: 'OC-Panel__invite-list OC-Panel__invite-list--' + (channels.length === 1 ? 'single' : 'multiple')\n\t}, content);\n\n\tfunction inviteFn(channel) {\n\t\treturn () => {\n\t\t\tcontroller.inviteToChannel(channel);\n\t\t};\n\t};\n};\n\nUserPanel.viewModAction = function(controller) {\n\tif (!controller.room.access.is_reddit_mod) {\n\t\treturn;\n\t}\n\n\tvar content = [\n\t\tm('hr'),\n\t\tm('a', {\n\t\t\tclass: 'OC-Panel__link',\n\t\t\tonclick: controller.banFromChannel\n\t\t}, 'Ban user')\n\t];\n\n/*\ntoolbox note\n* when moving a window, it changes the z-index to 100000. Why change it at all?\n* user notes gets the subreddit from the URL, not the subreddit given in the dom. this causes issues in oc to show correct notes when\n  browsing /r/all while chatting in /r/orangechat for example\n */\n/* dev toolbox version\n<div class=\"entry thing ut-thing\" data-subreddit=\"history\" data-author=\"noeatnosleep\"> \n    <span class=\"author user\" style=\"display:none\">noeatnosleep</span>\n    <a class=\"bylink\" style=\"display:none\" href=\"https://orangechat.io/#/r/history\">channel link</a>\n    <a href=\"javascript:;\" title=\"Perform various mod actions on this user\" class=\"global-mod-button\">mod</a><br>\n    \n    <a href=\"javascript:;\" class=\"user-history-button\" title=\"view user history\">user history</a><br>\n    <span title=\"View and add notes about this user for /r/history\" class=\"usernote-button usernote-span-history\"><a class=\"add-user-tag-history\" id=\"add-user-tag\" href=\"javascript:;\">Notes</a></span>\n</div>\n */\n\n/* live toolbox version\n<div class=\"thing color-processed\" data-subreddit=\"history\" data-author=\"noeatnosleep\">\n    <div class=\"entry mod-button\" subreddit=\"history\">\n        <span class=\"author user\" style=\"display:none\">noeatnosleep</span>\n        <a class=\"bylink\" style=\"display:none\" href=\"https://orangechat.io/#/r/history\">channel link</a>\n        <a href=\"javascript:;\" title=\"Perform various mod actions on this user\" class=\"global-mod-button\">mod</a><br>\n        \n        <a href=\"javascript:;\" class=\"user-history-button\" title=\"view user history\">user history</a><br>\n        \n        <span title=\"View and add notes about this user for /r/history\" class=\"usernote-button usernote-span-history\">\n            <a class=\"add-user-tag-history\" id=\"add-user-tag\" href=\"javascript:;\">Notes</a>\n        </span>\n    </div>\n</div>\n\n\n<div class=\"thing color-processed\" data-subreddit=\"history\" data-author=\"noeatnosleep\">\n    <div class=\"entry mod-button\" subreddit=\"history\">\n        <span class=\"subreddit\" style=\"display:none\">history</span>\n        <span class=\"author user\" style=\"display:none\">noeatnosleep</span>\n        <a class=\"bylink\" style=\"display:none\" href=\"https://orangechat.io/#/r/history\">channel link</a>\n        <a href=\"javascript:;\" title=\"Perform various mod actions on this user\" class=\"global-mod-button\">mod</a><br>\n        \n        <a href=\"javascript:;\" class=\"user-history-button\" title=\"view user history\">user history</a><br>\n        \n        <span title=\"View and add notes about this user for /r/history\" class=\"usernote-button usernote-span-history\">\n            <a class=\"add-user-tag-history\" id=\"add-user-tag\" href=\"javascript:;\">Notes</a>\n        </span>\n    </div>\n</div>\n */\n \tvar subreddit_name = (controller.room.name() || '').replace('reddit_sub_', '').replace('reddit_mod_', '');\n \tcontent.push(m('hr'));\n\tcontent.push(\n\t\tm('div', {class:'thing color-processed', 'data-subreddit':subreddit_name, 'data-author': controller.username}, [\n\t\t\tm('div', {class: 'entry mod-button', subreddit:subreddit_name}, [\n\t\t\t\tm('span', {class: 'subreddit', style:'display:none;'}, subreddit_name),\n\t\t\t\tm('span', {class: 'author user', style:'display:none;'}, controller.username),\n\t\t\t\tm('a', {class:\"bylink\", style:'display:none;', href:window.location.href}, 'channel link'),\n\t\t\t\tm('a', {class:\"global-mod-button\", title:'display:none;', href:'javascript:;', title:'Perform various mod actions on this user', style:'display:none;'}, 'mod'),\n\n\t\t\t\tm('a', {class:\"OC-Panel__link user-history-button\", title:\"view user history\", onclick:controller.toolboxShowUser}, 'Subreddit history'),\n\t\t\t\tm('span', {\n\t\t\t\t\ttitle: \"View and add notes about this user for /r/\"+subreddit_name,\n\t\t\t\t\tclass:\"usernote-button usernote-span-\"+subreddit_name\n\t\t\t\t}, [\n\t\t\t\t\tm('a', {class:\"OC-Panel__link add-user-tag-\"+subreddit_name, id:\"add-user-tag\", onclick:controller.toolboxShowUser}, 'Notes')\n\t\t\t\t])\n\t\t\t])\n\t\t])\n\t);\n\n\treturn m('div', {\n\t\tclass: 'OC-Panel__mod-actions'\n\t}, content);\n};\n\nexport default UserPanel;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/Panel/Panels/UserPanel.js\n **/","import Subchat from '../../../Services/Subchat.js';\n\nvar GroupSettings = {};\n\nGroupSettings.controller = function(args) {\n\tthis.room = args.room;\n\tthis.room_manager = args.room_manager;\n\tthis.subchat = Subchat.instance();\n\n\tthis.target_username = m.prop('');\n\tthis.channel_label = m.prop(this.room.label());\n\n\tthis.title = m.prop('group options');\n\n\tthis.sendInvite = e => {\n\t\tvar event = $.event.fix(e);\n\t\tevent.preventDefault();\n\n\t\tvar usernames = this.target_username().split(/[ ,]/);\n\t\tusernames = _.compact(usernames).join(',');\n\n\t\tthis.subchat.inviteToChannel(this.room.name(), usernames).then((resp) => {\n\t\t\tif (resp.status == 'ok') {\n\t\t\t\targs.bus.trigger('panel.close');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconsole.log('sendInvite() Something went wrong...', resp);\n\t\t});\n\t};\n\n\tthis.saveName = e => {\n\t\tvar event = $.event.fix(e);\n\t\tevent.preventDefault();\n\n\t\tvar new_name = this.channel_label();\n\t\tif (!new_name) {\n\t\t\t// TODO: Show an error or highlight the name field in red or something\n\t\t\treturn;\n\t\t}\n\n\t\tvar updates = {\n\t\t\tlabel: new_name\n\t\t};\n\n\t\tthis.subchat.updateChannel(this.room.name(), updates).then((resp) => {\n\t\t\tif (resp.status == 'ok') {\n\t\t\t\targs.bus.trigger('messageroom.renamed', this.room);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconsole.log('updateChannel() Something went wrong...', resp);\n\t\t});\n\t};\n};\n\nGroupSettings.view = function(controller) {\n\treturn m('div', {class: 'OC-MessageRoom__group-settings'}, [\n\n\t\tm('form', {class: 'OC-MessageRoom__group-settings-section', onsubmit: controller.sendInvite}, [\n\t\t\tm('input', {\n\t\t\t\tplaceholder: 'type any username',\n\t\t\t\tid: 'groupinvite',\n\t\t\t\tonkeyup: m.withAttr('value', controller.target_username)\n\t\t\t}),\n\t\t\tm('button[type=\"submit\"]', [\n\t\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"24\"][height=\"24\"][viewBox=\"0 0 24 24\"]', [\n\t\t\t\t\tm('path[d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"]')\n\t\t\t\t])\n\t\t\t]),\n\t\t\tm('label[for=\"groupinvite\"]', 'Invite someone to this channel')\n\t\t]),\n\n\t\tm('form', {class: 'OC-MessageRoom__group-settings-section', onsubmit: controller.saveName}, [\n\t\t\tm('input', {\n\t\t\t\tplaceholder: 'think of a cool name',\n\t\t\t\tid: 'groupname',\n\t\t\t\tonkeyup: m.withAttr('value', controller.channel_label),\n\t\t\t\t//config: GroupSettings.viewConfigChannelname\n\t\t\t\tvalue: controller.channel_label()\n\t\t\t}),\n\t\t\tm('button[type=\"submit\"]', [\n\t\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"24\"][height=\"24\"][viewBox=\"0 0 24 24\"]', [\n\t\t\t\t\tm('path[d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"]')\n\t\t\t\t])\n\t\t\t]),\n\t\t\tm('label[for=\"groupname\"]', 'Change the group name')\n\t\t])\n\t]);\n};\n\nGroupSettings.viewConfigChannelname = function(el, already_init, ctx, vdom) {\n\tif (!already_init) {\n\t\tel._created = (new Date()).toString();\n\t\t//vdom.attrs.value = ctx.channel_label\n\t};\n};\n\nexport default GroupSettings;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/MessageRoom/Views/GroupSettings.js\n **/","import './OptionsMenu.styl';\n\nimport * as Helpers from '../../Helpers/Helpers.js';\nimport Subchat from '../../Services/Subchat.js';\n\n/**\n * The sidebar UI\n */\nvar OptionsMenu = {};\n\nOptionsMenu.controller = function(args) {\n\t_.extend(this, Backbone.Events);\n\tthis.bus = args.bus;\n\tthis.subchat = Subchat.instance();\n\n\tthis.listenTo(this.bus, 'action.document_click', (event) => {\n\t\tthis.close();\n\t});\n\n\tthis.onLogoutItemClick = () => {\n\t\tif (!confirm('Are you sure you want to logout of OrangeChat? This will close any conversations you are currently in')) {\n\t\t\treturn;\n\t\t}\n\t\tthis.subchat.logout().then(() => {\n\t\t\twindow.location.reload();\n\t\t});\n\t};\n\n\tthis.onPreferencesClick = () => {\n\t\tthis.bus.trigger('action.show_settings');\n\t};\n\n\tthis.close = () => {\n\t\tthis.trigger('close');\n\t\tthis.stopListening();\n\t};\n\n\tthis.onClick = (event) => {\n\t\tevent = $.event.fix(event);\n\t\tevent.stopPropagation();\n\t\tthis.close();\n\t};\n};\n\nOptionsMenu.view = function(controller) {\n\tvar items = [];\n\n\titems.push(\n\t\tm('h5', {\n\t\t\tclass: 'OC-OptionsMenu__title'\n\t\t}, '/u/' + controller.subchat.username())\n\t);\n\n\titems.push(\n\t\tm('a', {\n\t\t\tonclick: controller.onPreferencesClick,\n\t\t\tclass: 'OC-OptionsMenu__link'\n\t\t}, 'Preferences')\n\t);\n\n\tvar is_logged_in = !!controller.subchat.username();\n\tif (is_logged_in) {\n\t\titems.push(\n\t\t\tm('a', {\n\t\t\t\tonclick: controller.onLogoutItemClick,\n\t\t\t\tclass: 'OC-OptionsMenu__link'\n\t\t\t}, 'Logout')\n\t\t);\n\t}\n\n\titems.push(\n\t\tm('hr')\n\t);\n\n\tif (!Helpers.hasExtension() && !Helpers.isInReddit()) {\n\t\titems.push(\n\t\t\tm('a', {\n\t\t\t\thref: 'https://orangechat.io/',\n\t\t\t\tclass: 'OC-OptionsMenu__link',\n\t\t\t\ttarget: '_blank'\n\t\t\t}, 'Download browser extension')\n\t\t);\n\t}\n\n\titems.push(\n\t\tm('a', {\n\t\t\thref: 'https://orangechat.io/',\n\t\t\tclass: 'OC-OptionsMenu__link',\n\t\t\ttarget: '_blank'\n\t\t}, 'orangechat.io')\n\t);\n\titems.push(\n\t\tm('a', {\n\t\t\thref: 'https://twitter.com/orangechatio',\n\t\t\tclass: 'OC-OptionsMenu__link',\n\t\t\ttarget: '_blank'\n\t\t}, 'Twitter')\n\t);\n\n\treturn m('div', {\n\t\tonclick: controller.onClick,\n\t\tclass: 'OC-OptionsMenu'\n\t}, items);\n};\n\nexport default OptionsMenu;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/OptionsMenu/OptionsMenu.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./OptionsMenu.styl\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./OptionsMenu.styl\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./OptionsMenu.styl\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Components/OptionsMenu/OptionsMenu.styl\n ** module id = 30\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".OC-OptionsMenu {\\n  position: absolute;\\n  left: 10px;\\n  top: 10px;\\n  z-index: 120;\\n  right: 10px;\\n  background-color: #fff;\\n  border-radius: 3px;\\n  box-shadow: 0 1px 2px 0 rgba(0,0,0,0.14), 0 0px 5px 0 rgba(0,0,0,0.12), 0 2px 1px -2px rgba(0,0,0,0.2);\\n  overflow: hidden;\\n  padding: 10px 0;\\n}\\n.OC-OptionsMenu__title {\\n  font-size: 1.071428571428571em;\\n  font-weight: 500;\\n  color: rgba(0,0,0,0.87);\\n  padding: 10px 16px;\\n  padding-top: 0;\\n}\\n.OC-OptionsMenu__link {\\n  cursor: pointer;\\n  color: rgba(0,0,0,0.87);\\n  font-size: 1em;\\n  padding: 10px 16px;\\n  display: block;\\n}\\n.OC-OptionsMenu__link:hover {\\n  background-color: rgba(0,0,0,0.04);\\n}\\n.OC-OptionsMenu hr {\\n  margin: 10px 0;\\n  border: 0;\\n  border-top: 1px solid rgba(0,0,0,0.13);\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/stylus-loader!./src/Components/OptionsMenu/OptionsMenu.styl\n ** module id = 31\n ** module chunks = 0\n **/","import './Topbar.styl';\n\n/**\n * The topbar UI\n */\nvar Topbar = {};\n\nTopbar.controller = function(args) {\n\tthis.app = args.app;\n\n\tthis.toggleApp = () => {\n\t\tthis.app.bus.trigger('action.toggle_app');\n\t};\n};\n\nTopbar.view = function(controller) {\n\tvar active_room = controller.app.rooms.active();\n\tvar total_unread = 0;\n\tvar have_highlight = false;\n\tvar title = [\n\t\tm('img', {\n\t\t\tclass: 'OC-Topbar__branding-logo',\n\t\t\tsrc: 'https://app.orangechat.io/assets/logo-white.svg'\n\t\t})\n\t];\n\n\thave_highlight = active_room ?\n\t\tactive_room.instance.unread_highlight :\n\t\tfalse;\n\n\tcontroller.app.rooms.rooms.map(function(room) {\n\t\ttotal_unread += room.instance.unread_counter;\n\t});\n\n\tif (total_unread > 0) {\n\t\ttitle.push(m('div', {\n\t\t\tclass: 'OC-Topbar__badge',\n\t\t\ttitle: 'Unread messages'\n\t\t}, total_unread));\n\t}\n\n\treturn m('div', {\n\t\tclass: (total_unread > 0 && have_highlight) ?\n\t\t\t'OC-Topbar OC-Topbar--new-messages' :\n\t\t\t'OC-Topbar',\n\t\tonclick: controller.toggleApp\n\t}, title);\n};\n\nexport default Topbar;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/Topbar/Topbar.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Topbar.styl\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Topbar.styl\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Topbar.styl\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Components/Topbar/Topbar.styl\n ** module id = 33\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".OC-Topbar {\\n  display: block;\\n  padding: 20px 32px;\\n  cursor: pointer;\\n  zoom: 1;\\n}\\n.OC-Topbar:after,\\n.OC-Topbar:before {\\n  content: \\\"\\\";\\n  display: table;\\n}\\n.OC-Topbar:after {\\n  clear: both;\\n}\\n.OC-Topbar__branding-logo {\\n  height: 24px;\\n  width: auto;\\n  display: block;\\n  float: left;\\n}\\n.OC-Topbar__badge {\\n  display: block;\\n  color: #fff;\\n  font-size: 0.857142857142857em;\\n  height: 18px;\\n  padding: 0 8px;\\n  border: 1px solid #fff;\\n  border-radius: 10px;\\n  line-height: 1;\\n  padding-top: 2px;\\n  text-align: center;\\n  float: right;\\n  margin-left: 16px;\\n  margin-top: 4px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/stylus-loader!./src/Components/Topbar/Topbar.styl\n ** module id = 34\n ** module chunks = 0\n **/","import './HomeView.styl';\n\nimport Subchat from '../../Services/Subchat.js';\n\nvar HomeView = {};\n\nHomeView.controller = function(args) {\n\tvar app = args.app;\n\n\tthis.getStarted = () => {\n\t\tapp.subchat.auth()\n\t\t\t.then((result) => {\n\t\t\t\t// Logged in OK...\n\t\t\t\tconsole.log('Logged in ok.', result);\n\t\t\t\tapp.addInitialRooms();\n\t\t\t})\n\t\t\t.then(null, (err) => {\n\t\t\t\t// Logging in failed...\n\t\t\t\t//console.log('Failed to login.', err);\n\t\t\t});\n\t};\n};\n\nHomeView.view = function(controller) {\n\treturn m('div', {class: 'OC-HomeView'}, [\n\t\tm('div', {class: 'OC-HomeView__get-started'}, [\n\t\t\tm('img', {\n\t\t\t\tclass: 'OC-HomeView__get-started-branding-logo',\n\t\t\t\tsrc: 'https://app.orangechat.io/assets/logo-white.svg'\n\t\t\t}),\n\t\t\tm('h4', 'Welcome to orangechat.io'),\n\t\t\tm('a', {class: 'OC-HomeView__get-started-button', onclick: controller.getStarted}, 'Get Started')\n\t\t])\n\t]);\n};\n\nexport default HomeView;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/HomeView/HomeView.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./HomeView.styl\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./HomeView.styl\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./HomeView.styl\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Components/HomeView/HomeView.styl\n ** module id = 36\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".OC-HomeView {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  bottom: 0;\\n  right: 0;\\n  display: -webkit-box;\\n  display: -webkit-flex;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-align: center;\\n  -webkit-align-items: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -webkit-box-pack: center;\\n  -webkit-justify-content: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n  -webkit-flex-direction: column;\\n      -ms-flex-direction: column;\\n          flex-direction: column;\\n  text-align: center;\\n  background: #ff5722;\\n}\\n.OC-HomeView__get-started {\\n  padding: 0 25px;\\n}\\n.OC-HomeView__get-started-branding-logo {\\n  height: 35px;\\n  width: auto;\\n}\\n.OC-HomeView__get-started h4 {\\n  font-size: 1.071428571428571em;\\n  font-weight: 500;\\n  color: #fff;\\n  margin: 10px 0;\\n}\\n.OC-HomeView__get-started-button {\\n  display: inline-block;\\n  text-align: center;\\n  font-size: 1em;\\n  -webkit-align-self: center;\\n      -ms-flex-item-align: center;\\n          align-self: center;\\n  color: #fff;\\n  padding: 3px 8px;\\n  font-weight: 500;\\n  border: 1px solid #fff;\\n  border-radius: 3px;\\n  line-height: 1.1;\\n  cursor: pointer;\\n  background-color: #ff5722;\\n}\\n.OC-HomeView__get-started-button:hover {\\n  border-color: rgba(255,255,255,0.7);\\n  color: rgba(255,255,255,0.7);\\n  text-decoration: none;\\n}\\n.OC__ui--standalone .OC-HomeView__get-started h4,\\n.OC__ui--standalone .OC-HomeView__get-started-button {\\n  font-size: 1.928571428571429em;\\n}\\n.OC__ui--standalone .OC-HomeView__get-started-button {\\n  margin-top: 30px;\\n}\\n.OC__ui--standalone .OC-HomeView__get-started-branding-logo {\\n  height: 60px;\\n  margin-bottom: 10px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/stylus-loader!./src/Components/HomeView/HomeView.styl\n ** module id = 37\n ** module chunks = 0\n **/","import './Settings.styl';\n\nimport * as Helpers from '../../Helpers/Helpers.js';\nimport Subchat from '../../Services/Subchat.js';\nimport * as Notifications from '../../Services/Notifications.js';\n\n\nvar Settings = {};\n\nSettings.controller = function(args) {\n\tthis.bus = args.bus;\n\n\tthis.toggleApp = () => {\n\t\tthis.bus.trigger('action.toggle_app');\n\t};\n\n\tthis.close = () => {\n\t\tthis.bus.trigger('action.close_workspace');\n\t};\n\n\t/**\n\t * Notifications\n\t */\n\tthis.notificationState = () => {\n\t\treturn Notifications.notificationState();\n\t};\n\n\tthis.requestNotificationPermission = () => {\n\t\tNotifications.requestPermission((permission) => {\n\t\t\tm.redraw();\n\t\t});\n\t};\n};\n\n\nSettings.view = function(controller) {\n\tvar header = Settings.viewHeader(controller);\n\tvar content = Settings.viewContent(controller);\n\n\treturn m('div', {class: 'OC-MessageRoom'}, [\n\t\theader,\n\t\tm('div', {class: 'OC__workspace-content'}, content)\n\t]);\n};\n\nSettings.viewHeader = function(controller) {\n\treturn m('div', {class: 'OC-MessageRoom__header'}, [\n\t\tm('div', {class: 'OC-MessageRoom__header-collapse', title: 'Toggle sidebar', onclick: controller.close}, [\n\t\t\tm('svg[version=\"1.1\"][xmlns=\"http://www.w3.org/2000/svg\"][xmlns:xlink=\"http://www.w3.org/1999/xlink\"][width=\"24\"][height=\"24\"][viewBox=\"0 0 24 24\"]', [\n\t\t\t\tm('path[d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"]')\n\t\t\t])\n\t\t]),\n\t\tm('div', {class: 'OC-MessageRoom__header-info', onclick: Helpers.isInReddit() ? controller.toggleApp : null}, [\n\t\t\tm('h4', 'Preferences')\n\t\t])\n\t]);\n};\n\nSettings.viewContent = function(controller) {\n\tvar sections = [];\n\n\tsections.push(m('div', {\n\t\tclass: 'OC-Settings__section'\n\t}, Settings.viewSectionNotifications(controller)));\n\n\treturn sections;\n};\n\nSettings.viewSectionNotifications = function(controller) {\n\tvar state = controller.notificationState();\n\tvar action = null;\n\n\tif (state === 'needs_request') {\n\t\taction = m('button', {onclick: controller.requestNotificationPermission}, 'Enable Notifications');\n\t} else if (state === 'requesting') {\n\t\taction = m('button', {disabled:true}, 'Requesting permission...');\n\t} else if (state === 'not_supported') {\n\t\taction = m('span', 'Your browser does not support desktop notifications :(');\n\t} else if (state === 'denied') {\n\t\taction = m('span', 'Your browser has denied access to notifications. You may enable them in your browser settings');\n\t} else if (state === 'ok') {\n\t\taction = m('span', 'Notifications enabled :)');\n\t}\n\n\treturn [\n\t\tm('h5', 'Enable message notifications'),\n\t\tm('p', 'Recieve a notification when somebody mentions you'),\n\t\tm('div', {style: 'text-align:right;'}, [\n\t\t\taction\n\t\t])\n\t];\n};\n\nexport default Settings;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Components/Settings/Settings.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Settings.styl\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Settings.styl\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/stylus-loader/index.js!./Settings.styl\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Components/Settings/Settings.styl\n ** module id = 39\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".OC-Settings__header {\\n  height: 46px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/stylus-loader!./src/Components/Settings/Settings.styl\n ** module id = 40\n ** module chunks = 0\n **/","import SockJS from 'sockjs-client';\n\nvar MESSAGE_TYPE_JOIN = '01';\nvar MESSAGE_TYPE_LEAVE = '02';\nvar MESSAGE_TYPE_MESSAGE = '03';\nvar MESSAGE_TYPE_GROUPMETA = '04';\n\nclass Transport {\n\n\tconstructor(sid, bus) {\n\t\tthis.sid = null;\n\t\tthis.bus = bus;\n\t\tthis.connected = false;\n\t\tthis.queue = [];\n\n\t\tthis.setSessionId(sid);\n\t\tthis.updateGroupMetaLoop();\n\t}\n\n\tsetSessionId(sid) {\n\t\tthis.sid = sid;\n\t\tif (sid) {\n\t\t\tthis.initSocket();\n\t\t}\n\t}\n\n\tinitSocket() {\n\t\tvar self = this;\n\t\tvar reconnect_attempts = 0;\n\n\t\tconnectSocket();\n\n\t\tfunction connectSocket() {\n\t\t\tself.bus.trigger('transport.connecting', {\n\t\t\t\treconnect_attempts: reconnect_attempts\n\t\t\t});\n\t\t\tself.sock = new SockJS('https://app.orangechat.io/transport2?sid=' + self.sid);\n\t\t\tself.sock.onopen = onOpen;\n\t\t\tself.sock.onclose = onClose;\n\t\t\tself.sock.onmessage = onMessage;\n\t\t}\n\n\t\tfunction onOpen() {\n\t\t\tself.bus.trigger('transport.open', {\n\t\t\t\twas_reconnection: reconnect_attempts > 0,\n\t\t\t\treconnect_attempts: reconnect_attempts\n\t\t\t});\n\n\t\t\treconnect_attempts = 0;\n\t\t\tself.connected = true;\n\t\t\tself.flushSocket();\n\t\t}\n\n\t\tfunction onMessage(event) {\n\t\t\tvar message_type = event.data.substring(0, 2);\n\t\t\tvar raw_message = event.data.substring(2);\n\t\t\tvar message;\n\n\t\t\tif (message_type === MESSAGE_TYPE_MESSAGE) {\n\t\t\t\ttry {\n\t\t\t\t\tmessage = JSON.parse(raw_message);\n\t\t\t\t\tself.bus.trigger('transport.message', message);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t}\n\n\t\t\t} else if (message_type === MESSAGE_TYPE_GROUPMETA) {\n\t\t\t\tvar groups = {};\n\t\t\t\t_.map(raw_message.split(' '), function(group_meta) {\n\t\t\t\t\tvar parts = group_meta.split(':');\n\t\t\t\t\tgroups[parts[0]] = {\n\t\t\t\t\t\tname: parts[0],\n\t\t\t\t\t\tnum_users: parseInt(parts[1], 10)\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\tm.startComputation();\n\t\t\t\tself.bus.trigger('transport.groupmeta', groups);\n\t\t\t\tm.endComputation();\n\t\t\t}\n\t\t}\n\n\t\tfunction onClose() {\n\t\t\tself.connected = false;\n\t\t\tself.bus.trigger('transport.close');\n\n\t\t\tsetTimeout(function() {\n\t\t\t\treconnect_attempts++;\n\t\t\t\tconnectSocket();\n\t\t\t}, reconnectInterval(reconnect_attempts));\n\t\t}\n\n\t\t// Exponential backoff upto 1min for reconnections\n\t\tfunction reconnectInterval(attempt_num) {\n\t\t\tvar interval = Math.pow(2, attempt_num) - 1;\n\t\t\tinterval = Math.min(60, interval);\n\t\t\treturn interval * 1000;\n\t\t}\n\t}\n\n\tjoin(group) {\n\t\tvar group_str = [].concat(group).join(',');\n\t\tthis.queue.push(MESSAGE_TYPE_JOIN + group_str);\n\t\tthis.flushSocket();\n\t}\n\n\tleave(group) {\n\t\tvar group_str = [].concat(group).join(',');\n\t\tthis.queue.push(MESSAGE_TYPE_LEAVE + group_str);\n\t\tthis.flushSocket();\n\t}\n\n\tupdateGroupMeta() {\n\t\tthis.queue.push(MESSAGE_TYPE_GROUPMETA);\n\t\tthis.flushSocket();\n\t}\n\n\tupdateGroupMetaLoop() {\n\t\tif (this.connected) {\n\t\t\tthis.updateGroupMeta();\n\t\t}\n\t\tsetTimeout(_.bind(this.updateGroupMetaLoop, this), 10000);\n\t}\n\n\tflushSocket() {\n\t\tif (!this.sock || this.sock.readyState !== 1) {\n\t\t\treturn;\n\t\t}\n\n\t\t_.each(this.queue, (data) => {\n\t\t\tthis.sock.send(data);\n\t\t});\n\n\t\tthis.queue = [];\n\t}\n\n}\n\nexport default Transport;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Services/Transport.js\n **/","'use strict';\n\nvar transportList = require('./transport-list');\n\nmodule.exports = require('./main')(transportList);\n\n// TODO can't get rid of this until all servers do\nif ('_sockjs_onload' in global) {\n  setTimeout(global._sockjs_onload, 1);\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/entry.js\n ** module id = 42\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = [\n  // streaming transports\n  require('./transport/websocket')\n, require('./transport/xhr-streaming')\n, require('./transport/xdr-streaming')\n, require('./transport/eventsource')\n, require('./transport/lib/iframe-wrap')(require('./transport/eventsource'))\n\n  // polling transports\n, require('./transport/htmlfile')\n, require('./transport/lib/iframe-wrap')(require('./transport/htmlfile'))\n, require('./transport/xhr-polling')\n, require('./transport/xdr-polling')\n, require('./transport/lib/iframe-wrap')(require('./transport/xhr-polling'))\n, require('./transport/jsonp-polling')\n];\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport-list.js\n ** module id = 43\n ** module chunks = 0\n **/","'use strict';\n\nvar utils = require('../utils/event')\n  , urlUtils = require('../utils/url')\n  , inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , WebsocketDriver = require('./driver/websocket')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:websocket');\n}\n\nfunction WebSocketTransport(transUrl, ignore, options) {\n  if (!WebSocketTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  EventEmitter.call(this);\n  debug('constructor', transUrl);\n\n  var self = this;\n  var url = urlUtils.addPath(transUrl, '/websocket');\n  if (url.slice(0, 5) === 'https') {\n    url = 'wss' + url.slice(5);\n  } else {\n    url = 'ws' + url.slice(4);\n  }\n  this.url = url;\n\n  this.ws = new WebsocketDriver(this.url, undefined, options);\n  this.ws.onmessage = function(e) {\n    debug('message event', e.data);\n    self.emit('message', e.data);\n  };\n  // Firefox has an interesting bug. If a websocket connection is\n  // created after onunload, it stays alive even when user\n  // navigates away from the page. In such situation let's lie -\n  // let's not open the ws connection at all. See:\n  // https://github.com/sockjs/sockjs-client/issues/28\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=696085\n  this.unloadRef = utils.unloadAdd(function() {\n    debug('unload');\n    self.ws.close();\n  });\n  this.ws.onclose = function(e) {\n    debug('close event', e.code, e.reason);\n    self.emit('close', e.code, e.reason);\n    self._cleanup();\n  };\n  this.ws.onerror = function(e) {\n    debug('error event', e);\n    self.emit('close', 1006, 'WebSocket connection broken');\n    self._cleanup();\n  };\n}\n\ninherits(WebSocketTransport, EventEmitter);\n\nWebSocketTransport.prototype.send = function(data) {\n  var msg = '[' + data + ']';\n  debug('send', msg);\n  this.ws.send(msg);\n};\n\nWebSocketTransport.prototype.close = function() {\n  debug('close');\n  if (this.ws) {\n    this.ws.close();\n  }\n  this._cleanup();\n};\n\nWebSocketTransport.prototype._cleanup = function() {\n  debug('_cleanup');\n  var ws = this.ws;\n  if (ws) {\n    ws.onmessage = ws.onclose = ws.onerror = null;\n  }\n  utils.unloadDel(this.unloadRef);\n  this.unloadRef = this.ws = null;\n  this.removeAllListeners();\n};\n\nWebSocketTransport.enabled = function() {\n  debug('enabled');\n  return !!WebsocketDriver;\n};\nWebSocketTransport.transportName = 'websocket';\n\n// In theory, ws should require 1 round trip. But in chrome, this is\n// not very stable over SSL. Most likely a ws connection requires a\n// separate SSL connection, in which case 2 round trips are an\n// absolute minumum.\nWebSocketTransport.roundTrips = 2;\n\nmodule.exports = WebSocketTransport;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/websocket.js\n ** module id = 44\n ** module chunks = 0\n **/","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/process/browser.js\n ** module id = 45\n ** module chunks = 0\n **/","'use strict';\n\nvar random = require('./random');\n\nvar onUnload = {}\n  , afterUnload = false\n    // detect google chrome packaged apps because they don't allow the 'unload' event\n  , isChromePackagedApp = global.chrome && global.chrome.app && global.chrome.app.runtime\n  ;\n\nmodule.exports = {\n  attachEvent: function(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.addEventListener(event, listener, false);\n    } else if (global.document && global.attachEvent) {\n      // IE quirks.\n      // According to: http://stevesouders.com/misc/test-postmessage.php\n      // the message gets delivered only to 'document', not 'window'.\n      global.document.attachEvent('on' + event, listener);\n      // I get 'window' for ie8.\n      global.attachEvent('on' + event, listener);\n    }\n  }\n\n, detachEvent: function(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.removeEventListener(event, listener, false);\n    } else if (global.document && global.detachEvent) {\n      global.document.detachEvent('on' + event, listener);\n      global.detachEvent('on' + event, listener);\n    }\n  }\n\n, unloadAdd: function(listener) {\n    if (isChromePackagedApp) {\n      return null;\n    }\n\n    var ref = random.string(8);\n    onUnload[ref] = listener;\n    if (afterUnload) {\n      setTimeout(this.triggerUnloadCallbacks, 0);\n    }\n    return ref;\n  }\n\n, unloadDel: function(ref) {\n    if (ref in onUnload) {\n      delete onUnload[ref];\n    }\n  }\n\n, triggerUnloadCallbacks: function() {\n    for (var ref in onUnload) {\n      onUnload[ref]();\n      delete onUnload[ref];\n    }\n  }\n};\n\nvar unloadTriggered = function() {\n  if (afterUnload) {\n    return;\n  }\n  afterUnload = true;\n  module.exports.triggerUnloadCallbacks();\n};\n\n// 'unload' alone is not reliable in opera within an iframe, but we\n// can't use `beforeunload` as IE fires it on javascript: links.\nif (!isChromePackagedApp) {\n  module.exports.attachEvent('unload', unloadTriggered);\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/utils/event.js\n ** module id = 46\n ** module chunks = 0\n **/","'use strict';\n\n/* global crypto:true */\nvar crypto = require('crypto');\n\n// This string has length 32, a power of 2, so the modulus doesn't introduce a\n// bias.\nvar _randomStringChars = 'abcdefghijklmnopqrstuvwxyz012345';\nmodule.exports = {\n  string: function(length) {\n    var max = _randomStringChars.length;\n    var bytes = crypto.randomBytes(length);\n    var ret = [];\n    for (var i = 0; i < length; i++) {\n      ret.push(_randomStringChars.substr(bytes[i] % max, 1));\n    }\n    return ret.join('');\n  }\n\n, number: function(max) {\n    return Math.floor(Math.random() * max);\n  }\n\n, numberString: function(max) {\n    var t = ('' + (max - 1)).length;\n    var p = new Array(t + 1).join('0');\n    return (p + this.number(max)).slice(-t);\n  }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/utils/random.js\n ** module id = 47\n ** module chunks = 0\n **/","'use strict';\n\nif (global.crypto && global.crypto.getRandomValues) {\n  module.exports.randomBytes = function(length) {\n    var bytes = new Uint8Array(length);\n    global.crypto.getRandomValues(bytes);\n    return bytes;\n  };\n} else {\n  module.exports.randomBytes = function(length) {\n    var bytes = new Array(length);\n    for (var i = 0; i < length; i++) {\n      bytes[i] = Math.floor(Math.random() * 256);\n    }\n    return bytes;\n  };\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/utils/browser-crypto.js\n ** module id = 48\n ** module chunks = 0\n **/","'use strict';\n\nvar URL = require('url-parse');\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:url');\n}\n\nmodule.exports = {\n  getOrigin: function(url) {\n    if (!url) {\n      return null;\n    }\n\n    var p = new URL(url);\n    if (p.protocol === 'file:') {\n      return null;\n    }\n\n    var port = p.port;\n    if (!port) {\n      port = (p.protocol === 'https:') ? '443' : '80';\n    }\n\n    return p.protocol + '//' + p.hostname + ':' + port;\n  }\n\n, isOriginEqual: function(a, b) {\n    var res = this.getOrigin(a) === this.getOrigin(b);\n    debug('same', a, b, res);\n    return res;\n  }\n\n, isSchemeEqual: function(a, b) {\n    return (a.split(':')[0] === b.split(':')[0]);\n  }\n\n, addPath: function (url, path) {\n    var qs = url.split('?');\n    return qs[0] + path + (qs[1] ? '?' + qs[1] : '');\n  }\n\n, addQuery: function (url, q) {\n    return url + (url.indexOf('?') === -1 ? ('?' + q) : ('&' + q));\n  }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/utils/url.js\n ** module id = 49\n ** module chunks = 0\n **/","'use strict';\n\nvar required = require('requires-port')\n  , lolcation = require('./lolcation')\n  , qs = require('querystringify')\n  , relativere = /^\\/(?!\\/)/\n  , protocolre = /^([a-z0-9.+-]+:)?(\\/\\/)?(.*)$/i; // actual protocol is first match\n\n/**\n * These are the parse instructions for the URL parsers, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar instructions = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/\\:(\\d+)$/, 'port'],                 // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n /**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase\n * @property {Boolean} slashes Indicates whether the protocol is followed by double slash (\"//\")\n * @property {String} rest     Rest of the URL that is not part of the protocol\n */\n\n /**\n  * Extract protocol information from a URL with/without double slash (\"//\")\n  *\n  * @param  {String} address   URL we want to extract from.\n  * @return {ProtocolExtract}  Extracted information\n  * @private\n  */\nfunction extractProtocol(address) {\n  var match = protocolre.exec(address);\n  return {\n    protocol: match[1] ? match[1].toLowerCase() : '',\n    slashes: !!match[2],\n    rest: match[3] ? match[3] : ''\n  };\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my CDO.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} location Location defaults for relative paths.\n * @param {Boolean|Function} parser Parser for the query string.\n * @api public\n */\nfunction URL(address, location, parser) {\n  if (!(this instanceof URL)) {\n    return new URL(address, location, parser);\n  }\n\n  var relative = relativere.test(address)\n    , parse, instruction, index, key\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) {\n    parser = qs.parse;\n  }\n\n  location = lolcation(location);\n\n  // extract protocol information before running the instructions\n  var extracted = extractProtocol(address);\n  url.protocol = extracted.protocol || location.protocol || '';\n  url.slashes = extracted.slashes || location.slashes;\n  address = extracted.rest;\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      if (~(index = address.indexOf(parse))) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if (index = parse.exec(address)) {\n      url[key] = index[1];\n      address = address.slice(0, address.length - index[0].length);\n    }\n\n    url[key] = url[key] || (instruction[3] || ('port' === key && relative) ? location[key] || '' : '');\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) {\n      url[key] = url[key].toLowerCase();\n    }\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n  if (url.auth) {\n    instruction = url.auth.split(':');\n    url.username = instruction[0] || '';\n    url.password = instruction[1] || '';\n  }\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} prop          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function used to parse\n *                               the query.\n *                               When setting the protocol, double slash will be removed from\n *                               the final url if it is true.\n * @returns {URL}\n * @api public\n */\nURL.prototype.set = function set(part, value, fn) {\n  var url = this;\n\n  if ('query' === part) {\n    if ('string' === typeof value && value.length) {\n      value = (fn || qs.parse)(value);\n    }\n\n    url[part] = value;\n  } else if ('port' === part) {\n    url[part] = value;\n\n    if (!required(value, url.protocol)) {\n      url.host = url.hostname;\n      url[part] = '';\n    } else if (value) {\n      url.host = url.hostname +':'+ value;\n    }\n  } else if ('hostname' === part) {\n    url[part] = value;\n\n    if (url.port) value += ':'+ url.port;\n    url.host = value;\n  } else if ('host' === part) {\n    url[part] = value;\n\n    if (/\\:\\d+/.test(value)) {\n      value = value.split(':');\n      url.hostname = value[0];\n      url.port = value[1];\n    }\n  } else if ('protocol' === part) {\n    url.protocol = value;\n    url.slashes = !fn;\n  } else {\n    url[part] = value;\n  }\n\n  url.href = url.toString();\n  return url;\n};\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String}\n * @api public\n */\nURL.prototype.toString = function toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result = protocol + (url.slashes ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  }\n\n  result += url.hostname;\n  if (url.port) result += ':'+ url.port;\n\n  result += url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n};\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others.\n//\nURL.qs = qs;\nURL.location = lolcation;\nmodule.exports = URL;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/url-parse/index.js\n ** module id = 50\n ** module chunks = 0\n **/","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/requires-port/index.js\n ** module id = 51\n ** module chunks = 0\n **/","'use strict';\n\nvar slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//;\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 }\n  , URL;\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @api public\n */\nmodule.exports = function lolcation(loc) {\n  loc = loc || global.location || {};\n  URL = URL || require('./');\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new URL(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new URL(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/url-parse/lolcation.js\n ** module id = 52\n ** module chunks = 0\n **/","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?&]+)=([^&]*)/g\n    , result = {}\n    , part;\n\n  //\n  // Little nifty parsing hack, leverage the fact that RegExp.exec increments\n  // the lastIndex property so we can continue executing this loop until we've\n  // parsed all results.\n  //\n  for (;\n    part = parser.exec(query);\n    result[decodeURIComponent(part[1])] = decodeURIComponent(part[2])\n  );\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = [];\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      pairs.push(encodeURIComponent(key) +'='+ encodeURIComponent(obj[key]));\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/querystringify/index.js\n ** module id = 53\n ** module chunks = 0\n **/","\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  return ('WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  return JSON.stringify(v);\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage(){\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/debug/browser.js\n ** module id = 54\n ** module chunks = 0\n **/","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = Array.prototype.slice.call(arguments);\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    if ('function' === typeof exports.formatArgs) {\n      args = exports.formatArgs.apply(self, args);\n    }\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/debug/debug.js\n ** module id = 55\n ** module chunks = 0\n **/","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options.long\n    ? long(val)\n    : short(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = '' + str;\n  if (str.length > 10000) return;\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction short(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction long(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/ms/index.js\n ** module id = 56\n ** module chunks = 0\n **/","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/inherits/inherits_browser.js\n ** module id = 57\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , EventTarget = require('./eventtarget')\n  ;\n\nfunction EventEmitter() {\n  EventTarget.call(this);\n}\n\ninherits(EventEmitter, EventTarget);\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  if (type) {\n    delete this._listeners[type];\n  } else {\n    this._listeners = {};\n  }\n};\n\nEventEmitter.prototype.once = function(type, listener) {\n  var self = this\n    , fired = false;\n\n  function g() {\n    self.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  this.on(type, g);\n};\n\nEventEmitter.prototype.emit = function() {\n  var type = arguments[0];\n  var listeners = this._listeners[type];\n  if (!listeners) {\n    return;\n  }\n  // equivalent of Array.prototype.slice.call(arguments, 1);\n  var l = arguments.length;\n  var args = new Array(l - 1);\n  for (var ai = 1; ai < l; ai++) {\n    args[ai - 1] = arguments[ai];\n  }\n  for (var i = 0; i < listeners.length; i++) {\n    listeners[i].apply(this, args);\n  }\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener = EventTarget.prototype.addEventListener;\nEventEmitter.prototype.removeListener = EventTarget.prototype.removeEventListener;\n\nmodule.exports.EventEmitter = EventEmitter;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/event/emitter.js\n ** module id = 58\n ** module chunks = 0\n **/","'use strict';\n\n/* Simplified implementation of DOM2 EventTarget.\n *   http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget\n */\n\nfunction EventTarget() {\n  this._listeners = {};\n}\n\nEventTarget.prototype.addEventListener = function(eventType, listener) {\n  if (!(eventType in this._listeners)) {\n    this._listeners[eventType] = [];\n  }\n  var arr = this._listeners[eventType];\n  // #4\n  if (arr.indexOf(listener) === -1) {\n    // Make a copy so as not to interfere with a current dispatchEvent.\n    arr = arr.concat([listener]);\n  }\n  this._listeners[eventType] = arr;\n};\n\nEventTarget.prototype.removeEventListener = function(eventType, listener) {\n  var arr = this._listeners[eventType];\n  if (!arr) {\n    return;\n  }\n  var idx = arr.indexOf(listener);\n  if (idx !== -1) {\n    if (arr.length > 1) {\n      // Make a copy so as not to interfere with a current dispatchEvent.\n      this._listeners[eventType] = arr.slice(0, idx).concat(arr.slice(idx + 1));\n    } else {\n      delete this._listeners[eventType];\n    }\n    return;\n  }\n};\n\nEventTarget.prototype.dispatchEvent = function() {\n  var event = arguments[0];\n  var t = event.type;\n  // equivalent of Array.prototype.slice.call(arguments, 0);\n  var args = arguments.length === 1 ? [event] : Array.apply(null, arguments);\n  // TODO: This doesn't match the real behavior; per spec, onfoo get\n  // their place in line from the /first/ time they're set from\n  // non-null. Although WebKit bumps it to the end every time it's\n  // set.\n  if (this['on' + t]) {\n    this['on' + t].apply(this, args);\n  }\n  if (t in this._listeners) {\n    // Grab a reference to the listeners list. removeEventListener may alter the list.\n    var listeners = this._listeners[t];\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i].apply(this, args);\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/event/eventtarget.js\n ** module id = 59\n ** module chunks = 0\n **/","module.exports = global.WebSocket || global.MozWebSocket;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/browser/websocket.js\n ** module id = 60\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , XHRLocalObject = require('./sender/xhr-local')\n  , browser = require('../utils/browser')\n  ;\n\nfunction XhrStreamingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrStreamingTransport, AjaxBasedTransport);\n\nXhrStreamingTransport.enabled = function(info) {\n  if (info.nullOrigin) {\n    return false;\n  }\n  // Opera doesn't support xhr-streaming #60\n  // But it might be able to #92\n  if (browser.isOpera()) {\n    return false;\n  }\n\n  return XHRCorsObject.enabled;\n};\n\nXhrStreamingTransport.transportName = 'xhr-streaming';\nXhrStreamingTransport.roundTrips = 2; // preflight, ajax\n\n// Safari gets confused when a streaming ajax request is started\n// before onload. This causes the load indicator to spin indefinetely.\n// Only require body when used in a browser\nXhrStreamingTransport.needBody = !!global.document;\n\nmodule.exports = XhrStreamingTransport;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/xhr-streaming.js\n ** module id = 61\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , urlUtils = require('../../utils/url')\n  , SenderReceiver = require('./sender-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:ajax-based');\n}\n\nfunction createAjaxSender(AjaxObject) {\n  return function(url, payload, callback) {\n    debug('create ajax sender', url, payload);\n    var opt = {};\n    if (typeof payload === 'string') {\n      opt.headers = {'Content-type': 'text/plain'};\n    }\n    var ajaxUrl = urlUtils.addPath(url, '/xhr_send');\n    var xo = new AjaxObject('POST', ajaxUrl, payload, opt);\n    xo.once('finish', function(status) {\n      debug('finish', status);\n      xo = null;\n\n      if (status !== 200 && status !== 204) {\n        return callback(new Error('http status ' + status));\n      }\n      callback();\n    });\n    return function() {\n      debug('abort');\n      xo.close();\n      xo = null;\n\n      var err = new Error('Aborted');\n      err.code = 1000;\n      callback(err);\n    };\n  };\n}\n\nfunction AjaxBasedTransport(transUrl, urlSuffix, Receiver, AjaxObject) {\n  SenderReceiver.call(this, transUrl, urlSuffix, createAjaxSender(AjaxObject), Receiver, AjaxObject);\n}\n\ninherits(AjaxBasedTransport, SenderReceiver);\n\nmodule.exports = AjaxBasedTransport;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/lib/ajax-based.js\n ** module id = 62\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , urlUtils = require('../../utils/url')\n  , BufferedSender = require('./buffered-sender')\n  , Polling = require('./polling')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender-receiver');\n}\n\nfunction SenderReceiver(transUrl, urlSuffix, senderFunc, Receiver, AjaxObject) {\n  var pollUrl = urlUtils.addPath(transUrl, urlSuffix);\n  debug(pollUrl);\n  var self = this;\n  BufferedSender.call(this, transUrl, senderFunc);\n\n  this.poll = new Polling(Receiver, pollUrl, AjaxObject);\n  this.poll.on('message', function(msg) {\n    debug('poll message', msg);\n    self.emit('message', msg);\n  });\n  this.poll.once('close', function(code, reason) {\n    debug('poll close', code, reason);\n    self.poll = null;\n    self.emit('close', code, reason);\n    self.close();\n  });\n}\n\ninherits(SenderReceiver, BufferedSender);\n\nSenderReceiver.prototype.close = function() {\n  debug('close');\n  this.removeAllListeners();\n  if (this.poll) {\n    this.poll.abort();\n    this.poll = null;\n  }\n  this.stop();\n};\n\nmodule.exports = SenderReceiver;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/lib/sender-receiver.js\n ** module id = 63\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:buffered-sender');\n}\n\nfunction BufferedSender(url, sender) {\n  debug(url);\n  EventEmitter.call(this);\n  this.sendBuffer = [];\n  this.sender = sender;\n  this.url = url;\n}\n\ninherits(BufferedSender, EventEmitter);\n\nBufferedSender.prototype.send = function(message) {\n  debug('send', message);\n  this.sendBuffer.push(message);\n  if (!this.sendStop) {\n    this.sendSchedule();\n  }\n};\n\n// For polling transports in a situation when in the message callback,\n// new message is being send. If the sending connection was started\n// before receiving one, it is possible to saturate the network and\n// timeout due to the lack of receiving socket. To avoid that we delay\n// sending messages by some small time, in order to let receiving\n// connection be started beforehand. This is only a halfmeasure and\n// does not fix the big problem, but it does make the tests go more\n// stable on slow networks.\nBufferedSender.prototype.sendScheduleWait = function() {\n  debug('sendScheduleWait');\n  var self = this;\n  var tref;\n  this.sendStop = function() {\n    debug('sendStop');\n    self.sendStop = null;\n    clearTimeout(tref);\n  };\n  tref = setTimeout(function() {\n    debug('timeout');\n    self.sendStop = null;\n    self.sendSchedule();\n  }, 25);\n};\n\nBufferedSender.prototype.sendSchedule = function() {\n  debug('sendSchedule', this.sendBuffer.length);\n  var self = this;\n  if (this.sendBuffer.length > 0) {\n    var payload = '[' + this.sendBuffer.join(',') + ']';\n    this.sendStop = this.sender(this.url, payload, function(err) {\n      self.sendStop = null;\n      if (err) {\n        debug('error', err);\n        self.emit('close', err.code || 1006, 'Sending error: ' + err);\n        self._cleanup();\n      } else {\n        self.sendScheduleWait();\n      }\n    });\n    this.sendBuffer = [];\n  }\n};\n\nBufferedSender.prototype._cleanup = function() {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nBufferedSender.prototype.stop = function() {\n  debug('stop');\n  this._cleanup();\n  if (this.sendStop) {\n    this.sendStop();\n    this.sendStop = null;\n  }\n};\n\nmodule.exports = BufferedSender;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/lib/buffered-sender.js\n ** module id = 64\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:polling');\n}\n\nfunction Polling(Receiver, receiveUrl, AjaxObject) {\n  debug(receiveUrl);\n  EventEmitter.call(this);\n  this.Receiver = Receiver;\n  this.receiveUrl = receiveUrl;\n  this.AjaxObject = AjaxObject;\n  this._scheduleReceiver();\n}\n\ninherits(Polling, EventEmitter);\n\nPolling.prototype._scheduleReceiver = function() {\n  debug('_scheduleReceiver');\n  var self = this;\n  var poll = this.poll = new this.Receiver(this.receiveUrl, this.AjaxObject);\n\n  poll.on('message', function(msg) {\n    debug('message', msg);\n    self.emit('message', msg);\n  });\n\n  poll.once('close', function(code, reason) {\n    debug('close', code, reason, self.pollIsClosing);\n    self.poll = poll = null;\n\n    if (!self.pollIsClosing) {\n      if (reason === 'network') {\n        self._scheduleReceiver();\n      } else {\n        self.emit('close', code || 1006, reason);\n        self.removeAllListeners();\n      }\n    }\n  });\n};\n\nPolling.prototype.abort = function() {\n  debug('abort');\n  this.removeAllListeners();\n  this.pollIsClosing = true;\n  if (this.poll) {\n    this.poll.abort();\n  }\n};\n\nmodule.exports = Polling;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/lib/polling.js\n ** module id = 65\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:xhr');\n}\n\nfunction XhrReceiver(url, AjaxObject) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n\n  this.bufferPosition = 0;\n\n  this.xo = new AjaxObject('POST', url, null);\n  this.xo.on('chunk', this._chunkHandler.bind(this));\n  this.xo.once('finish', function(status, text) {\n    debug('finish', status, text);\n    self._chunkHandler(status, text);\n    self.xo = null;\n    var reason = status === 200 ? 'network' : 'permanent';\n    debug('close', reason);\n    self.emit('close', null, reason);\n    self._cleanup();\n  });\n}\n\ninherits(XhrReceiver, EventEmitter);\n\nXhrReceiver.prototype._chunkHandler = function(status, text) {\n  debug('_chunkHandler', status);\n  if (status !== 200 || !text) {\n    return;\n  }\n\n  for (var idx = -1; ; this.bufferPosition += idx + 1) {\n    var buf = text.slice(this.bufferPosition);\n    idx = buf.indexOf('\\n');\n    if (idx === -1) {\n      break;\n    }\n    var msg = buf.slice(0, idx);\n    if (msg) {\n      debug('message', msg);\n      this.emit('message', msg);\n    }\n  }\n};\n\nXhrReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nXhrReceiver.prototype.abort = function() {\n  debug('abort');\n  if (this.xo) {\n    this.xo.close();\n    debug('close');\n    this.emit('close', null, 'user');\n    this.xo = null;\n  }\n  this._cleanup();\n};\n\nmodule.exports = XhrReceiver;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/receiver/xhr.js\n ** module id = 66\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , XhrDriver = require('../driver/xhr')\n  ;\n\nfunction XHRCorsObject(method, url, payload, opts) {\n  XhrDriver.call(this, method, url, payload, opts);\n}\n\ninherits(XHRCorsObject, XhrDriver);\n\nXHRCorsObject.enabled = XhrDriver.enabled && XhrDriver.supportsCORS;\n\nmodule.exports = XHRCorsObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/sender/xhr-cors.js\n ** module id = 67\n ** module chunks = 0\n **/","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , utils = require('../../utils/event')\n  , urlUtils = require('../../utils/url')\n  , XHR = global.XMLHttpRequest\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:browser:xhr');\n}\n\nfunction AbstractXHRObject(method, url, payload, opts) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function () {\n    self._start(method, url, payload, opts);\n  }, 0);\n}\n\ninherits(AbstractXHRObject, EventEmitter);\n\nAbstractXHRObject.prototype._start = function(method, url, payload, opts) {\n  var self = this;\n\n  try {\n    this.xhr = new XHR();\n  } catch (x) {\n    // intentionally empty\n  }\n\n  if (!this.xhr) {\n    debug('no xhr');\n    this.emit('finish', 0, 'no xhr support');\n    this._cleanup();\n    return;\n  }\n\n  // several browsers cache POSTs\n  url = urlUtils.addQuery(url, 't=' + (+new Date()));\n\n  // Explorer tends to keep connection open, even after the\n  // tab gets closed: http://bugs.jquery.com/ticket/5280\n  this.unloadRef = utils.unloadAdd(function() {\n    debug('unload cleanup');\n    self._cleanup(true);\n  });\n  try {\n    this.xhr.open(method, url, true);\n    if (this.timeout && 'timeout' in this.xhr) {\n      this.xhr.timeout = this.timeout;\n      this.xhr.ontimeout = function() {\n        debug('xhr timeout');\n        self.emit('finish', 0, '');\n        self._cleanup(false);\n      };\n    }\n  } catch (e) {\n    debug('exception', e);\n    // IE raises an exception on wrong port.\n    this.emit('finish', 0, '');\n    this._cleanup(false);\n    return;\n  }\n\n  if ((!opts || !opts.noCredentials) && AbstractXHRObject.supportsCORS) {\n    debug('withCredentials');\n    // Mozilla docs says https://developer.mozilla.org/en/XMLHttpRequest :\n    // \"This never affects same-site requests.\"\n\n    this.xhr.withCredentials = 'true';\n  }\n  if (opts && opts.headers) {\n    for (var key in opts.headers) {\n      this.xhr.setRequestHeader(key, opts.headers[key]);\n    }\n  }\n\n  this.xhr.onreadystatechange = function() {\n    if (self.xhr) {\n      var x = self.xhr;\n      var text, status;\n      debug('readyState', x.readyState);\n      switch (x.readyState) {\n      case 3:\n        // IE doesn't like peeking into responseText or status\n        // on Microsoft.XMLHTTP and readystate=3\n        try {\n          status = x.status;\n          text = x.responseText;\n        } catch (e) {\n          // intentionally empty\n        }\n        debug('status', status);\n        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n        if (status === 1223) {\n          status = 204;\n        }\n\n        // IE does return readystate == 3 for 404 answers.\n        if (status === 200 && text && text.length > 0) {\n          debug('chunk');\n          self.emit('chunk', status, text);\n        }\n        break;\n      case 4:\n        status = x.status;\n        debug('status', status);\n        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n        if (status === 1223) {\n          status = 204;\n        }\n        // IE returns this for a bad port\n        // http://msdn.microsoft.com/en-us/library/windows/desktop/aa383770(v=vs.85).aspx\n        if (status === 12005 || status === 12029) {\n          status = 0;\n        }\n\n        debug('finish', status, x.responseText);\n        self.emit('finish', status, x.responseText);\n        self._cleanup(false);\n        break;\n      }\n    }\n  };\n\n  try {\n    self.xhr.send(payload);\n  } catch (e) {\n    self.emit('finish', 0, '');\n    self._cleanup(false);\n  }\n};\n\nAbstractXHRObject.prototype._cleanup = function(abort) {\n  debug('cleanup');\n  if (!this.xhr) {\n    return;\n  }\n  this.removeAllListeners();\n  utils.unloadDel(this.unloadRef);\n\n  // IE needs this field to be a function\n  this.xhr.onreadystatechange = function() {};\n  if (this.xhr.ontimeout) {\n    this.xhr.ontimeout = null;\n  }\n\n  if (abort) {\n    try {\n      this.xhr.abort();\n    } catch (x) {\n      // intentionally empty\n    }\n  }\n  this.unloadRef = this.xhr = null;\n};\n\nAbstractXHRObject.prototype.close = function() {\n  debug('close');\n  this._cleanup(true);\n};\n\nAbstractXHRObject.enabled = !!XHR;\n// override XMLHttpRequest for IE6/7\n// obfuscate to avoid firewalls\nvar axo = ['Active'].concat('Object').join('X');\nif (!AbstractXHRObject.enabled && (axo in global)) {\n  debug('overriding xmlhttprequest');\n  XHR = function() {\n    try {\n      return new global[axo]('Microsoft.XMLHTTP');\n    } catch (e) {\n      return null;\n    }\n  };\n  AbstractXHRObject.enabled = !!new XHR();\n}\n\nvar cors = false;\ntry {\n  cors = 'withCredentials' in new XHR();\n} catch (ignored) {\n  // intentionally empty\n}\n\nAbstractXHRObject.supportsCORS = cors;\n\nmodule.exports = AbstractXHRObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/browser/abstract-xhr.js\n ** module id = 68\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , XhrDriver = require('../driver/xhr')\n  ;\n\nfunction XHRLocalObject(method, url, payload /*, opts */) {\n  XhrDriver.call(this, method, url, payload, {\n    noCredentials: true\n  });\n}\n\ninherits(XHRLocalObject, XhrDriver);\n\nXHRLocalObject.enabled = XhrDriver.enabled;\n\nmodule.exports = XHRLocalObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/sender/xhr-local.js\n ** module id = 69\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = {\n  isOpera: function() {\n    return global.navigator &&\n      /opera/i.test(global.navigator.userAgent);\n  }\n\n, isKonqueror: function() {\n    return global.navigator &&\n      /konqueror/i.test(global.navigator.userAgent);\n  }\n\n  // #187 wrap document.domain in try/catch because of WP8 from file:///\n, hasDomain: function () {\n    // non-browser client always has a domain\n    if (!global.document) {\n      return true;\n    }\n\n    try {\n      return !!global.document.domain;\n    } catch (e) {\n      return false;\n    }\n  }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/utils/browser.js\n ** module id = 70\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XDRObject = require('./sender/xdr')\n  ;\n\n// According to:\n//   http://stackoverflow.com/questions/1641507/detect-browser-support-for-cross-domain-xmlhttprequests\n//   http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n\nfunction XdrStreamingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XDRObject);\n}\n\ninherits(XdrStreamingTransport, AjaxBasedTransport);\n\nXdrStreamingTransport.enabled = function(info) {\n  if (info.cookie_needed || info.nullOrigin) {\n    return false;\n  }\n  return XDRObject.enabled && info.sameScheme;\n};\n\nXdrStreamingTransport.transportName = 'xdr-streaming';\nXdrStreamingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrStreamingTransport;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/xdr-streaming.js\n ** module id = 71\n ** module chunks = 0\n **/","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , eventUtils = require('../../utils/event')\n  , browser = require('../../utils/browser')\n  , urlUtils = require('../../utils/url')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:xdr');\n}\n\n// References:\n//   http://ajaxian.com/archives/100-line-ajax-wrapper\n//   http://msdn.microsoft.com/en-us/library/cc288060(v=VS.85).aspx\n\nfunction XDRObject(method, url, payload) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function() {\n    self._start(method, url, payload);\n  }, 0);\n}\n\ninherits(XDRObject, EventEmitter);\n\nXDRObject.prototype._start = function(method, url, payload) {\n  debug('_start');\n  var self = this;\n  var xdr = new global.XDomainRequest();\n  // IE caches even POSTs\n  url = urlUtils.addQuery(url, 't=' + (+new Date()));\n\n  xdr.onerror = function() {\n    debug('onerror');\n    self._error();\n  };\n  xdr.ontimeout = function() {\n    debug('ontimeout');\n    self._error();\n  };\n  xdr.onprogress = function() {\n    debug('progress', xdr.responseText);\n    self.emit('chunk', 200, xdr.responseText);\n  };\n  xdr.onload = function() {\n    debug('load');\n    self.emit('finish', 200, xdr.responseText);\n    self._cleanup(false);\n  };\n  this.xdr = xdr;\n  this.unloadRef = eventUtils.unloadAdd(function() {\n    self._cleanup(true);\n  });\n  try {\n    // Fails with AccessDenied if port number is bogus\n    this.xdr.open(method, url);\n    if (this.timeout) {\n      this.xdr.timeout = this.timeout;\n    }\n    this.xdr.send(payload);\n  } catch (x) {\n    this._error();\n  }\n};\n\nXDRObject.prototype._error = function() {\n  this.emit('finish', 0, '');\n  this._cleanup(false);\n};\n\nXDRObject.prototype._cleanup = function(abort) {\n  debug('cleanup', abort);\n  if (!this.xdr) {\n    return;\n  }\n  this.removeAllListeners();\n  eventUtils.unloadDel(this.unloadRef);\n\n  this.xdr.ontimeout = this.xdr.onerror = this.xdr.onprogress = this.xdr.onload = null;\n  if (abort) {\n    try {\n      this.xdr.abort();\n    } catch (x) {\n      // intentionally empty\n    }\n  }\n  this.unloadRef = this.xdr = null;\n};\n\nXDRObject.prototype.close = function() {\n  debug('close');\n  this._cleanup(true);\n};\n\n// IE 8/9 if the request target uses the same scheme - #79\nXDRObject.enabled = !!(global.XDomainRequest && browser.hasDomain());\n\nmodule.exports = XDRObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/sender/xdr.js\n ** module id = 72\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , EventSourceReceiver = require('./receiver/eventsource')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , EventSourceDriver = require('eventsource')\n  ;\n\nfunction EventSourceTransport(transUrl) {\n  if (!EventSourceTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/eventsource', EventSourceReceiver, XHRCorsObject);\n}\n\ninherits(EventSourceTransport, AjaxBasedTransport);\n\nEventSourceTransport.enabled = function() {\n  return !!EventSourceDriver;\n};\n\nEventSourceTransport.transportName = 'eventsource';\nEventSourceTransport.roundTrips = 2;\n\nmodule.exports = EventSourceTransport;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/eventsource.js\n ** module id = 73\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , EventSourceDriver = require('eventsource')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:eventsource');\n}\n\nfunction EventSourceReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n\n  var self = this;\n  var es = this.es = new EventSourceDriver(url);\n  es.onmessage = function(e) {\n    debug('message', e.data);\n    self.emit('message', decodeURI(e.data));\n  };\n  es.onerror = function(e) {\n    debug('error', es.readyState, e);\n    // ES on reconnection has readyState = 0 or 1.\n    // on network error it's CLOSED = 2\n    var reason = (es.readyState !== 2 ? 'network' : 'permanent');\n    self._cleanup();\n    self._close(reason);\n  };\n}\n\ninherits(EventSourceReceiver, EventEmitter);\n\nEventSourceReceiver.prototype.abort = function() {\n  debug('abort');\n  this._cleanup();\n  this._close('user');\n};\n\nEventSourceReceiver.prototype._cleanup = function() {\n  debug('cleanup');\n  var es = this.es;\n  if (es) {\n    es.onmessage = es.onerror = null;\n    es.close();\n    this.es = null;\n  }\n};\n\nEventSourceReceiver.prototype._close = function(reason) {\n  debug('close', reason);\n  var self = this;\n  // Safari and chrome < 15 crash if we close window before\n  // waiting for ES cleanup. See:\n  // https://code.google.com/p/chromium/issues/detail?id=89155\n  setTimeout(function() {\n    self.emit('close', null, reason);\n    self.removeAllListeners();\n  }, 200);\n};\n\nmodule.exports = EventSourceReceiver;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/receiver/eventsource.js\n ** module id = 74\n ** module chunks = 0\n **/","module.exports = global.EventSource;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/browser/eventsource.js\n ** module id = 75\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , IframeTransport = require('../iframe')\n  , objectUtils = require('../../utils/object')\n  ;\n\nmodule.exports = function(transport) {\n\n  function IframeWrapTransport(transUrl, baseUrl) {\n    IframeTransport.call(this, transport.transportName, transUrl, baseUrl);\n  }\n\n  inherits(IframeWrapTransport, IframeTransport);\n\n  IframeWrapTransport.enabled = function(url, info) {\n    if (!global.document) {\n      return false;\n    }\n\n    var iframeInfo = objectUtils.extend({}, info);\n    iframeInfo.sameOrigin = true;\n    return transport.enabled(iframeInfo) && IframeTransport.enabled();\n  };\n\n  IframeWrapTransport.transportName = 'iframe-' + transport.transportName;\n  IframeWrapTransport.needBody = true;\n  IframeWrapTransport.roundTrips = IframeTransport.roundTrips + transport.roundTrips - 1; // html, javascript (2) + transport - no CORS (1)\n\n  IframeWrapTransport.facadeTransport = transport;\n\n  return IframeWrapTransport;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/lib/iframe-wrap.js\n ** module id = 76\n ** module chunks = 0\n **/","'use strict';\n\n// Few cool transports do work only for same-origin. In order to make\n// them work cross-domain we shall use iframe, served from the\n// remote domain. New browsers have capabilities to communicate with\n// cross domain iframe using postMessage(). In IE it was implemented\n// from IE 8+, but of course, IE got some details wrong:\n//    http://msdn.microsoft.com/en-us/library/cc197015(v=VS.85).aspx\n//    http://stevesouders.com/misc/test-postmessage.php\n\nvar inherits = require('inherits')\n  , JSON3 = require('json3')\n  , EventEmitter = require('events').EventEmitter\n  , version = require('../version')\n  , urlUtils = require('../utils/url')\n  , iframeUtils = require('../utils/iframe')\n  , eventUtils = require('../utils/event')\n  , random = require('../utils/random')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:transport:iframe');\n}\n\nfunction IframeTransport(transport, transUrl, baseUrl) {\n  if (!IframeTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n  EventEmitter.call(this);\n\n  var self = this;\n  this.origin = urlUtils.getOrigin(baseUrl);\n  this.baseUrl = baseUrl;\n  this.transUrl = transUrl;\n  this.transport = transport;\n  this.windowId = random.string(8);\n\n  var iframeUrl = urlUtils.addPath(baseUrl, '/iframe.html') + '#' + this.windowId;\n  debug(transport, transUrl, iframeUrl);\n\n  this.iframeObj = iframeUtils.createIframe(iframeUrl, function(r) {\n    debug('err callback');\n    self.emit('close', 1006, 'Unable to load an iframe (' + r + ')');\n    self.close();\n  });\n\n  this.onmessageCallback = this._message.bind(this);\n  eventUtils.attachEvent('message', this.onmessageCallback);\n}\n\ninherits(IframeTransport, EventEmitter);\n\nIframeTransport.prototype.close = function() {\n  debug('close');\n  this.removeAllListeners();\n  if (this.iframeObj) {\n    eventUtils.detachEvent('message', this.onmessageCallback);\n    try {\n      // When the iframe is not loaded, IE raises an exception\n      // on 'contentWindow'.\n      this.postMessage('c');\n    } catch (x) {\n      // intentionally empty\n    }\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n    this.onmessageCallback = this.iframeObj = null;\n  }\n};\n\nIframeTransport.prototype._message = function(e) {\n  debug('message', e.data);\n  if (!urlUtils.isOriginEqual(e.origin, this.origin)) {\n    debug('not same origin', e.origin, this.origin);\n    return;\n  }\n\n  var iframeMessage;\n  try {\n    iframeMessage = JSON3.parse(e.data);\n  } catch (ignored) {\n    debug('bad json', e.data);\n    return;\n  }\n\n  if (iframeMessage.windowId !== this.windowId) {\n    debug('mismatched window id', iframeMessage.windowId, this.windowId);\n    return;\n  }\n\n  switch (iframeMessage.type) {\n  case 's':\n    this.iframeObj.loaded();\n    // window global dependency\n    this.postMessage('s', JSON3.stringify([\n      version\n    , this.transport\n    , this.transUrl\n    , this.baseUrl\n    ]));\n    break;\n  case 't':\n    this.emit('message', iframeMessage.data);\n    break;\n  case 'c':\n    var cdata;\n    try {\n      cdata = JSON3.parse(iframeMessage.data);\n    } catch (ignored) {\n      debug('bad json', iframeMessage.data);\n      return;\n    }\n    this.emit('close', cdata[0], cdata[1]);\n    this.close();\n    break;\n  }\n};\n\nIframeTransport.prototype.postMessage = function(type, data) {\n  debug('postMessage', type, data);\n  this.iframeObj.post(JSON3.stringify({\n    windowId: this.windowId\n  , type: type\n  , data: data || ''\n  }), this.origin);\n};\n\nIframeTransport.prototype.send = function(message) {\n  debug('send', message);\n  this.postMessage('m', message);\n};\n\nIframeTransport.enabled = function() {\n  return iframeUtils.iframeEnabled;\n};\n\nIframeTransport.transportName = 'iframe';\nIframeTransport.roundTrips = 2;\n\nmodule.exports = IframeTransport;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/iframe.js\n ** module id = 77\n ** module chunks = 0\n **/","/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n;(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root[\"Object\"]());\n    exports || (exports = root[\"Object\"]());\n\n    // Native constructor aliases.\n    var Number = context[\"Number\"] || root[\"Number\"],\n        String = context[\"String\"] || root[\"String\"],\n        Object = context[\"Object\"] || root[\"Object\"],\n        Date = context[\"Date\"] || root[\"Date\"],\n        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n        Math = context[\"Math\"] || root[\"Math\"],\n        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty, forEach, undef;\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    try {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        // Safari < 2.0.2 stores the internal millisecond time value correctly,\n        // but clips the values returned by the date methods to the range of\n        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    } catch (exception) {}\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] !== undef) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n      } else {\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            try {\n              stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" &&\n                stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undef &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undef) === undef &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undef &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" &&\n                stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undef]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" &&\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n                // serialize extended years.\n                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n                // The milliseconds are optional in ES 5, but required in 5.1.\n                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n                // four-digit years instead of six-digit years. Credits: @Yaffle.\n                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n                // values less than 1000. Credits: @Yaffle.\n                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n            } catch (exception) {\n              stringifySupported = false;\n            }\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse;\n          if (typeof parse == \"function\") {\n            try {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  try {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  } catch (exception) {}\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    } catch (exception) {}\n                  }\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    } catch (exception) {}\n                  }\n                }\n              }\n            } catch (exception) {\n              parseSupported = false;\n            }\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Define additional utility methods if the `Date` methods are buggy.\n      if (!isExtended) {\n        var floor = Math.floor;\n        // A mapping between the months of the year and the number of days between\n        // January 1st and the first of the respective month.\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n        // Internal: Calculates the number of days between the Unix epoch and the\n        // first day of the given month.\n        var getDay = function (year, month) {\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n        };\n      }\n\n      // Internal: Determines if a property is a direct property of the given\n      // object. Delegates to the native `Object#hasOwnProperty` method.\n      if (!(isProperty = objectProto.hasOwnProperty)) {\n        isProperty = function (property) {\n          var members = {}, constructor;\n          if ((members.__proto__ = null, members.__proto__ = {\n            // The *proto* property cannot be set multiple times in recent\n            // versions of Firefox and SeaMonkey.\n            \"toString\": 1\n          }, members).toString != getClass) {\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n            // supports the mutable *proto* property.\n            isProperty = function (property) {\n              // Capture and break the object's prototype chain (see section 8.6.2\n              // of the ES 5.1 spec). The parenthesized expression prevents an\n              // unsafe transformation by the Closure Compiler.\n              var original = this.__proto__, result = property in (this.__proto__ = null, this);\n              // Restore the original prototype chain.\n              this.__proto__ = original;\n              return result;\n            };\n          } else {\n            // Capture a reference to the top-level `Object` constructor.\n            constructor = members.constructor;\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n            // other environments.\n            isProperty = function (property) {\n              var parent = (this.constructor || constructor).prototype;\n              return property in this && !(property in parent && this[property] === parent[property]);\n            };\n          }\n          members = null;\n          return isProperty.call(this, property);\n        };\n      }\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      forEach = function (object, callback) {\n        var size = 0, Properties, members, property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        members = new Properties();\n        for (property in members) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(members, property)) {\n            size++;\n          }\n        }\n        Properties = members = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n          };\n        } else if (size == 2) {\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\n          forEach = function (object, callback) {\n            // Create a set of iterated properties.\n            var members = {}, isFunction = getClass.call(object) == functionClass, property;\n            for (property in object) {\n              // Store each property name to prevent double enumeration. The\n              // `prototype` property of functions is not enumerated due to cross-\n              // environment inconsistencies.\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n              callback(property);\n            }\n          };\n        }\n        return forEach(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\n        // characters (characters with code unit values between 0 and 31) with\n        // their escaped equivalents. This is an implementation of the\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n        var unicodePrefix = \"\\\\u00\";\n        var quote = function (value) {\n          var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n          for (; index < length; index++) {\n            var charCode = value.charCodeAt(index);\n            // If the character is a control character, append its Unicode or\n            // shorthand escape sequence; otherwise, append the character as-is.\n            switch (charCode) {\n              case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n                result += Escapes[charCode];\n                break;\n              default:\n                if (charCode < 32) {\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                  break;\n                }\n                result += useCharIndex ? symbols[index] : value.charAt(index);\n            }\n          }\n          return result + '\"';\n        };\n\n        // Internal: Recursively serializes an object. Implements the\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n          try {\n            // Necessary for host object support.\n            value = object[property];\n          } catch (exception) {}\n          if (typeof value == \"object\" && value) {\n            className = getClass.call(value);\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n              if (value > -1 / 0 && value < 1 / 0) {\n                // Dates are serialized according to the `Date#toJSON` method\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                // for the ISO 8601 date time string format.\n                if (getDay) {\n                  // Manually compute the year, month, date, hours, minutes,\n                  // seconds, and milliseconds if the `getUTC*` methods are\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\n                  date = floor(value / 864e5);\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                  date = 1 + date - getDay(year, month);\n                  // The `time` value specifies the time within the day (see ES\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                  // to compute `A modulo B`, as the `%` operator does not\n                  // correspond to the `modulo` operation for negative numbers.\n                  time = (value % 864e5 + 864e5) % 864e5;\n                  // The hours, minutes, seconds, and milliseconds are obtained by\n                  // decomposing the time within the day. See section 15.9.1.10.\n                  hours = floor(time / 36e5) % 24;\n                  minutes = floor(time / 6e4) % 60;\n                  seconds = floor(time / 1e3) % 60;\n                  milliseconds = time % 1e3;\n                } else {\n                  year = value.getUTCFullYear();\n                  month = value.getUTCMonth();\n                  date = value.getUTCDate();\n                  hours = value.getUTCHours();\n                  minutes = value.getUTCMinutes();\n                  seconds = value.getUTCSeconds();\n                  milliseconds = value.getUTCMilliseconds();\n                }\n                // Serialize extended years correctly.\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                  // Months, dates, hours, minutes, and seconds should have two\n                  // digits; milliseconds should have three.\n                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                  // Milliseconds are optional in ES 5.0, but required in 5.1.\n                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              } else {\n                value = null;\n              }\n            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n              // ignores all `toJSON` methods on these objects unless they are\n              // defined directly on an instance.\n              value = value.toJSON(property);\n            }\n          }\n          if (callback) {\n            // If a replacement function was provided, call it to obtain the value\n            // for serialization.\n            value = callback.call(object, property, value);\n          }\n          if (value === null) {\n            return \"null\";\n          }\n          className = getClass.call(value);\n          if (className == booleanClass) {\n            // Booleans are represented literally.\n            return \"\" + value;\n          } else if (className == numberClass) {\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n            // `\"null\"`.\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n          } else if (className == stringClass) {\n            // Strings are double-quoted and escaped.\n            return quote(\"\" + value);\n          }\n          // Recursively serialize objects and arrays.\n          if (typeof value == \"object\") {\n            // Check for cyclic structures. This is a linear search; performance\n            // is inversely proportional to the number of unique nested objects.\n            for (length = stack.length; length--;) {\n              if (stack[length] === value) {\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\n                throw TypeError();\n              }\n            }\n            // Add the object to the stack of traversed objects.\n            stack.push(value);\n            results = [];\n            // Save the current indentation level and indent one additional level.\n            prefix = indentation;\n            indentation += whitespace;\n            if (className == arrayClass) {\n              // Recursively serialize array elements.\n              for (index = 0, length = value.length; index < length; index++) {\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                results.push(element === undef ? \"null\" : element);\n              }\n              result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n            } else {\n              // Recursively serialize object members. Members are selected from\n              // either a user-specified list of property names, or the object\n              // itself.\n              forEach(properties || value, function (property) {\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                if (element !== undef) {\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                  // is not the empty string, let `member` {quote(property) + \":\"}\n                  // be the concatenation of `member` and the `space` character.\"\n                  // The \"`space` character\" refers to the literal space\n                  // character, not the `space` {width} argument provided to\n                  // `JSON.stringify`.\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                }\n              });\n              result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n            }\n            // Remove the object from the traversed object stack.\n            stack.pop();\n            return result;\n          }\n        };\n\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n        exports.stringify = function (source, filter, width) {\n          var whitespace, callback, properties, className;\n          if (objectTypes[typeof filter] && filter) {\n            if ((className = getClass.call(filter)) == functionClass) {\n              callback = filter;\n            } else if (className == arrayClass) {\n              // Convert the property names array into a makeshift set.\n              properties = {};\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n            }\n          }\n          if (width) {\n            if ((className = getClass.call(width)) == numberClass) {\n              // Convert the `width` to an integer and create a string containing\n              // `width` number of space characters.\n              if ((width -= width % 1) > 0) {\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n              }\n            } else if (className == stringClass) {\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n            }\n          }\n          // Opera <= 7.54u2 discards the values associated with empty string keys\n          // (`\"\"`) only if they are used directly within an object member list\n          // (e.g., `!(\"\" in { \"\": 1})`).\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n        };\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9: case 10: case 13: case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123: case 125: case 91: case 93: case 58: case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                if (source.slice(Index, Index + 4) == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (source.slice(Index, Index + 5) == \"false\") {\n                  Index += 5;\n                  return false;\n                } else if (source.slice(Index, Index + 4) == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undef) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property], length;\n          if (typeof value == \"object\" && value) {\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(value, length, callback);\n              }\n            } else {\n              forEach(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports[\"runInContext\"] = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root[\"JSON3\"],\n        isRestored = false;\n\n    var JSON3 = runInContext(root, (root[\"JSON3\"] = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root[\"JSON3\"] = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    }));\n\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/json3/lib/json3.js\n ** module id = 78\n ** module chunks = 0\n **/","module.exports = __webpack_amd_options__;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-options.js\n ** module id = 79\n ** module chunks = 0\n **/","module.exports = '1.1.0';\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/version.js\n ** module id = 80\n ** module chunks = 0\n **/","'use strict';\n\nvar eventUtils = require('./event')\n  , JSON3 = require('json3')\n  , browser = require('./browser')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:iframe');\n}\n\nmodule.exports = {\n  WPrefix: '_jp'\n, currentWindowId: null\n\n, polluteGlobalNamespace: function() {\n    if (!(module.exports.WPrefix in global)) {\n      global[module.exports.WPrefix] = {};\n    }\n  }\n\n, postMessage: function(type, data) {\n    if (global.parent !== global) {\n      global.parent.postMessage(JSON3.stringify({\n        windowId: module.exports.currentWindowId\n      , type: type\n      , data: data || ''\n      }), '*');\n    } else {\n      debug('Cannot postMessage, no parent window.', type, data);\n    }\n  }\n\n, createIframe: function(iframeUrl, errorCallback) {\n    var iframe = global.document.createElement('iframe');\n    var tref, unloadRef;\n    var unattach = function() {\n      debug('unattach');\n      clearTimeout(tref);\n      // Explorer had problems with that.\n      try {\n        iframe.onload = null;\n      } catch (x) {\n        // intentionally empty\n      }\n      iframe.onerror = null;\n    };\n    var cleanup = function() {\n      debug('cleanup');\n      if (iframe) {\n        unattach();\n        // This timeout makes chrome fire onbeforeunload event\n        // within iframe. Without the timeout it goes straight to\n        // onunload.\n        setTimeout(function() {\n          if (iframe) {\n            iframe.parentNode.removeChild(iframe);\n          }\n          iframe = null;\n        }, 0);\n        eventUtils.unloadDel(unloadRef);\n      }\n    };\n    var onerror = function(err) {\n      debug('onerror', err);\n      if (iframe) {\n        cleanup();\n        errorCallback(err);\n      }\n    };\n    var post = function(msg, origin) {\n      debug('post', msg, origin);\n      try {\n        // When the iframe is not loaded, IE raises an exception\n        // on 'contentWindow'.\n        setTimeout(function() {\n          if (iframe && iframe.contentWindow) {\n            iframe.contentWindow.postMessage(msg, origin);\n          }\n        }, 0);\n      } catch (x) {\n        // intentionally empty\n      }\n    };\n\n    iframe.src = iframeUrl;\n    iframe.style.display = 'none';\n    iframe.style.position = 'absolute';\n    iframe.onerror = function() {\n      onerror('onerror');\n    };\n    iframe.onload = function() {\n      debug('onload');\n      // `onload` is triggered before scripts on the iframe are\n      // executed. Give it few seconds to actually load stuff.\n      clearTimeout(tref);\n      tref = setTimeout(function() {\n        onerror('onload timeout');\n      }, 2000);\n    };\n    global.document.body.appendChild(iframe);\n    tref = setTimeout(function() {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post\n    , cleanup: cleanup\n    , loaded: unattach\n    };\n  }\n\n/* jshint undef: false, newcap: false */\n/* eslint no-undef: 0, new-cap: 0 */\n, createHtmlfile: function(iframeUrl, errorCallback) {\n    var axo = ['Active'].concat('Object').join('X');\n    var doc = new global[axo]('htmlfile');\n    var tref, unloadRef;\n    var iframe;\n    var unattach = function() {\n      clearTimeout(tref);\n      iframe.onerror = null;\n    };\n    var cleanup = function() {\n      if (doc) {\n        unattach();\n        eventUtils.unloadDel(unloadRef);\n        iframe.parentNode.removeChild(iframe);\n        iframe = doc = null;\n        CollectGarbage();\n      }\n    };\n    var onerror = function(r) {\n      debug('onerror', r);\n      if (doc) {\n        cleanup();\n        errorCallback(r);\n      }\n    };\n    var post = function(msg, origin) {\n      try {\n        // When the iframe is not loaded, IE raises an exception\n        // on 'contentWindow'.\n        setTimeout(function() {\n          if (iframe && iframe.contentWindow) {\n              iframe.contentWindow.postMessage(msg, origin);\n          }\n        }, 0);\n      } catch (x) {\n        // intentionally empty\n      }\n    };\n\n    doc.open();\n    doc.write('<html><s' + 'cript>' +\n              'document.domain=\"' + global.document.domain + '\";' +\n              '</s' + 'cript></html>');\n    doc.close();\n    doc.parentWindow[module.exports.WPrefix] = global[module.exports.WPrefix];\n    var c = doc.createElement('div');\n    doc.body.appendChild(c);\n    iframe = doc.createElement('iframe');\n    c.appendChild(iframe);\n    iframe.src = iframeUrl;\n    iframe.onerror = function() {\n      onerror('onerror');\n    };\n    tref = setTimeout(function() {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post\n    , cleanup: cleanup\n    , loaded: unattach\n    };\n  }\n};\n\nmodule.exports.iframeEnabled = false;\nif (global.document) {\n  // postMessage misbehaves in konqueror 4.6.5 - the messages are delivered with\n  // huge delay, or not at all.\n  module.exports.iframeEnabled = (typeof global.postMessage === 'function' ||\n    typeof global.postMessage === 'object') && (!browser.isKonqueror());\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/utils/iframe.js\n ** module id = 81\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = {\n  isObject: function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  }\n\n, extend: function(obj) {\n    if (!this.isObject(obj)) {\n      return obj;\n    }\n    var source, prop;\n    for (var i = 1, length = arguments.length; i < length; i++) {\n      source = arguments[i];\n      for (prop in source) {\n        if (Object.prototype.hasOwnProperty.call(source, prop)) {\n          obj[prop] = source[prop];\n        }\n      }\n    }\n    return obj;\n  }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/utils/object.js\n ** module id = 82\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , HtmlfileReceiver = require('./receiver/htmlfile')\n  , XHRLocalObject = require('./sender/xhr-local')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  ;\n\nfunction HtmlFileTransport(transUrl) {\n  if (!HtmlfileReceiver.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/htmlfile', HtmlfileReceiver, XHRLocalObject);\n}\n\ninherits(HtmlFileTransport, AjaxBasedTransport);\n\nHtmlFileTransport.enabled = function(info) {\n  return HtmlfileReceiver.enabled && info.sameOrigin;\n};\n\nHtmlFileTransport.transportName = 'htmlfile';\nHtmlFileTransport.roundTrips = 2;\n\nmodule.exports = HtmlFileTransport;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/htmlfile.js\n ** module id = 83\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , iframeUtils = require('../../utils/iframe')\n  , urlUtils = require('../../utils/url')\n  , EventEmitter = require('events').EventEmitter\n  , random = require('../../utils/random')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:htmlfile');\n}\n\nfunction HtmlfileReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n  iframeUtils.polluteGlobalNamespace();\n\n  this.id = 'a' + random.string(6);\n  url = urlUtils.addQuery(url, 'c=' + decodeURIComponent(iframeUtils.WPrefix + '.' + this.id));\n\n  debug('using htmlfile', HtmlfileReceiver.htmlfileEnabled);\n  var constructFunc = HtmlfileReceiver.htmlfileEnabled ?\n      iframeUtils.createHtmlfile : iframeUtils.createIframe;\n\n  global[iframeUtils.WPrefix][this.id] = {\n    start: function() {\n      debug('start');\n      self.iframeObj.loaded();\n    }\n  , message: function(data) {\n      debug('message', data);\n      self.emit('message', data);\n    }\n  , stop: function() {\n      debug('stop');\n      self._cleanup();\n      self._close('network');\n    }\n  };\n  this.iframeObj = constructFunc(url, function() {\n    debug('callback');\n    self._cleanup();\n    self._close('permanent');\n  });\n}\n\ninherits(HtmlfileReceiver, EventEmitter);\n\nHtmlfileReceiver.prototype.abort = function() {\n  debug('abort');\n  this._cleanup();\n  this._close('user');\n};\n\nHtmlfileReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  if (this.iframeObj) {\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n  }\n  delete global[iframeUtils.WPrefix][this.id];\n};\n\nHtmlfileReceiver.prototype._close = function(reason) {\n  debug('_close', reason);\n  this.emit('close', null, reason);\n  this.removeAllListeners();\n};\n\nHtmlfileReceiver.htmlfileEnabled = false;\n\n// obfuscate to avoid firewalls\nvar axo = ['Active'].concat('Object').join('X');\nif (axo in global) {\n  try {\n    HtmlfileReceiver.htmlfileEnabled = !!new global[axo]('htmlfile');\n  } catch (x) {\n    // intentionally empty\n  }\n}\n\nHtmlfileReceiver.enabled = HtmlfileReceiver.htmlfileEnabled || iframeUtils.iframeEnabled;\n\nmodule.exports = HtmlfileReceiver;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/receiver/htmlfile.js\n ** module id = 84\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , XHRLocalObject = require('./sender/xhr-local')\n  ;\n\nfunction XhrPollingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrPollingTransport, AjaxBasedTransport);\n\nXhrPollingTransport.enabled = function(info) {\n  if (info.nullOrigin) {\n    return false;\n  }\n\n  if (XHRLocalObject.enabled && info.sameOrigin) {\n    return true;\n  }\n  return XHRCorsObject.enabled;\n};\n\nXhrPollingTransport.transportName = 'xhr-polling';\nXhrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XhrPollingTransport;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/xhr-polling.js\n ** module id = 85\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XdrStreamingTransport = require('./xdr-streaming')\n  , XhrReceiver = require('./receiver/xhr')\n  , XDRObject = require('./sender/xdr')\n  ;\n\nfunction XdrPollingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XDRObject);\n}\n\ninherits(XdrPollingTransport, AjaxBasedTransport);\n\nXdrPollingTransport.enabled = XdrStreamingTransport.enabled;\nXdrPollingTransport.transportName = 'xdr-polling';\nXdrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrPollingTransport;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/xdr-polling.js\n ** module id = 86\n ** module chunks = 0\n **/","'use strict';\n\n// The simplest and most robust transport, using the well-know cross\n// domain hack - JSONP. This transport is quite inefficient - one\n// message could use up to one http request. But at least it works almost\n// everywhere.\n// Known limitations:\n//   o you will get a spinning cursor\n//   o for Konqueror a dumb timer is needed to detect errors\n\nvar inherits = require('inherits')\n  , SenderReceiver = require('./lib/sender-receiver')\n  , JsonpReceiver = require('./receiver/jsonp')\n  , jsonpSender = require('./sender/jsonp')\n  ;\n\nfunction JsonPTransport(transUrl) {\n  if (!JsonPTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n  SenderReceiver.call(this, transUrl, '/jsonp', jsonpSender, JsonpReceiver);\n}\n\ninherits(JsonPTransport, SenderReceiver);\n\nJsonPTransport.enabled = function() {\n  return !!global.document;\n};\n\nJsonPTransport.transportName = 'jsonp-polling';\nJsonPTransport.roundTrips = 1;\nJsonPTransport.needBody = true;\n\nmodule.exports = JsonPTransport;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/jsonp-polling.js\n ** module id = 87\n ** module chunks = 0\n **/","'use strict';\n\nvar utils = require('../../utils/iframe')\n  , random = require('../../utils/random')\n  , browser = require('../../utils/browser')\n  , urlUtils = require('../../utils/url')\n  , inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:jsonp');\n}\n\nfunction JsonpReceiver(url) {\n  debug(url);\n  var self = this;\n  EventEmitter.call(this);\n\n  utils.polluteGlobalNamespace();\n\n  this.id = 'a' + random.string(6);\n  var urlWithId = urlUtils.addQuery(url, 'c=' + encodeURIComponent(utils.WPrefix + '.' + this.id));\n\n  global[utils.WPrefix][this.id] = this._callback.bind(this);\n  this._createScript(urlWithId);\n\n  // Fallback mostly for Konqueror - stupid timer, 35 seconds shall be plenty.\n  this.timeoutId = setTimeout(function() {\n    debug('timeout');\n    self._abort(new Error('JSONP script loaded abnormally (timeout)'));\n  }, JsonpReceiver.timeout);\n}\n\ninherits(JsonpReceiver, EventEmitter);\n\nJsonpReceiver.prototype.abort = function() {\n  debug('abort');\n  if (global[utils.WPrefix][this.id]) {\n    var err = new Error('JSONP user aborted read');\n    err.code = 1000;\n    this._abort(err);\n  }\n};\n\nJsonpReceiver.timeout = 35000;\nJsonpReceiver.scriptErrorTimeout = 1000;\n\nJsonpReceiver.prototype._callback = function(data) {\n  debug('_callback', data);\n  this._cleanup();\n\n  if (this.aborting) {\n    return;\n  }\n\n  if (data) {\n    debug('message', data);\n    this.emit('message', data);\n  }\n  this.emit('close', null, 'network');\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._abort = function(err) {\n  debug('_abort', err);\n  this._cleanup();\n  this.aborting = true;\n  this.emit('close', err.code, err.message);\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  clearTimeout(this.timeoutId);\n  if (this.script2) {\n    this.script2.parentNode.removeChild(this.script2);\n    this.script2 = null;\n  }\n  if (this.script) {\n    var script = this.script;\n    // Unfortunately, you can't really abort script loading of\n    // the script.\n    script.parentNode.removeChild(script);\n    script.onreadystatechange = script.onerror =\n        script.onload = script.onclick = null;\n    this.script = null;\n  }\n  delete global[utils.WPrefix][this.id];\n};\n\nJsonpReceiver.prototype._scriptError = function() {\n  debug('_scriptError');\n  var self = this;\n  if (this.errorTimer) {\n    return;\n  }\n\n  this.errorTimer = setTimeout(function() {\n    if (!self.loadedOkay) {\n      self._abort(new Error('JSONP script loaded abnormally (onerror)'));\n    }\n  }, JsonpReceiver.scriptErrorTimeout);\n};\n\nJsonpReceiver.prototype._createScript = function(url) {\n  debug('_createScript', url);\n  var self = this;\n  var script = this.script = global.document.createElement('script');\n  var script2;  // Opera synchronous load trick.\n\n  script.id = 'a' + random.string(8);\n  script.src = url;\n  script.type = 'text/javascript';\n  script.charset = 'UTF-8';\n  script.onerror = this._scriptError.bind(this);\n  script.onload = function() {\n    debug('onload');\n    self._abort(new Error('JSONP script loaded abnormally (onload)'));\n  };\n\n  // IE9 fires 'error' event after onreadystatechange or before, in random order.\n  // Use loadedOkay to determine if actually errored\n  script.onreadystatechange = function() {\n    debug('onreadystatechange', script.readyState);\n    if (/loaded|closed/.test(script.readyState)) {\n      if (script && script.htmlFor && script.onclick) {\n        self.loadedOkay = true;\n        try {\n          // In IE, actually execute the script.\n          script.onclick();\n        } catch (x) {\n          // intentionally empty\n        }\n      }\n      if (script) {\n        self._abort(new Error('JSONP script loaded abnormally (onreadystatechange)'));\n      }\n    }\n  };\n  // IE: event/htmlFor/onclick trick.\n  // One can't rely on proper order for onreadystatechange. In order to\n  // make sure, set a 'htmlFor' and 'event' properties, so that\n  // script code will be installed as 'onclick' handler for the\n  // script object. Later, onreadystatechange, manually execute this\n  // code. FF and Chrome doesn't work with 'event' and 'htmlFor'\n  // set. For reference see:\n  //   http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\n  // Also, read on that about script ordering:\n  //   http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order\n  if (typeof script.async === 'undefined' && global.document.attachEvent) {\n    // According to mozilla docs, in recent browsers script.async defaults\n    // to 'true', so we may use it to detect a good browser:\n    // https://developer.mozilla.org/en/HTML/Element/script\n    if (!browser.isOpera()) {\n      // Naively assume we're in IE\n      try {\n        script.htmlFor = script.id;\n        script.event = 'onclick';\n      } catch (x) {\n        // intentionally empty\n      }\n      script.async = true;\n    } else {\n      // Opera, second sync script hack\n      script2 = this.script2 = global.document.createElement('script');\n      script2.text = \"try{var a = document.getElementById('\" + script.id + \"'); if(a)a.onerror();}catch(x){};\";\n      script.async = script2.async = false;\n    }\n  }\n  if (typeof script.async !== 'undefined') {\n    script.async = true;\n  }\n\n  var head = global.document.getElementsByTagName('head')[0];\n  head.insertBefore(script, head.firstChild);\n  if (script2) {\n    head.insertBefore(script2, head.firstChild);\n  }\n};\n\nmodule.exports = JsonpReceiver;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/receiver/jsonp.js\n ** module id = 88\n ** module chunks = 0\n **/","'use strict';\n\nvar random = require('../../utils/random')\n  , urlUtils = require('../../utils/url')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:jsonp');\n}\n\nvar form, area;\n\nfunction createIframe(id) {\n  debug('createIframe', id);\n  try {\n    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n    return global.document.createElement('<iframe name=\"' + id + '\">');\n  } catch (x) {\n    var iframe = global.document.createElement('iframe');\n    iframe.name = id;\n    return iframe;\n  }\n}\n\nfunction createForm() {\n  debug('createForm');\n  form = global.document.createElement('form');\n  form.style.display = 'none';\n  form.style.position = 'absolute';\n  form.method = 'POST';\n  form.enctype = 'application/x-www-form-urlencoded';\n  form.acceptCharset = 'UTF-8';\n\n  area = global.document.createElement('textarea');\n  area.name = 'd';\n  form.appendChild(area);\n\n  global.document.body.appendChild(form);\n}\n\nmodule.exports = function(url, payload, callback) {\n  debug(url, payload);\n  if (!form) {\n    createForm();\n  }\n  var id = 'a' + random.string(8);\n  form.target = id;\n  form.action = urlUtils.addQuery(urlUtils.addPath(url, '/jsonp_send'), 'i=' + id);\n\n  var iframe = createIframe(id);\n  iframe.id = id;\n  iframe.style.display = 'none';\n  form.appendChild(iframe);\n\n  try {\n    area.value = payload;\n  } catch (e) {\n    // seriously broken browsers get here\n  }\n  form.submit();\n\n  var completed = function(err) {\n    debug('completed', id, err);\n    if (!iframe.onerror) {\n      return;\n    }\n    iframe.onreadystatechange = iframe.onerror = iframe.onload = null;\n    // Opera mini doesn't like if we GC iframe\n    // immediately, thus this timeout.\n    setTimeout(function() {\n      debug('cleaning up', id);\n      iframe.parentNode.removeChild(iframe);\n      iframe = null;\n    }, 500);\n    area.value = '';\n    // It is not possible to detect if the iframe succeeded or\n    // failed to submit our form.\n    callback(err);\n  };\n  iframe.onerror = function() {\n    debug('onerror', id);\n    completed();\n  };\n  iframe.onload = function() {\n    debug('onload', id);\n    completed();\n  };\n  iframe.onreadystatechange = function(e) {\n    debug('onreadystatechange', id, iframe.readyState, e);\n    if (iframe.readyState === 'complete') {\n      completed();\n    }\n  };\n  return function() {\n    debug('aborted', id);\n    completed(new Error('Aborted'));\n  };\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/sender/jsonp.js\n ** module id = 89\n ** module chunks = 0\n **/","'use strict';\n\nrequire('./shims');\n\nvar URL = require('url-parse')\n  , inherits = require('inherits')\n  , JSON3 = require('json3')\n  , random = require('./utils/random')\n  , escape = require('./utils/escape')\n  , urlUtils = require('./utils/url')\n  , eventUtils = require('./utils/event')\n  , transport = require('./utils/transport')\n  , objectUtils = require('./utils/object')\n  , browser = require('./utils/browser')\n  , log = require('./utils/log')\n  , Event = require('./event/event')\n  , EventTarget = require('./event/eventtarget')\n  , loc = require('./location')\n  , CloseEvent = require('./event/close')\n  , TransportMessageEvent = require('./event/trans-message')\n  , InfoReceiver = require('./info-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:main');\n}\n\nvar transports;\n\n// follow constructor steps defined at http://dev.w3.org/html5/websockets/#the-websocket-interface\nfunction SockJS(url, protocols, options) {\n  if (!(this instanceof SockJS)) {\n    return new SockJS(url, protocols, options);\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'SockJS: 1 argument required, but only 0 present\");\n  }\n  EventTarget.call(this);\n\n  this.readyState = SockJS.CONNECTING;\n  this.extensions = '';\n  this.protocol = '';\n\n  // non-standard extension\n  options = options || {};\n  if (options.protocols_whitelist) {\n    log.warn(\"'protocols_whitelist' is DEPRECATED. Use 'transports' instead.\");\n  }\n  this._transportsWhitelist = options.transports;\n  this._transportOptions = options.transportOptions || {};\n\n  var sessionId = options.sessionId || 8;\n  if (typeof sessionId === 'function') {\n    this._generateSessionId = sessionId;\n  } else if (typeof sessionId === 'number') {\n    this._generateSessionId = function() {\n      return random.string(sessionId);\n    };\n  } else {\n    throw new TypeError('If sessionId is used in the options, it needs to be a number or a function.');\n  }\n\n  this._server = options.server || random.numberString(1000);\n\n  // Step 1 of WS spec - parse and validate the url. Issue #8\n  var parsedUrl = new URL(url);\n  if (!parsedUrl.host || !parsedUrl.protocol) {\n    throw new SyntaxError(\"The URL '\" + url + \"' is invalid\");\n  } else if (parsedUrl.hash) {\n    throw new SyntaxError('The URL must not contain a fragment');\n  } else if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n    throw new SyntaxError(\"The URL's scheme must be either 'http:' or 'https:'. '\" + parsedUrl.protocol + \"' is not allowed.\");\n  }\n\n  var secure = parsedUrl.protocol === 'https:';\n  // Step 2 - don't allow secure origin with an insecure protocol\n  if (loc.protocol === 'https' && !secure) {\n    throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');\n  }\n\n  // Step 3 - check port access - no need here\n  // Step 4 - parse protocols argument\n  if (!protocols) {\n    protocols = [];\n  } else if (!Array.isArray(protocols)) {\n    protocols = [protocols];\n  }\n\n  // Step 5 - check protocols argument\n  var sortedProtocols = protocols.sort();\n  sortedProtocols.forEach(function(proto, i) {\n    if (!proto) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is invalid.\");\n    }\n    if (i < (sortedProtocols.length - 1) && proto === sortedProtocols[i + 1]) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is duplicated.\");\n    }\n  });\n\n  // Step 6 - convert origin\n  var o = urlUtils.getOrigin(loc.href);\n  this._origin = o ? o.toLowerCase() : null;\n\n  // remove the trailing slash\n  parsedUrl.set('pathname', parsedUrl.pathname.replace(/\\/+$/, ''));\n\n  // store the sanitized url\n  this.url = parsedUrl.href;\n  debug('using url', this.url);\n\n  // Step 7 - start connection in background\n  // obtain server info\n  // http://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html#section-26\n  this._urlInfo = {\n    nullOrigin: !browser.hasDomain()\n  , sameOrigin: urlUtils.isOriginEqual(this.url, loc.href)\n  , sameScheme: urlUtils.isSchemeEqual(this.url, loc.href)\n  };\n\n  this._ir = new InfoReceiver(this.url, this._urlInfo);\n  this._ir.once('finish', this._receiveInfo.bind(this));\n}\n\ninherits(SockJS, EventTarget);\n\nfunction userSetCode(code) {\n  return code === 1000 || (code >= 3000 && code <= 4999);\n}\n\nSockJS.prototype.close = function(code, reason) {\n  // Step 1\n  if (code && !userSetCode(code)) {\n    throw new Error('InvalidAccessError: Invalid code');\n  }\n  // Step 2.4 states the max is 123 bytes, but we are just checking length\n  if (reason && reason.length > 123) {\n    throw new SyntaxError('reason argument has an invalid length');\n  }\n\n  // Step 3.1\n  if (this.readyState === SockJS.CLOSING || this.readyState === SockJS.CLOSED) {\n    return;\n  }\n\n  // TODO look at docs to determine how to set this\n  var wasClean = true;\n  this._close(code || 1000, reason || 'Normal closure', wasClean);\n};\n\nSockJS.prototype.send = function(data) {\n  // #13 - convert anything non-string to string\n  // TODO this currently turns objects into [object Object]\n  if (typeof data !== 'string') {\n    data = '' + data;\n  }\n  if (this.readyState === SockJS.CONNECTING) {\n    throw new Error('InvalidStateError: The connection has not been established yet');\n  }\n  if (this.readyState !== SockJS.OPEN) {\n    return;\n  }\n  this._transport.send(escape.quote(data));\n};\n\nSockJS.version = require('./version');\n\nSockJS.CONNECTING = 0;\nSockJS.OPEN = 1;\nSockJS.CLOSING = 2;\nSockJS.CLOSED = 3;\n\nSockJS.prototype._receiveInfo = function(info, rtt) {\n  debug('_receiveInfo', rtt);\n  this._ir = null;\n  if (!info) {\n    this._close(1002, 'Cannot connect to server');\n    return;\n  }\n\n  // establish a round-trip timeout (RTO) based on the\n  // round-trip time (RTT)\n  this._rto = this.countRTO(rtt);\n  // allow server to override url used for the actual transport\n  this._transUrl = info.base_url ? info.base_url : this.url;\n  info = objectUtils.extend(info, this._urlInfo);\n  debug('info', info);\n  // determine list of desired and supported transports\n  var enabledTransports = transports.filterToEnabled(this._transportsWhitelist, info);\n  this._transports = enabledTransports.main;\n  debug(this._transports.length + ' enabled transports');\n\n  this._connect();\n};\n\nSockJS.prototype._connect = function() {\n  for (var Transport = this._transports.shift(); Transport; Transport = this._transports.shift()) {\n    debug('attempt', Transport.transportName);\n    if (Transport.needBody) {\n      if (!global.document.body ||\n          (typeof global.document.readyState !== 'undefined' &&\n            global.document.readyState !== 'complete' &&\n            global.document.readyState !== 'interactive')) {\n        debug('waiting for body');\n        this._transports.unshift(Transport);\n        eventUtils.attachEvent('load', this._connect.bind(this));\n        return;\n      }\n    }\n\n    // calculate timeout based on RTO and round trips. Default to 5s\n    var timeoutMs = (this._rto * Transport.roundTrips) || 5000;\n    this._transportTimeoutId = setTimeout(this._transportTimeout.bind(this), timeoutMs);\n    debug('using timeout', timeoutMs);\n\n    var transportUrl = urlUtils.addPath(this._transUrl, '/' + this._server + '/' + this._generateSessionId());\n    var options = this._transportOptions[Transport.transportName];\n    debug('transport url', transportUrl);\n    var transportObj = new Transport(transportUrl, this._transUrl, options);\n    transportObj.on('message', this._transportMessage.bind(this));\n    transportObj.once('close', this._transportClose.bind(this));\n    transportObj.transportName = Transport.transportName;\n    this._transport = transportObj;\n\n    return;\n  }\n  this._close(2000, 'All transports failed', false);\n};\n\nSockJS.prototype._transportTimeout = function() {\n  debug('_transportTimeout');\n  if (this.readyState === SockJS.CONNECTING) {\n    this._transportClose(2007, 'Transport timed out');\n  }\n};\n\nSockJS.prototype._transportMessage = function(msg) {\n  debug('_transportMessage', msg);\n  var self = this\n    , type = msg.slice(0, 1)\n    , content = msg.slice(1)\n    , payload\n    ;\n\n  // first check for messages that don't need a payload\n  switch (type) {\n    case 'o':\n      this._open();\n      return;\n    case 'h':\n      this.dispatchEvent(new Event('heartbeat'));\n      debug('heartbeat', this.transport);\n      return;\n  }\n\n  if (content) {\n    try {\n      payload = JSON3.parse(content);\n    } catch (e) {\n      debug('bad json', content);\n    }\n  }\n\n  if (typeof payload === 'undefined') {\n    debug('empty payload', content);\n    return;\n  }\n\n  switch (type) {\n    case 'a':\n      if (Array.isArray(payload)) {\n        payload.forEach(function(p) {\n          debug('message', self.transport, p);\n          self.dispatchEvent(new TransportMessageEvent(p));\n        });\n      }\n      break;\n    case 'm':\n      debug('message', this.transport, payload);\n      this.dispatchEvent(new TransportMessageEvent(payload));\n      break;\n    case 'c':\n      if (Array.isArray(payload) && payload.length === 2) {\n        this._close(payload[0], payload[1], true);\n      }\n      break;\n  }\n};\n\nSockJS.prototype._transportClose = function(code, reason) {\n  debug('_transportClose', this.transport, code, reason);\n  if (this._transport) {\n    this._transport.removeAllListeners();\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (!userSetCode(code) && code !== 2000 && this.readyState === SockJS.CONNECTING) {\n    this._connect();\n    return;\n  }\n\n  this._close(code, reason);\n};\n\nSockJS.prototype._open = function() {\n  debug('_open', this._transport.transportName, this.readyState);\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transportTimeoutId) {\n      clearTimeout(this._transportTimeoutId);\n      this._transportTimeoutId = null;\n    }\n    this.readyState = SockJS.OPEN;\n    this.transport = this._transport.transportName;\n    this.dispatchEvent(new Event('open'));\n    debug('connected', this.transport);\n  } else {\n    // The server might have been restarted, and lost track of our\n    // connection.\n    this._close(1006, 'Server lost session');\n  }\n};\n\nSockJS.prototype._close = function(code, reason, wasClean) {\n  debug('_close', this.transport, code, reason, wasClean, this.readyState);\n  var forceFail = false;\n\n  if (this._ir) {\n    forceFail = true;\n    this._ir.close();\n    this._ir = null;\n  }\n  if (this._transport) {\n    this._transport.close();\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (this.readyState === SockJS.CLOSED) {\n    throw new Error('InvalidStateError: SockJS has already been closed');\n  }\n\n  this.readyState = SockJS.CLOSING;\n  setTimeout(function() {\n    this.readyState = SockJS.CLOSED;\n\n    if (forceFail) {\n      this.dispatchEvent(new Event('error'));\n    }\n\n    var e = new CloseEvent('close');\n    e.wasClean = wasClean || false;\n    e.code = code || 1000;\n    e.reason = reason;\n\n    this.dispatchEvent(e);\n    this.onmessage = this.onclose = this.onerror = null;\n    debug('disconnected');\n  }.bind(this), 0);\n};\n\n// See: http://www.erg.abdn.ac.uk/~gerrit/dccp/notes/ccid2/rto_estimator/\n// and RFC 2988.\nSockJS.prototype.countRTO = function(rtt) {\n  // In a local environment, when using IE8/9 and the `jsonp-polling`\n  // transport the time needed to establish a connection (the time that pass\n  // from the opening of the transport to the call of `_dispatchOpen`) is\n  // around 200msec (the lower bound used in the article above) and this\n  // causes spurious timeouts. For this reason we calculate a value slightly\n  // larger than that used in the article.\n  if (rtt > 100) {\n    return 4 * rtt; // rto > 400msec\n  }\n  return 300 + rtt; // 300msec < rto <= 400msec\n};\n\nmodule.exports = function(availableTransports) {\n  transports = transport(availableTransports);\n  require('./iframe-bootstrap')(SockJS, availableTransports);\n  return SockJS;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/main.js\n ** module id = 90\n ** module chunks = 0\n **/","/* eslint-disable */\n/* jscs: disable */\n'use strict';\n\n// pulled specific shims from https://github.com/es-shims/es5-shim\n\nvar ArrayPrototype = Array.prototype;\nvar ObjectPrototype = Object.prototype;\nvar FunctionPrototype = Function.prototype;\nvar StringPrototype = String.prototype;\nvar array_slice = ArrayPrototype.slice;\n\nvar _toString = ObjectPrototype.toString;\nvar isFunction = function (val) {\n    return ObjectPrototype.toString.call(val) === '[object Function]';\n};\nvar isArray = function isArray(obj) {\n    return _toString.call(obj) === '[object Array]';\n};\nvar isString = function isString(obj) {\n    return _toString.call(obj) === '[object String]';\n};\n\nvar supportsDescriptors = Object.defineProperty && (function () {\n    try {\n        Object.defineProperty({}, 'x', {});\n        return true;\n    } catch (e) { /* this is ES3 */\n        return false;\n    }\n}());\n\n// Define configurable, writable and non-enumerable props\n// if they don't exist.\nvar defineProperty;\nif (supportsDescriptors) {\n    defineProperty = function (object, name, method, forceAssign) {\n        if (!forceAssign && (name in object)) { return; }\n        Object.defineProperty(object, name, {\n            configurable: true,\n            enumerable: false,\n            writable: true,\n            value: method\n        });\n    };\n} else {\n    defineProperty = function (object, name, method, forceAssign) {\n        if (!forceAssign && (name in object)) { return; }\n        object[name] = method;\n    };\n}\nvar defineProperties = function (object, map, forceAssign) {\n    for (var name in map) {\n        if (ObjectPrototype.hasOwnProperty.call(map, name)) {\n          defineProperty(object, name, map[name], forceAssign);\n        }\n    }\n};\n\nvar toObject = function (o) {\n    if (o == null) { // this matches both null and undefined\n        throw new TypeError(\"can't convert \" + o + ' to object');\n    }\n    return Object(o);\n};\n\n//\n// Util\n// ======\n//\n\n// ES5 9.4\n// http://es5.github.com/#x9.4\n// http://jsperf.com/to-integer\n\nfunction toInteger(num) {\n    var n = +num;\n    if (n !== n) { // isNaN\n        n = 0;\n    } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {\n        n = (n > 0 || -1) * Math.floor(Math.abs(n));\n    }\n    return n;\n}\n\nfunction ToUint32(x) {\n    return x >>> 0;\n}\n\n//\n// Function\n// ========\n//\n\n// ES-5 15.3.4.5\n// http://es5.github.com/#x15.3.4.5\n\nfunction Empty() {}\n\ndefineProperties(FunctionPrototype, {\n    bind: function bind(that) { // .length is 1\n        // 1. Let Target be the this value.\n        var target = this;\n        // 2. If IsCallable(Target) is false, throw a TypeError exception.\n        if (!isFunction(target)) {\n            throw new TypeError('Function.prototype.bind called on incompatible ' + target);\n        }\n        // 3. Let A be a new (possibly empty) internal list of all of the\n        //   argument values provided after thisArg (arg1, arg2 etc), in order.\n        // XXX slicedArgs will stand in for \"A\" if used\n        var args = array_slice.call(arguments, 1); // for normal call\n        // 4. Let F be a new native ECMAScript object.\n        // 11. Set the [[Prototype]] internal property of F to the standard\n        //   built-in Function prototype object as specified in 15.3.3.1.\n        // 12. Set the [[Call]] internal property of F as described in\n        //   15.3.4.5.1.\n        // 13. Set the [[Construct]] internal property of F as described in\n        //   15.3.4.5.2.\n        // 14. Set the [[HasInstance]] internal property of F as described in\n        //   15.3.4.5.3.\n        var binder = function () {\n\n            if (this instanceof bound) {\n                // 15.3.4.5.2 [[Construct]]\n                // When the [[Construct]] internal method of a function object,\n                // F that was created using the bind function is called with a\n                // list of arguments ExtraArgs, the following steps are taken:\n                // 1. Let target be the value of F's [[TargetFunction]]\n                //   internal property.\n                // 2. If target has no [[Construct]] internal method, a\n                //   TypeError exception is thrown.\n                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Construct]] internal\n                //   method of target providing args as the arguments.\n\n                var result = target.apply(\n                    this,\n                    args.concat(array_slice.call(arguments))\n                );\n                if (Object(result) === result) {\n                    return result;\n                }\n                return this;\n\n            } else {\n                // 15.3.4.5.1 [[Call]]\n                // When the [[Call]] internal method of a function object, F,\n                // which was created using the bind function is called with a\n                // this value and a list of arguments ExtraArgs, the following\n                // steps are taken:\n                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 2. Let boundThis be the value of F's [[BoundThis]] internal\n                //   property.\n                // 3. Let target be the value of F's [[TargetFunction]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Call]] internal method\n                //   of target providing boundThis as the this value and\n                //   providing args as the arguments.\n\n                // equiv: target.call(this, ...boundArgs, ...args)\n                return target.apply(\n                    that,\n                    args.concat(array_slice.call(arguments))\n                );\n\n            }\n\n        };\n\n        // 15. If the [[Class]] internal property of Target is \"Function\", then\n        //     a. Let L be the length property of Target minus the length of A.\n        //     b. Set the length own property of F to either 0 or L, whichever is\n        //       larger.\n        // 16. Else set the length own property of F to 0.\n\n        var boundLength = Math.max(0, target.length - args.length);\n\n        // 17. Set the attributes of the length own property of F to the values\n        //   specified in 15.3.5.1.\n        var boundArgs = [];\n        for (var i = 0; i < boundLength; i++) {\n            boundArgs.push('$' + i);\n        }\n\n        // XXX Build a dynamic function with desired amount of arguments is the only\n        // way to set the length property of a function.\n        // In environments where Content Security Policies enabled (Chrome extensions,\n        // for ex.) all use of eval or Function costructor throws an exception.\n        // However in all of these environments Function.prototype.bind exists\n        // and so this code will never be executed.\n        var bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);\n\n        if (target.prototype) {\n            Empty.prototype = target.prototype;\n            bound.prototype = new Empty();\n            // Clean up dangling references.\n            Empty.prototype = null;\n        }\n\n        // TODO\n        // 18. Set the [[Extensible]] internal property of F to true.\n\n        // TODO\n        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).\n        // 20. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"caller\", PropertyDescriptor {[[Get]]: thrower, [[Set]]:\n        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and\n        //   false.\n        // 21. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"arguments\", PropertyDescriptor {[[Get]]: thrower,\n        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},\n        //   and false.\n\n        // TODO\n        // NOTE Function objects created using Function.prototype.bind do not\n        // have a prototype property or the [[Code]], [[FormalParameters]], and\n        // [[Scope]] internal properties.\n        // XXX can't delete prototype in pure-js.\n\n        // 22. Return F.\n        return bound;\n    }\n});\n\n//\n// Array\n// =====\n//\n\n// ES5 15.4.3.2\n// http://es5.github.com/#x15.4.3.2\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray\ndefineProperties(Array, { isArray: isArray });\n\n\nvar boxedString = Object('a');\nvar splitString = boxedString[0] !== 'a' || !(0 in boxedString);\n\nvar properlyBoxesContext = function properlyBoxed(method) {\n    // Check node 0.6.21 bug where third parameter is not boxed\n    var properlyBoxesNonStrict = true;\n    var properlyBoxesStrict = true;\n    if (method) {\n        method.call('foo', function (_, __, context) {\n            if (typeof context !== 'object') { properlyBoxesNonStrict = false; }\n        });\n\n        method.call([1], function () {\n            'use strict';\n            properlyBoxesStrict = typeof this === 'string';\n        }, 'x');\n    }\n    return !!method && properlyBoxesNonStrict && properlyBoxesStrict;\n};\n\ndefineProperties(ArrayPrototype, {\n    forEach: function forEach(fun /*, thisp*/) {\n        var object = toObject(this),\n            self = splitString && isString(this) ? this.split('') : object,\n            thisp = arguments[1],\n            i = -1,\n            length = self.length >>> 0;\n\n        // If no callback function or if callback is not a callable function\n        if (!isFunction(fun)) {\n            throw new TypeError(); // TODO message\n        }\n\n        while (++i < length) {\n            if (i in self) {\n                // Invoke the callback function with call, passing arguments:\n                // context, property value, property key, thisArg object\n                // context\n                fun.call(thisp, self[i], i, object);\n            }\n        }\n    }\n}, !properlyBoxesContext(ArrayPrototype.forEach));\n\n// ES5 15.4.4.14\n// http://es5.github.com/#x15.4.4.14\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf\nvar hasFirefox2IndexOfBug = Array.prototype.indexOf && [0, 1].indexOf(1, 2) !== -1;\ndefineProperties(ArrayPrototype, {\n    indexOf: function indexOf(sought /*, fromIndex */ ) {\n        var self = splitString && isString(this) ? this.split('') : toObject(this),\n            length = self.length >>> 0;\n\n        if (!length) {\n            return -1;\n        }\n\n        var i = 0;\n        if (arguments.length > 1) {\n            i = toInteger(arguments[1]);\n        }\n\n        // handle negative indices\n        i = i >= 0 ? i : Math.max(0, length + i);\n        for (; i < length; i++) {\n            if (i in self && self[i] === sought) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}, hasFirefox2IndexOfBug);\n\n//\n// String\n// ======\n//\n\n// ES5 15.5.4.14\n// http://es5.github.com/#x15.5.4.14\n\n// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]\n// Many browsers do not split properly with regular expressions or they\n// do not perform the split correctly under obscure conditions.\n// See http://blog.stevenlevithan.com/archives/cross-browser-split\n// I've tested in many browsers and this seems to cover the deviant ones:\n//    'ab'.split(/(?:ab)*/) should be [\"\", \"\"], not [\"\"]\n//    '.'.split(/(.?)(.?)/) should be [\"\", \".\", \"\", \"\"], not [\"\", \"\"]\n//    'tesst'.split(/(s)*/) should be [\"t\", undefined, \"e\", \"s\", \"t\"], not\n//       [undefined, \"t\", undefined, \"e\", ...]\n//    ''.split(/.?/) should be [], not [\"\"]\n//    '.'.split(/()()/) should be [\".\"], not [\"\", \"\", \".\"]\n\nvar string_split = StringPrototype.split;\nif (\n    'ab'.split(/(?:ab)*/).length !== 2 ||\n    '.'.split(/(.?)(.?)/).length !== 4 ||\n    'tesst'.split(/(s)*/)[1] === 't' ||\n    'test'.split(/(?:)/, -1).length !== 4 ||\n    ''.split(/.?/).length ||\n    '.'.split(/()()/).length > 1\n) {\n    (function () {\n        var compliantExecNpcg = /()??/.exec('')[1] === void 0; // NPCG: nonparticipating capturing group\n\n        StringPrototype.split = function (separator, limit) {\n            var string = this;\n            if (separator === void 0 && limit === 0) {\n                return [];\n            }\n\n            // If `separator` is not a regex, use native split\n            if (_toString.call(separator) !== '[object RegExp]') {\n                return string_split.call(this, separator, limit);\n            }\n\n            var output = [],\n                flags = (separator.ignoreCase ? 'i' : '') +\n                        (separator.multiline  ? 'm' : '') +\n                        (separator.extended   ? 'x' : '') + // Proposed for ES6\n                        (separator.sticky     ? 'y' : ''), // Firefox 3+\n                lastLastIndex = 0,\n                // Make `global` and avoid `lastIndex` issues by working with a copy\n                separator2, match, lastIndex, lastLength;\n            separator = new RegExp(separator.source, flags + 'g');\n            string += ''; // Type-convert\n            if (!compliantExecNpcg) {\n                // Doesn't need flags gy, but they don't hurt\n                separator2 = new RegExp('^' + separator.source + '$(?!\\\\s)', flags);\n            }\n            /* Values for `limit`, per the spec:\n             * If undefined: 4294967295 // Math.pow(2, 32) - 1\n             * If 0, Infinity, or NaN: 0\n             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n             * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n             * If other: Type-convert, then use the above rules\n             */\n            limit = limit === void 0 ?\n                -1 >>> 0 : // Math.pow(2, 32) - 1\n                ToUint32(limit);\n            while (match = separator.exec(string)) {\n                // `separator.lastIndex` is not reliable cross-browser\n                lastIndex = match.index + match[0].length;\n                if (lastIndex > lastLastIndex) {\n                    output.push(string.slice(lastLastIndex, match.index));\n                    // Fix browsers whose `exec` methods don't consistently return `undefined` for\n                    // nonparticipating capturing groups\n                    if (!compliantExecNpcg && match.length > 1) {\n                        match[0].replace(separator2, function () {\n                            for (var i = 1; i < arguments.length - 2; i++) {\n                                if (arguments[i] === void 0) {\n                                    match[i] = void 0;\n                                }\n                            }\n                        });\n                    }\n                    if (match.length > 1 && match.index < string.length) {\n                        ArrayPrototype.push.apply(output, match.slice(1));\n                    }\n                    lastLength = match[0].length;\n                    lastLastIndex = lastIndex;\n                    if (output.length >= limit) {\n                        break;\n                    }\n                }\n                if (separator.lastIndex === match.index) {\n                    separator.lastIndex++; // Avoid an infinite loop\n                }\n            }\n            if (lastLastIndex === string.length) {\n                if (lastLength || !separator.test('')) {\n                    output.push('');\n                }\n            } else {\n                output.push(string.slice(lastLastIndex));\n            }\n            return output.length > limit ? output.slice(0, limit) : output;\n        };\n    }());\n\n// [bugfix, chrome]\n// If separator is undefined, then the result array contains just one String,\n// which is the this value (converted to a String). If limit is not undefined,\n// then the output array is truncated so that it contains no more than limit\n// elements.\n// \"0\".split(undefined, 0) -> []\n} else if ('0'.split(void 0, 0).length) {\n    StringPrototype.split = function split(separator, limit) {\n        if (separator === void 0 && limit === 0) { return []; }\n        return string_split.call(this, separator, limit);\n    };\n}\n\n// ES5 15.5.4.20\n// whitespace from: http://es5.github.io/#x15.5.4.20\nvar ws = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n    '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028' +\n    '\\u2029\\uFEFF';\nvar zeroWidth = '\\u200b';\nvar wsRegexChars = '[' + ws + ']';\nvar trimBeginRegexp = new RegExp('^' + wsRegexChars + wsRegexChars + '*');\nvar trimEndRegexp = new RegExp(wsRegexChars + wsRegexChars + '*$');\nvar hasTrimWhitespaceBug = StringPrototype.trim && (ws.trim() || !zeroWidth.trim());\ndefineProperties(StringPrototype, {\n    // http://blog.stevenlevithan.com/archives/faster-trim-javascript\n    // http://perfectionkills.com/whitespace-deviations/\n    trim: function trim() {\n        if (this === void 0 || this === null) {\n            throw new TypeError(\"can't convert \" + this + ' to object');\n        }\n        return String(this).replace(trimBeginRegexp, '').replace(trimEndRegexp, '');\n    }\n}, hasTrimWhitespaceBug);\n\n// ECMA-262, 3rd B.2.3\n// Not an ECMAScript standard, although ECMAScript 3rd Edition has a\n// non-normative section suggesting uniform semantics and it should be\n// normalized across all browsers\n// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE\nvar string_substr = StringPrototype.substr;\nvar hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';\ndefineProperties(StringPrototype, {\n    substr: function substr(start, length) {\n        return string_substr.call(\n            this,\n            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,\n            length\n        );\n    }\n}, hasNegativeSubstrBug);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/shims.js\n ** module id = 91\n ** module chunks = 0\n **/","'use strict';\n\nvar JSON3 = require('json3');\n\n// Some extra characters that Chrome gets wrong, and substitutes with\n// something else on the wire.\nvar extraEscapable = /[\\x00-\\x1f\\ud800-\\udfff\\ufffe\\uffff\\u0300-\\u0333\\u033d-\\u0346\\u034a-\\u034c\\u0350-\\u0352\\u0357-\\u0358\\u035c-\\u0362\\u0374\\u037e\\u0387\\u0591-\\u05af\\u05c4\\u0610-\\u0617\\u0653-\\u0654\\u0657-\\u065b\\u065d-\\u065e\\u06df-\\u06e2\\u06eb-\\u06ec\\u0730\\u0732-\\u0733\\u0735-\\u0736\\u073a\\u073d\\u073f-\\u0741\\u0743\\u0745\\u0747\\u07eb-\\u07f1\\u0951\\u0958-\\u095f\\u09dc-\\u09dd\\u09df\\u0a33\\u0a36\\u0a59-\\u0a5b\\u0a5e\\u0b5c-\\u0b5d\\u0e38-\\u0e39\\u0f43\\u0f4d\\u0f52\\u0f57\\u0f5c\\u0f69\\u0f72-\\u0f76\\u0f78\\u0f80-\\u0f83\\u0f93\\u0f9d\\u0fa2\\u0fa7\\u0fac\\u0fb9\\u1939-\\u193a\\u1a17\\u1b6b\\u1cda-\\u1cdb\\u1dc0-\\u1dcf\\u1dfc\\u1dfe\\u1f71\\u1f73\\u1f75\\u1f77\\u1f79\\u1f7b\\u1f7d\\u1fbb\\u1fbe\\u1fc9\\u1fcb\\u1fd3\\u1fdb\\u1fe3\\u1feb\\u1fee-\\u1fef\\u1ff9\\u1ffb\\u1ffd\\u2000-\\u2001\\u20d0-\\u20d1\\u20d4-\\u20d7\\u20e7-\\u20e9\\u2126\\u212a-\\u212b\\u2329-\\u232a\\u2adc\\u302b-\\u302c\\uaab2-\\uaab3\\uf900-\\ufa0d\\ufa10\\ufa12\\ufa15-\\ufa1e\\ufa20\\ufa22\\ufa25-\\ufa26\\ufa2a-\\ufa2d\\ufa30-\\ufa6d\\ufa70-\\ufad9\\ufb1d\\ufb1f\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4e\\ufff0-\\uffff]/g\n  , extraLookup;\n\n// This may be quite slow, so let's delay until user actually uses bad\n// characters.\nvar unrollLookup = function(escapable) {\n  var i;\n  var unrolled = {};\n  var c = [];\n  for (i = 0; i < 65536; i++) {\n    c.push( String.fromCharCode(i) );\n  }\n  escapable.lastIndex = 0;\n  c.join('').replace(escapable, function(a) {\n    unrolled[ a ] = '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    return '';\n  });\n  escapable.lastIndex = 0;\n  return unrolled;\n};\n\n// Quote string, also taking care of unicode characters that browsers\n// often break. Especially, take care of unicode surrogates:\n// http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates\nmodule.exports = {\n  quote: function(string) {\n    var quoted = JSON3.stringify(string);\n\n    // In most cases this should be very fast and good enough.\n    extraEscapable.lastIndex = 0;\n    if (!extraEscapable.test(quoted)) {\n      return quoted;\n    }\n\n    if (!extraLookup) {\n      extraLookup = unrollLookup(extraEscapable);\n    }\n\n    return quoted.replace(extraEscapable, function(a) {\n      return extraLookup[a];\n    });\n  }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/utils/escape.js\n ** module id = 92\n ** module chunks = 0\n **/","'use strict';\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:transport');\n}\n\nmodule.exports = function(availableTransports) {\n  return {\n    filterToEnabled: function(transportsWhitelist, info) {\n      var transports = {\n        main: []\n      , facade: []\n      };\n      if (!transportsWhitelist) {\n        transportsWhitelist = [];\n      } else if (typeof transportsWhitelist === 'string') {\n        transportsWhitelist = [transportsWhitelist];\n      }\n\n      availableTransports.forEach(function(trans) {\n        if (!trans) {\n          return;\n        }\n\n        if (trans.transportName === 'websocket' && info.websocket === false) {\n          debug('disabled from server', 'websocket');\n          return;\n        }\n\n        if (transportsWhitelist.length &&\n            transportsWhitelist.indexOf(trans.transportName) === -1) {\n          debug('not in whitelist', trans.transportName);\n          return;\n        }\n\n        if (trans.enabled(info)) {\n          debug('enabled', trans.transportName);\n          transports.main.push(trans);\n          if (trans.facadeTransport) {\n            transports.facade.push(trans.facadeTransport);\n          }\n        } else {\n          debug('disabled', trans.transportName);\n        }\n      });\n      return transports;\n    }\n  };\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/utils/transport.js\n ** module id = 93\n ** module chunks = 0\n **/","'use strict';\n\nvar logObject = {};\n['log', 'debug', 'warn'].forEach(function (level) {\n  var levelExists;\n\n  try {\n    levelExists = global.console && global.console[level] && global.console[level].apply;\n  } catch(e) {\n    // do nothing\n  }\n\n  logObject[level] = levelExists ? function () {\n    return global.console[level].apply(global.console, arguments);\n  } : (level === 'log' ? function () {} : logObject.log);\n});\n\nmodule.exports = logObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/utils/log.js\n ** module id = 94\n ** module chunks = 0\n **/","'use strict';\n\nfunction Event(eventType) {\n  this.type = eventType;\n}\n\nEvent.prototype.initEvent = function(eventType, canBubble, cancelable) {\n  this.type = eventType;\n  this.bubbles = canBubble;\n  this.cancelable = cancelable;\n  this.timeStamp = +new Date();\n  return this;\n};\n\nEvent.prototype.stopPropagation = function() {};\nEvent.prototype.preventDefault = function() {};\n\nEvent.CAPTURING_PHASE = 1;\nEvent.AT_TARGET = 2;\nEvent.BUBBLING_PHASE = 3;\n\nmodule.exports = Event;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/event/event.js\n ** module id = 95\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = global.location || {\n  origin: 'http://localhost:80'\n, protocol: 'http'\n, host: 'localhost'\n, port: 80\n, href: 'http://localhost/'\n, hash: ''\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/location.js\n ** module id = 96\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , Event = require('./event')\n  ;\n\nfunction CloseEvent() {\n  Event.call(this);\n  this.initEvent('close', false, false);\n  this.wasClean = false;\n  this.code = 0;\n  this.reason = '';\n}\n\ninherits(CloseEvent, Event);\n\nmodule.exports = CloseEvent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/event/close.js\n ** module id = 97\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , Event = require('./event')\n  ;\n\nfunction TransportMessageEvent(data) {\n  Event.call(this);\n  this.initEvent('message', false, false);\n  this.data = data;\n}\n\ninherits(TransportMessageEvent, Event);\n\nmodule.exports = TransportMessageEvent;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/event/trans-message.js\n ** module id = 98\n ** module chunks = 0\n **/","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , urlUtils = require('./utils/url')\n  , XDR = require('./transport/sender/xdr')\n  , XHRCors = require('./transport/sender/xhr-cors')\n  , XHRLocal = require('./transport/sender/xhr-local')\n  , XHRFake = require('./transport/sender/xhr-fake')\n  , InfoIframe = require('./info-iframe')\n  , InfoAjax = require('./info-ajax')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-receiver');\n}\n\nfunction InfoReceiver(baseUrl, urlInfo) {\n  debug(baseUrl);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function() {\n    self.doXhr(baseUrl, urlInfo);\n  }, 0);\n}\n\ninherits(InfoReceiver, EventEmitter);\n\n// TODO this is currently ignoring the list of available transports and the whitelist\n\nInfoReceiver._getReceiver = function(baseUrl, url, urlInfo) {\n  // determine method of CORS support (if needed)\n  if (urlInfo.sameOrigin) {\n    return new InfoAjax(url, XHRLocal);\n  }\n  if (XHRCors.enabled) {\n    return new InfoAjax(url, XHRCors);\n  }\n  if (XDR.enabled && urlInfo.sameScheme) {\n    return new InfoAjax(url, XDR);\n  }\n  if (InfoIframe.enabled()) {\n    return new InfoIframe(baseUrl, url);\n  }\n  return new InfoAjax(url, XHRFake);\n};\n\nInfoReceiver.prototype.doXhr = function(baseUrl, urlInfo) {\n  var self = this\n    , url = urlUtils.addPath(baseUrl, '/info')\n    ;\n  debug('doXhr', url);\n\n  this.xo = InfoReceiver._getReceiver(baseUrl, url, urlInfo);\n\n  this.timeoutRef = setTimeout(function() {\n    debug('timeout');\n    self._cleanup(false);\n    self.emit('finish');\n  }, InfoReceiver.timeout);\n\n  this.xo.once('finish', function(info, rtt) {\n    debug('finish', info, rtt);\n    self._cleanup(true);\n    self.emit('finish', info, rtt);\n  });\n};\n\nInfoReceiver.prototype._cleanup = function(wasClean) {\n  debug('_cleanup');\n  clearTimeout(this.timeoutRef);\n  this.timeoutRef = null;\n  if (!wasClean && this.xo) {\n    this.xo.close();\n  }\n  this.xo = null;\n};\n\nInfoReceiver.prototype.close = function() {\n  debug('close');\n  this.removeAllListeners();\n  this._cleanup(false);\n};\n\nInfoReceiver.timeout = 8000;\n\nmodule.exports = InfoReceiver;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/info-receiver.js\n ** module id = 99\n ** module chunks = 0\n **/","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  ;\n\nfunction XHRFake(/* method, url, payload, opts */) {\n  var self = this;\n  EventEmitter.call(this);\n\n  this.to = setTimeout(function() {\n    self.emit('finish', 200, '{}');\n  }, XHRFake.timeout);\n}\n\ninherits(XHRFake, EventEmitter);\n\nXHRFake.prototype.close = function() {\n  clearTimeout(this.to);\n};\n\nXHRFake.timeout = 2000;\n\nmodule.exports = XHRFake;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/transport/sender/xhr-fake.js\n ** module id = 100\n ** module chunks = 0\n **/","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , JSON3 = require('json3')\n  , utils = require('./utils/event')\n  , IframeTransport = require('./transport/iframe')\n  , InfoReceiverIframe = require('./info-iframe-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-iframe');\n}\n\nfunction InfoIframe(baseUrl, url) {\n  var self = this;\n  EventEmitter.call(this);\n\n  var go = function() {\n    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);\n\n    ifr.once('message', function(msg) {\n      if (msg) {\n        var d;\n        try {\n          d = JSON3.parse(msg);\n        } catch (e) {\n          debug('bad json', msg);\n          self.emit('finish');\n          self.close();\n          return;\n        }\n\n        var info = d[0], rtt = d[1];\n        self.emit('finish', info, rtt);\n      }\n      self.close();\n    });\n\n    ifr.once('close', function() {\n      self.emit('finish');\n      self.close();\n    });\n  };\n\n  // TODO this seems the same as the 'needBody' from transports\n  if (!global.document.body) {\n    utils.attachEvent('load', go);\n  } else {\n    go();\n  }\n}\n\ninherits(InfoIframe, EventEmitter);\n\nInfoIframe.enabled = function() {\n  return IframeTransport.enabled();\n};\n\nInfoIframe.prototype.close = function() {\n  if (this.ifr) {\n    this.ifr.close();\n  }\n  this.removeAllListeners();\n  this.ifr = null;\n};\n\nmodule.exports = InfoIframe;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/info-iframe.js\n ** module id = 101\n ** module chunks = 0\n **/","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , JSON3 = require('json3')\n  , XHRLocalObject = require('./transport/sender/xhr-local')\n  , InfoAjax = require('./info-ajax')\n  ;\n\nfunction InfoReceiverIframe(transUrl) {\n  var self = this;\n  EventEmitter.call(this);\n\n  this.ir = new InfoAjax(transUrl, XHRLocalObject);\n  this.ir.once('finish', function(info, rtt) {\n    self.ir = null;\n    self.emit('message', JSON3.stringify([info, rtt]));\n  });\n}\n\ninherits(InfoReceiverIframe, EventEmitter);\n\nInfoReceiverIframe.transportName = 'iframe-info-receiver';\n\nInfoReceiverIframe.prototype.close = function() {\n  if (this.ir) {\n    this.ir.close();\n    this.ir = null;\n  }\n  this.removeAllListeners();\n};\n\nmodule.exports = InfoReceiverIframe;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/info-iframe-receiver.js\n ** module id = 102\n ** module chunks = 0\n **/","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , JSON3 = require('json3')\n  , objectUtils = require('./utils/object')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-ajax');\n}\n\nfunction InfoAjax(url, AjaxObject) {\n  EventEmitter.call(this);\n\n  var self = this;\n  var t0 = +new Date();\n  this.xo = new AjaxObject('GET', url);\n\n  this.xo.once('finish', function(status, text) {\n    var info, rtt;\n    if (status === 200) {\n      rtt = (+new Date()) - t0;\n      if (text) {\n        try {\n          info = JSON3.parse(text);\n        } catch (e) {\n          debug('bad json', text);\n        }\n      }\n\n      if (!objectUtils.isObject(info)) {\n        info = {};\n      }\n    }\n    self.emit('finish', info, rtt);\n    self.removeAllListeners();\n  });\n}\n\ninherits(InfoAjax, EventEmitter);\n\nInfoAjax.prototype.close = function() {\n  this.removeAllListeners();\n  this.xo.close();\n};\n\nmodule.exports = InfoAjax;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/info-ajax.js\n ** module id = 103\n ** module chunks = 0\n **/","'use strict';\n\nvar urlUtils = require('./utils/url')\n  , eventUtils = require('./utils/event')\n  , JSON3 = require('json3')\n  , FacadeJS = require('./facade')\n  , InfoIframeReceiver = require('./info-iframe-receiver')\n  , iframeUtils = require('./utils/iframe')\n  , loc = require('./location')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:iframe-bootstrap');\n}\n\nmodule.exports = function(SockJS, availableTransports) {\n  var transportMap = {};\n  availableTransports.forEach(function(at) {\n    if (at.facadeTransport) {\n      transportMap[at.facadeTransport.transportName] = at.facadeTransport;\n    }\n  });\n\n  // hard-coded for the info iframe\n  // TODO see if we can make this more dynamic\n  transportMap[InfoIframeReceiver.transportName] = InfoIframeReceiver;\n  var parentOrigin;\n\n  /* eslint-disable camelcase */\n  SockJS.bootstrap_iframe = function() {\n    /* eslint-enable camelcase */\n    var facade;\n    iframeUtils.currentWindowId = loc.hash.slice(1);\n    var onMessage = function(e) {\n      if (e.source !== parent) {\n        return;\n      }\n      if (typeof parentOrigin === 'undefined') {\n        parentOrigin = e.origin;\n      }\n      if (e.origin !== parentOrigin) {\n        return;\n      }\n\n      var iframeMessage;\n      try {\n        iframeMessage = JSON3.parse(e.data);\n      } catch (ignored) {\n        debug('bad json', e.data);\n        return;\n      }\n\n      if (iframeMessage.windowId !== iframeUtils.currentWindowId) {\n        return;\n      }\n      switch (iframeMessage.type) {\n      case 's':\n        var p;\n        try {\n          p = JSON3.parse(iframeMessage.data);\n        } catch (ignored) {\n          debug('bad json', iframeMessage.data);\n          break;\n        }\n        var version = p[0];\n        var transport = p[1];\n        var transUrl = p[2];\n        var baseUrl = p[3];\n        debug(version, transport, transUrl, baseUrl);\n        // change this to semver logic\n        if (version !== SockJS.version) {\n          throw new Error('Incompatible SockJS! Main site uses:' +\n                    ' \"' + version + '\", the iframe:' +\n                    ' \"' + SockJS.version + '\".');\n        }\n\n        if (!urlUtils.isOriginEqual(transUrl, loc.href) ||\n            !urlUtils.isOriginEqual(baseUrl, loc.href)) {\n          throw new Error('Can\\'t connect to different domain from within an ' +\n                    'iframe. (' + loc.href + ', ' + transUrl + ', ' + baseUrl + ')');\n        }\n        facade = new FacadeJS(new transportMap[transport](transUrl, baseUrl));\n        break;\n      case 'm':\n        facade._send(iframeMessage.data);\n        break;\n      case 'c':\n        if (facade) {\n          facade._close();\n        }\n        facade = null;\n        break;\n      }\n    };\n\n    eventUtils.attachEvent('message', onMessage);\n\n    // Start\n    iframeUtils.postMessage('s');\n  };\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/iframe-bootstrap.js\n ** module id = 104\n ** module chunks = 0\n **/","'use strict';\n\nvar JSON3 = require('json3')\n  , iframeUtils = require('./utils/iframe')\n  ;\n\nfunction FacadeJS(transport) {\n  this._transport = transport;\n  transport.on('message', this._transportMessage.bind(this));\n  transport.on('close', this._transportClose.bind(this));\n}\n\nFacadeJS.prototype._transportClose = function(code, reason) {\n  iframeUtils.postMessage('c', JSON3.stringify([code, reason]));\n};\nFacadeJS.prototype._transportMessage = function(frame) {\n  iframeUtils.postMessage('t', frame);\n};\nFacadeJS.prototype._send = function(data) {\n  this._transport.send(data);\n};\nFacadeJS.prototype._close = function() {\n  this._transport.close();\n  this._transport.removeAllListeners();\n};\n\nmodule.exports = FacadeJS;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sockjs-client/lib/facade.js\n ** module id = 105\n ** module chunks = 0\n **/","import MessageRoom from '../Components/MessageRoom/MessageRoom.js';\nimport * as Helpers from '../Helpers/Helpers.js';\n\nclass ChannelManager {\n\tconstructor(opts) {\n\t\tthis.bus = opts.bus;\n\t\tthis.transport = opts.transport;\n\t\tthis.rooms = [];\n\t\tthis.active = m.prop(null);\n\n\t\t// When we reconnect, we need to re-join all of our rooms\n\t\tthis.bus.on('transport.open', (event) => {\n\t\t\tif (!event.was_reconnection) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar groups = _.map(this.rooms, (room) => {\n\t\t\t\treturn room.instance.transportSafeRoomName();\n\t\t\t});\n\n\t\t\tif (groups.length) {\n\t\t\t\tthis.transport.join(groups);\n\t\t\t}\n\t\t}, this);\n\n\t\t// If we get a channel invite for one we don't already have, open it\n\t\tthis.bus.on('message.channel.invite', (event) => {\n\t\t\tvar label = event.channel_label;\n\t\t\tif (event.invite_size === 2 && event.channel_type === 3) {\n\t\t\t\t// Only us and 1 other person in this channel, and it's a private channel? it's a PM\n\t\t\t\tlabel = event.user;\n\t\t\t}\n\n\t\t\tvar channel = this.getRoom(event.channel_name);\n\t\t\tif (channel) {\n\t\t\t\tchannel.instance.label(label);\n\t\t\t} else {\n\t\t\t\tthis.createRoom(event.channel_name, {\n\t\t\t\t\tlabel: label\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.bus.on('action.ocbutton.click', (event, channel_name) => {\n\t\t\tif (!channel_name) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\t\t\tvar channel = this.createRoom(channel_name);\n\t\t\tthis.setActive(channel.instance.name());\n\t\t});\n\t}\n\n\ttransportSafeRoomName(name) {\n\t\treturn name.toLowerCase().replace('/r/', 'reddit_sub_');\n\t}\n\n\tcreateRoom(room_name, args) {\n\t\targs = args || {};\n\t\tvar room = this.getRoom(room_name);\n\n\t\tif (!room) {\n\t\t\troom = Helpers.subModule(MessageRoom, {\n\t\t\t\tname: room_name,\n\t\t\t\tlabel: args.label,\n\t\t\t\tread_upto: args.read_upto,\n\t\t\t\taccess: args.access,\n\t\t\t\tlinked_channels: args.linked_channels,\n\t\t\t\tbus: this.bus,\n\t\t\t\troom_manager: this\n\t\t\t});\n\n\t\t\tthis.rooms.push(room);\n\t\t\tthis.transport.join(room.instance.transportSafeRoomName());\n\n\t\t\tthis.bus.trigger('channel.created', room.instance);\n\t\t}\n\n\t\t// If we don't currently have an active room, make this the active room\n\t\tif (!this.active()) {\n\t\t\tthis.setActive(room.instance.name);\n\t\t}\n\n\t\treturn room;\n\t}\n\n\tcloseRoom(room_name) {\n\t\tvar room = this.getRoom(room_name);\n\t\tif (!room) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar room_idx = this.rooms.indexOf(room);\n\n\t\tthis.rooms = _.without(this.rooms, room);\n\t\tthis.transport.leave(room.instance.transportSafeRoomName());\n\t\tthis.bus.trigger('channel.close', room);\n\n\t\t// The room after the one that was just removed should now be selected. If there\n\t\t// is none, then the one before it.\n\t\tif (this.rooms[room_idx]) {\n\t\t\tthis.setActive(this.rooms[room_idx].instance.name());\n\t\t} else if (this.rooms[room_idx - 1]){\n\t\t\tthis.setActive(this.rooms[room_idx - 1].instance.name());\n\t\t} else {\n\t\t\tthis.setActive(null);\n\t\t}\n\t}\n\n\tgetRoom(room_name) {\n\t\tif (typeof room_name !== 'string') {\n\t\t\treturn;\n\t\t}\n\n\t\tvar normalised_name = this.transportSafeRoomName(room_name);\n\t\treturn _.find(this.rooms, function(room) {\n\t\t\treturn normalised_name === room.instance.transportSafeRoomName();\n\t\t});\n\t}\n\n\tsetActive(room_name) {\n\t\tvar current_room = this.active();\n\t\tvar selected_room = this.getRoom(room_name);\n\n\t\tif (!selected_room) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.active(selected_room || null);\n\n\t\tif (current_room) {\n\t\t\tcurrent_room.instance.is_active = false;\n\t\t}\n\t\tif (selected_room) {\n\t\t\tselected_room.instance.is_active = true;\n\t\t}\n\n\t\tthis.bus.trigger(\n\t\t\t'channel.active',\n\t\t\tselected_room ? selected_room.instance : null,\n\t\t\tcurrent_room ? current_room.instance : null\n\t\t);\n\t}\n\n\tsetIndexActive(room_idx) {\n\t\tvar room = this.rooms[0];\n\t\tthis.setActive(room ? room.name() : null);\n\t}\n}\n\nexport default ChannelManager;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Services/ChannelManager.js\n **/","var ModeratorToolbox = {};\n\nModeratorToolbox.isActive = function() {\n\treturn $('#tb-bottombar').length;\n};\n\nexport default ModeratorToolbox;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Services/ModeratorToolbox.js\n **/","/**\n * Simple wrapper around localStorage\n */\nvar Storage = {};\n\nStorage.get = function(key, default_val) {\n\tvar val = null;\n\n\ttry {\n\t\tval = window.localStorage.getItem(key);\n\t\tval = JSON.parse(val);\n\t} catch (err) {}\n\n\treturn (val === null) ?\n\t\tdefault_val :\n\t\tval;\n};\n\nStorage.set = function(key, val) {\n\ttry {\n\t\twindow.localStorage.setItem(key, JSON.stringify(val));\n\t} catch (err) {\n\t\tconsole.error(err);\n\t}\n};\n\nexport default Storage;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Services/Storage.js\n **/","/**\n * Simple settings object\n * @param {Object} values Object that stores the key/val settings\n */\nfunction Settings(values) {\n\tvar instance;\n\n\tvar get = function(key, default_val) {\n\t\tvar val = values[key];\n\t\treturn (val === null || val === undefined) ?\n\t\t\tdefault_val :\n\t\t\tval;\n\t};\n\n\tvar set = function(key, val) {\n\t\tvar old_val = values[key];\n\t\tvalues[key] = val;\n\t\tif (typeof instance.onChange === 'function') {\n\t\t\tinstance.onChange(key, val, old_val, values);\n\t\t}\n\t};\n\n\t// Support:\n\t// instance(getter)\n\t// instance.get(getter)\n\t// instance.set(setter)\n\n\tinstance = get;\n\tinstance.get = get;\n\tinstance.set = set;\n\tinstance.values = values;\n\n\t// This .onChange as a property is bad mmkay. Add it as an event listener or something\n\tinstance.onChange = null;\n\n\treturn instance;\n}\n\n\nexport default Settings;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Services/Settings.js\n **/","class EventBus {\n\n\tconstructor() {\n\t\tthis.findandAssignEventEmitter();\n\t\tthis.overloadAddEvent();\n\t}\n\n\tfindandAssignEventEmitter() {\n\t\t// reddit.com has backbone...\n\t\tif (Backbone && Backbone.Events) {\n\t\t\t_.extend(this, Backbone.Events);\n\t\t} else {\n\t\t\t// TODO: Include a very simple event emitter to use outside of reddit.com\n\t\t\tconsole.log('[error] No event emitter found!');\n\t\t}\n\t}\n\n\toverloadAddEvent() {\n\t\tvar self = this;\n\t\tvar original_on = this.on;\n\t\tvar original_once = this.once;\n\n\t\tthis.on = function on(event, fn, context) {\n\t\t\toriginal_on.call(this, event, fn, context);\n\t\t\treturn {\n\t\t\t\toff: function off() {\n\t\t\t\t\tself.off(event, fn, context);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\tthis.once = function once(event, fn, context) {\n\t\t\toriginal_once.call(this, event, fn, context);\n\t\t\treturn {\n\t\t\t\toff: function off() {\n\t\t\t\t\tself.off(event, fn, context);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t}\n}\n\nexport default EventBus;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Services/EventBus.js\n **/","/**\n * Syncing between tabs/windows with the Kango extension framework\n * @param {Object} values Object that stores the key/val settings\n */\nclass ExtensionSync {\n\tconstructor(state, bus, body) {\n\t\tthis.state = state;\n\t\tthis.bus = bus;\n\t\tthis.body = body;\n\t\tthis.is_syncing = false;\n\t}\n\n\n\tisExtensionAvailable() {\n\t\treturn !!(this.ext || window.__oc6789);\n\t}\n\n\n\tinit(cb) {\n\t\tvar cb_after_sync = null;\n\n\t\tthis.bus.on('state.change', (changed, new_value, old_value, values) => {\n\t\t\tif (!this.is_syncing && changed === 'channel_list') {\n\t\t\t\tthis.extCall('setChannels', new_value);\n\t\t\t}\n\t\t});\n\n\t\tthis.body.addEventListener('__ocext', (event) => {\n\t\t\tvar payload = JSON.parse(event.detail);\n\t\t\tif (payload[0] !== 'ext') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (payload[1] === 'channelsStateUpdated') {\n\t\t\t\tthis.is_syncing = true;\n\t\t\t\tthis.state.set('channel_list', payload[2]);\n\t\t\t\tthis.is_syncing = false;\n\n\t\t\t\tif (cb_after_sync) {\n\t\t\t\t\tcb_after_sync();\n\t\t\t\t\tcb_after_sync = null;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tcb_after_sync = cb;\n\t\tthis.extCall('sendMeChannels');\n\t}\n\n\n\textCall(function_name, args) {\n\t\tvar payload = ['app', function_name, args];\n\t\tvar event = new CustomEvent('__ocext', {\n\t\t\tdetail: JSON.stringify(payload)\n\t\t});\n\t\tthis.body.dispatchEvent(event);\n\t}\n}\n\n\nexport default ExtensionSync;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Services/ExtensionSync.js\n **/"],"sourceRoot":""}
